Energy and Delay Analysis of Contention Resolution Mechanisms for Machine-to-Machine

Abstract?Attaining very high energy efficiency is one of the big challenges to implement Machine-to-Machine (M2M) networks whose lifetime (without human intervention) must be measured in years. In this paper, we consider a synchronized duty-cycled M2M network composed of a large number of devices that periodically wake up their radio interfaces to transmit data to a coordinator. We theoretically analyze the delay and energy efficiency of two contention-based Medium Access Control (MAC) protocols for this kind of networks. One protocol is based on Frame Slotted ALOHA, and the other is based on a tree-splitting contention resolution algorithm. Computer-based simulations have been carried out to ensure the accuracy of the theoretical models and to evaluate and compare the performance of the two alternatives for M2M applications based on low power Wi-Fi devices.

Index Terms?absorbing Markov chain, contention resolution, energy analysis, tree-splitting, performance evaluation.



I. INTRODUCTION  Machine-to-Machine (M2M) networks aim at connecting devices that must operate autonomously for years (or decades) with very limited access to energy sources. Therefore, energy efficiency is essential in the design of M2M networks. In this work, we consider an M2M application where a group of sensing devices acquires measurements during a certain period of time, during which their radio interfaces are dis- abled to reduce energy consumption. These devices wake up periodically to transmit their data upon request from a coor- dinator device (sink or reader). Since the number of sensing devices that may respond simultaneously to the request can be potentially large, a Medium Access Control (MAC) protocol is needed to avoid collisions. There are two main categories of MAC protocols: reservation-based and contention-based.

Reservation-based protocols require the knowledge of the network topology to establish a schedule that allows each device to transmit without collisions, which is difficult to attain in dense and duty-cycled M2M networks. Contrarily, in the  This work was supported in part by the Research Projects EXALTED (FP7- ICT-258512), CO2GREEN (TEC2010-20823), GREEN-T (TSI-020400-2011- 16), and by the Catalan Government under grant 2009SGR1046.

contention-based approach the devices compete for the channel using Carrier Sense Multiple Access (CSMA) or ALOHA- based protocols. These protocols do not require topology knowledge a priori, but suffer from degraded performance [1] in terms of throughput, delay, and energy consumption when the traffic load is high or when the number of devices is large, which is the case in M2M networks. Despite this, many standards for short-range communications, such as the IEEE 802.11, IEEE 802.15.4, or ISO-18000-7 for Radio Frequency Identification (RFID) rely on contention-based protocols due to their distributed operation and simplicity, which make them ideal for low-cost and simple devices.

The M2M application that we consider in this work is very  similar to RFID, where a reader transmits requests to the tags and they respond with their identification using slotted- ALOHA [2]. Two types of contention resolution mechanisms are typically implemented to improve the performance of slotted-ALOHA in RFID: (i) probabilistic algorithms based on frame slotted (FS)-ALOHA [3], and (ii) tree-splitting algorithms, based on the contention tree algorithm (CTA) [4], that split the devices into sub-groups to reduce collisions.

Up to our knowledge, previous works in RFID focus on the minimization of the delay and compare the energy consumed by the tags and the reader using several variants of FS-ALOHA [5] [6] and tree-splitting algorithms [7]. The results show that the energy consumption grows exponentially with the number of tags. However, these works do not describe how to maximize the energy efficiency during the identification process, and the energy models are not complete for M2M devices, e.g., some authors consider only the energy consumed by the tags in transmission, but neither in reception nor in sleep states. This is the main motivation for the work presented in this paper, where we focus on understanding under which conditions the two types of contention resolution mechanisms (FS-ALOHA and CTA) may improve the energy efficiency of M2M networks. For the performance analysis, we consider M2M applications based on low power Wi-Fi devices, which have shown to be even more energy-efficient than solutions based on the IEEE 802.15.4 Standard [8].

IEEE ICC 2013 - Communication QoS, Reliability and Modeling Symposium     Therefore, the main contributions of this paper are: (i) we first formulate accurate average delay and energy models for FS-ALOHA and CTA, and (ii) we evaluate and compare the performance of both mechanisms in terms of average delay and energy, and determine the criteria to minimize delay and maximize energy efficiency.

The remainder of this paper is organized as follows. In  Section II, we describe the system model and the two con- tention resolution mechanisms. In Section III and Section IV, we present the analysis of both mechanisms, based on Markov chain theory and probabilistic methods, which is required to formulate the analytical models derived later in Section V.

Section VI is devoted to validate the models and to evaluate the performance of both mechanisms through comprehensive computer-based simulation. Finally, Section VII concludes the paper.



II. SYSTEM MODEL AND CONTENTION RESOLUTION MECHANISMS  Let us consider a single-hop wireless network composed of 1 coordinator and n sensing devices (also referred to as transmitters). Periodically, the coordinator sends a Request for Data (RFD) packet to initiate the transfer of measurements from the sensing devices. We assume that the transmitters are listening to the channel when the coordinator sends the RFD, and they have one data packet ready, i.e., the network has some means of synchronized duty-cycle operation. The transmitters are synchronized to a common time-slot after decoding the RFD, which is followed by a frame divided into m slots. Each transmitter randomly selects one of the slots of a frame to transmit its data packet with no clear channel assessment (CCA) before transmission, i.e., without listening to the channel before transmitting. Therefore, a given slot can be in one of three states: empty, i.e., no data packet has been transmitted in that slot, success, i.e., just one packet has been transmitted, or collision, i.e., more than one packet has been transmitted. The coordinator transmits a feedback packet (FBP) after each frame to inform of the slots with success.

A transmitter succeeds when its data packet is successfully decoded by the coordinator, i.e., it has not collided. We assume that packets are always transmitted without transmission errors due to the channel impairments. The inclusion of channel errors in the analysis is left for future work. The process is repeated, frame after frame, until the coordinator is able to decode one data packet from each device. Two variations of this mechanism are considered: (i) FS-ALOHA, and (ii) CTA.

1) Frame Slotted?ALOHA An example of the FS-ALOHA mechanism is depicted in  Figure 1.a. Those transmitter devices that have not succeeded yet in frame i do contend again in frame i+1, with i ? 1. In the example of Figure 1.a, all the devices collide in frame 1.

Thus, they contend again in frame 2, where devices 1 and 3 succeed, and devices 2, 4, and 5 collide again. Finally, devices 2, 4, and 5 contend in frame 3, where they succeed and the process ends.

RFD FBP FBPCoordinator  Device 1  Device 2  Device 3  Device 4  Frame 1 Frame 2  FBP  Time+  Frame 3  IFS IFS  Device 5  (a) Frame Slotted-ALOHA  RFD FBP FBPCoordinator  Device 1  Device 2  Device 3  Device 4  FBP  IFS IFS  Device 5  (b) Contention Tree Algorithm  Figure 1. Example of the two contention resolution mechanisms considering 5 transmitters and 3 slots per frame: (a) FS-ALOHA, and (b) CTA.

2 3 0  1 0  Frame 1  Frame 2 Frame 3  Frame 4   0 1 1  2 0 1  Figure 2. Example of one realization of a contention tree algorithm considering 5 transmitter devices and 3 slots per frame.

As shown in Figure 1, a guard time called Inter Frame Space (IFS) is left between reception and transmission in order to compensate propagation, processing, and turn-around times to switch the devices? radio transceiver between reception and transmission mode.

2) Contention Tree Algorithm An example of the contention tree algorithm [9] is depicted  in Figure 1.b. The algorithm can be represented as a tree like the one in Figure 2. Each node of the tree represents a frame, where each box represents a slot of the frame, and the number in each box denotes the amount of devices that have selected this specific slot to transmit its data packet in the corresponding frame. At the first frame, each device randomly selects a slot to send its data packet. If there is collision in a specific slot c, a new frame in the next lower level of the tree is assigned to all the devices that caused the collision in that specific slot c. Therefore, if there were collisions in k slots, then k new frames would be available after the current frame, thus leading to the formation of a tree whose expansion stops at either empty (0) or successful slots (1).

Figure 1.b shows the time diagram for only the 3 first frames  of the example for the sake of simplicity. All the devices contend in frame 1, only the 2 devices (1 and 4) that collided     in slot 1 of frame 1 contend again in frame 2, and only those 3 devices (2, 3, and 5) that collided in slot 2 of frame 1 contend in frame 3.



III. ANALYSIS OF FRAME SLOTTED-ALOHA  The FS-ALOHA algorithm can be modelled with an ab- sorbing Markov chain. Each state of the chain represents the number of transmitters that have succeeded to send their data since the process started. The Markov chain is characterized by a transition matrix P . Each element pij of P represents the probability that the number of successful devices changes from i to j after one frame, with i, j = {0, 1, ..., n}. The process finishes, i.e., it is absorbed, when all the devices have succeeded, i.e., i = n. Once this absorbing state is reached, the probability that the process changes from this state to any other is zero. The not absorbing states are called ?transient? states.

In the next subsections, we first define the transition matrix.

Secondly, we compute the average number of frames in which the process keeps in the same transient state, and the average number of frames until the process is absorbed.

A. Transition Matrix  The probability that exist a number m1 of successful slots in a given frame with m slots, having n contending devices, is denoted as Ps(m1, n). According to [10], this probability can be expressed as  Ps (m1 , n) =  ( m m1  )m1?1? k=0  (n? k)G (m?m1, n?m1) mn  , (1)  where  G (T, t) = T t +  t? k=1  (?1)k  ? k?1? j=0  {(t? j) (T ? j)} (T ? k)t?k 1 k!

, (2)  with T = m?m1 and t = n?m1.

The transition probabilities can be defined as  pij =  ?????? ?????  Ps (j ? i, n? i) , if (i < j ? i + m) 0, if (j < i) or (j > i + m)  1 ? i+m?  k=i+1  pjk, if (i = j) and (i < n)  1, if (i = j) and (i = n)  . (3)  In the first condition, j? i devices succeed and the number of contending devices is n? i, being i the number of devices that succeeded in previous frames. In the second condition, the number of successful devices decreases, or is greater than the number of slots, which are both impossible. In the third condition, no new devices succeed and the process is not yet absorbed. In the fourth condition the process is absorbed.

B. Total Average Number of Contention Frames  Being Q a sub-matrix of P that contains the probabilities in the transient states (i.e., i < n and j < n), the fundamental matrix N of the process can be defined as  N = (I ?Q)?1, (4) where each element nij of N is the average number of frames that the process remains in the transient state Xj , i.e., no new devices succeed for nij consecutive frames, given that it started in the transient state Xi. The ?time of absorption? t0 is defined as the average number of frames until the process is absorbed and can be expressed as  t0 = n01 + n02 + ... + n0n?1 = n?1? j=0  n0j , (5)  where recall that n is the total number of transmitter devices.



IV. ANALYSIS OF THE CONTENTION TREE ALGORITHM In this section, we first derive the average number of frames  required for a device to transmit its data packet successfully using CTA. Secondly, we analyse the total average number of frames required to resolve the contention using CTA, i.e., all the transmitters have sent their data packet successfully.

A. Average Number of Contention Frames per Transmitter  The probability distribution of the number of tree levels d required by a transmitter to send its data successfully (i.e., number of frames where a transmitter has to contend until it succeeds), when the number of transmitters is n and the number of slots per frame is m, can be formulated as  Pr(d|n) = ?? ?  0, if (n = 1) and (d ?= 1) 1, if (n = 1) and (d = 1) ps(d) ? ps(d? 1), if (n ? 2)  , (6)  where ps(d) is the probability that a transmitter succeeds in level d (i.e., probability that the slot in level d selected by one transmitter is not occupied by any of the other n ? 1 transmitters) and is given by  ps(d) = [1 ? p1(d)]n?1, (7) where p1(d) is the probability that a transmitter selects one of the slots in level d. Since the number of slots per frame is m, the total number of slots in level d is md, and then p1(d) = 1  / md.

The average number of levels dn can be calculated as  dn =  ?? d=1  dPr(d|n), (8)  which is developed in [9] and formulated as  dn ? logm(n? 1) + (   +  ?  logm  ) +   2n logm , (9)  where the Euler?s constant ? ? 0.5772, and the logarithm base m is given by logmn ? log n/ logm, with log n ? lnn. For a given value of m, dn increases logarithmically with n.

B. Total Average Number of Contention Frames  The average number of frames Ln required to resolve the contention using CTA, with n transmitters and m slots per frame, can be formulated as  Ln = 1 + ??  k=1  cn(m k), (10)  where cn(mk) is the average number of contention slots with collisions in level k, i.e., the average number of frames generated in the next level k + 1, and can be expressed as  cn(m k) = mk [1 ? [1 ? p1(k)]n] ? n[1 ? p1(k)]n?1. (11)  After some algebra [9] and using classical Fourier analysis, Ln can be formulated as  Ln ? n logm  ? 1 m? 1 , (12)  which increases linearly with n for a given value of m.



V. DELAY AND ENERGY MODELS  This section formulates the delay and energy models of both FS-ALOHA and CTA mechanisms. The devices can be in four different states: i) transmitting, ii) receiving a packet, iii) in idle listening, or iv) sleeping. The associated power consumptions are ?tx, ?rx, ?? , and ?sleep, respectively. We assume that ?? = ?rx, and the time and energy required to switch between sleeping and active states are negligible.

The average delay to resolve the contention, denoted by  TCR, can be calculated as  TCR = CF (mTSLOT + 2TIFS + TFBP) , (13)  where TSLOT, TIFS, and TFBP are the duration of a slot, an IFS, and the time of transmission of a FBP packet, respectively, and CF is the average number of contention frames, i.e., t0 (5) for FS-ALOHA and Ln (12) for CTA.

The average energy consumed by the coordinator is  denoted by Ecoord. The coordinator (i) listens to the channel for them slots of each frame to receive incoming data packets, (ii) keeps in idle state for the duration of two IFS, and (iii) transmits the FBP after each frame. Therefore, its average energy consumption can be formulated as  Ecoord = CF (m?rxTSLOT + 2??TIFS + ?txTFBP ) . (14)  The average energy consumed by all the transmitters is denoted by ETXtotal. A transmitter that has not succeeded yet to transmit its data packet executes the following opera- tions in each frame: (i) transmits the data packet in one of the m slots, (ii) sleeps for the other m ? 1 slots, (iii) keeps in idle state for two IFS, and (iv) receives the FBP. The energy consumed by a transmitter in a frame where it contends can be expressed as  Eframe tx = ?txTSLOT + (m? 1) ?sleepTSLOT + 2??TIFS + ?rxTFBP . (15)  The transmitters that succeeded to transmit their data in a given frame will not contend in subsequent frames. Then, the successful transmitter executes the following operations in each frame until the end of the process: (i) sleeps for the duration of them slots, (ii) keeps in idle state for two IFS, and (iii) receives the FBP. The energy consumed by a transmitter in a frame where it does not contend can be expressed as  Eframe no tx = m?sleepTSLOT + 2??TIFS + ?rxTFBP . (16)  The average energy consumed by all the transmitter devices using FS-ALOHA can be expressed as  ETXtotal(FSA) = n?1? j=0  n0j [(n? j)Eframe tx + jEframe no tx], (17)  where j is the number of devices that have succeeded in a given point in time, n? j is the number of devices that have not succeeded yet, and n0j is the average number of frames for which the process remains with j devices with success.

Indeed, the process starts with j = 0 and finishes when all the transmitters succeed.

The average energy consumed by all the transmitter devices  using CTA can be expressed as  ETXtotal(CTA) =  n [ dnEframe tx + (Ln ? dn)Eframe no tx  ] , (18)  where dn (8) is the average number of frames for which the transmitter contends, and Ln ? dn is the average number of frames for which the transmitter does not contend, i.e., it already transmitted its data successfully in frame dn.



VI. MODEL VALIDATION AND PERFORMANCE EVALUATION  The delay and energy models formulated in Section V have been validated with MATLAB simulations. The analytical results have been compared to the simulation within a range of frame lengths for different numbers of transmitter devices.

The deviation, with respect to the simulation results, is lower than 0.5% in all the tested cases, thus validating the theoretical analysis.

The parameters used to evaluate the performance of both  contention resolution mechanisms (FS-ALOHA and CTA) are summarized in Table I. They have been selected according to the IEEE 802.11 Standard [11] and from the specification of a low power Wi-Fi device (RN-131 from Roving Networks  Table I SYSTEM PARAMETERS  Parameter Value Parameter Value MAC header 30 bytes Data-rate 54 Mbps Data payload 1024 bytes TSLOT 176.74 ?s FBP payload m?2 bits/slot TFBP FBP?8/data-rate  CRC 4 bytes TPHYpreamble 20 ?s ?tx 210 mA?3V TIFS 16 ?s  ?rx = ?? 40 mA?3V ?sleep 4 ?A?3V     0,00  0,01  0,02  0,03  0,04  0,05  0,06  0,07  0,08  0,09  0,10  2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48 50  Av er ag e de  la y (s )  Frame length (slots)  n = 25 (FSA) n = 50 (FSA)  n = 25 (CTA) n = 50 (CTA)  Figure 3. Average delay to resolve the contention.

0,00  0,10  0,20  0,30  0,40  0,50  0,60  2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48 50  En er gy  Ef fic ie nc y (M  bi t/ J)  Frame length (slots)  n = 25 (FSA) n = 50 (FSA)  n = 25 (CTA) n = 50 (CTA)  Figure 4. Energy-efficiency using FS-ALOHA and CTA.

[12]) typically used in M2M networks. The length of the data payload has been set to 1024 bytes. The length of the FBP payload has been set to 2 bits per slot to provide the ternary feedback (i.e., empty, success, or collision slot).

The transition times to switch among different states of the  RN-131 device are not included in its specification [12]. The work in [8] measured a wake up time of 8 ms to switch the RN-131 from sleep to active state. Since the wake up time is too long, compared to the duration of a slot, we have to consider that these low power Wi-Fi devices cannot switch between sleeping and active states within a frame. Therefore, we have substituted ?sleep by ?rx = ?? in the expressions of the energy consumed by the transmitters.

The average delay (i.e., contention resolution time) and the  energy-efficiency of the two contention resolution mechanisms are represented in Figure 3 and Figure 4, respectively, as a function of the frame length considering n = 25 and 50 trans- mitters. The energy-efficiency is defined as the total number of data bits, sent to the coordinator by all the transmitter devices, divided by the total average energy consumed by the coordinator and the transmitter devices during the contention resolution process.

As it can be observed in Figure 3 and Figure 4, there is an  optimum frame length which minimizes the average delay and maximizes the energy-efficiency in both mechanisms. The optimum frame length can be found when the number m of slots per frame is 3 in the CTA mechanism, regardless of the number of transmitter devices. Contrarily, the optimum frame  length in FS-ALOHA depends on the number of transmitters.

As an example, it is m = 16 or 30 slots per frame when the number n of transmitters is 25 or 50, respectively, as shown in Figure 3 and Figure 4. Therefore, the frame length to use in FS-ALOHA needs to be optimized according to the expected number of transmitters.

As shown in Figure 3 and Figure 4, the minimum value  of the average delay and the maximum value of energy- efficiency are almost identical in FS-ALOHA and CTA for a given number of transmitters. However, when the number n of transmitters is unknown, it is better to use CTA since its optimum frame length does not depend on n.

When the number of slots per frame is below the optimum  frame length, the average delay tends to infinity and the energy-efficiency tends to zero in FS-ALOHA if m < n/4 (approximately). As it could be expected, the shorter the frame length, the more frames required to resolve the contention using FS-ALOHA, and thus the higher the average delay and energy consumption. Contrarily, CTA using only 2 slots per frame (i.e., below the optimum frame length) performs values of delay and energy-efficiency that are close to their minimum and maximum values, respectively.

When the number of slots per frame is above the optimum  frame length, in both FS-ALOHA and CTA, the average de- lay increases linearly, and the energy-efficiency decays almost exponentially, with the number of slots per frame. Indeed, although the number of contention frames decreases when the frame length increases (i.e., the probability of collision becomes lower), a higher number of slots per frame leads to longer frames and longer periods of idle listening, yielding greater delay and energy consumption. In FS-ALOHA above the optimum frame length, the average delay and energy- efficiency vary, from their minimum and maximum values, more slowly (+0.25 ms/slot and -1.5 Kbit/J/slot with n = 50, and +0.25 ms/slot and -5.4 Kbit/J/slot with n = 25) than in CTA (+2 ms/slot and -10 Kbit/J/slot with n = 50, and +1ms/slot and -17 Kbit/J/slot with n = 25). Therefore, in FS- ALOHA it is better to over-dimension the frame length when the number of transmitters is unknown in order to ensure that the condition m > n/4 holds. However, in CTA it is better to use the optimum frame length m = 3 to ensure minimum average delay and maximum energy efficiency regardless of the number of transmitters.

The total average energy consumed by the coordinator  and the transmitter devices during the contention resolution process is represented in Figure 5 as a function of the number n of transmitters considering a given frame length.

It can be observed that the average energy consumed in the two mechanisms increases exponentially with the number of transmitters. As it could be expected, the energy consumption in FS-ALOHA with m = 16 slots is lower than with m = 30 when n < 30, however, the energy is greater with m = 16 when n ? 30. Indeed, when the number of transmitters is below 30, the optimum frame lengths are closer to 16 slots.

On the contrary, when the number of transmitters is above 30, the optimum frame lengths are closer to 30 slots. Additionally,     0,00  0,05  0,10  0,15  0,20  0,25  2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48 50  Av er ag e En  er gy  Co ns um  pt io n (J )  Number of transmitter devices  m = 16 (FSA) m = 30 (FSA)  m = 3 (CTA)  Figure 5. Total average energy consumed by the coordinator and the transmitter devices using 3 slots per frame in CTA, 16 and 30 slots in FS- ALOHA.

it can be observed that CTA (with m = 3) consumes less than FS-ALOHA when n > 25.

Therefore, using low power Wi-Fi devices which cannot  switch among sleeping and active states within a contention frame, the minimum average delay and the maximum energy- efficiency are almost identical in FS-ALOHA and CTA for a given number of transmitter devices. However, when the number of transmitters is not known a priori, it is better to use CTA since its optimum frame length is independent on the number of transmitters. In addition, the energy efficiency in CTA gets slightly greater than in FS-ALOHA when the number of transmitters increase.



VII. CONCLUSION  In this paper, we have considered an M2M network formed by a group of sensing devices that wake up periodically to transmit their data to a coordinator. We have theoretically analyzed the average delay and energy consumption of two contention resolution mechanisms based on frame slotted- ALOHA and the contention tree algorithm (CTA). We have validated the theoretical models using computer simulations and we have compared the performance of both mechanisms using the specifications of low power Wi-Fi devices. Results show that there exists an optimum frame length which mini- mizes the average delay and maximizes the energy efficiency of the M2M network. Using the optimum frame lengths, FS- ALOHA and CTA perform almost identical minimum average delay and maximum energy-efficiency when the number of sensing devices is low. However, CTA performs slightly better when the number of devices increases. The optimum frame length is 3 in CTA regardless of the number of devices. Con- trarily, the frame length in FS-ALOHA needs to be optimized according to the expected number of sensing devices.

The contention tree algorithm considered in this work uses  long data packets in the contention process. Since the slots are large, the channel utilization is reduced due to empty slots and collisions. In future work, shorter request packets will be considered in CTA to contend for data transmission, yielding probably shorter delay and energy consumption.

