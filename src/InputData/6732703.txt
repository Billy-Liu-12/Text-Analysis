Frequent Itemsets Compressing Based on Minimum  Cover: an Efficient Method for Mining Medication

Abstract?Frequent itemsets mining is often used to find medication law from dataset of Chinese herb prescriptions.

Threshold of support count is difficult to set for traditional algorithm of frequent itemsets mining. In the meantime, the number of frequent itemsets is always so big that the result is hard to understand. Some algorithms were proposed to find significant and redundant-aware itemsets. However, the itemsets obtained could not reflect all the information in the dataset. In this paper, a new method was proposed to obtain a collection of itemsets which had the feature of significant, redundant-aware and comprehensive. Firstly, closed frequent itemsets were mined from the dataset of Chinese herbs prescriptions using CHARM algorithm. Then, the itemsets were compressed by FICMC (Frequent Itemsets Compressing based on Minimum Cover) algorithm. Medication law of Chinese herbs could be fully mined from the dataset using this method.

Keywords?frequent itemsets mining; closed frequent itemsets; minimum cover; medication law of Chinese herbs

I.  INTRODUCTION Chinese herbs are the most important method for treating  diseases in traditional Chinese medicine. A prescription of Chinese herbs often includes many herbs. Combination of different Chinese herbs could cause synergies or attenuation in the treatment. Experiences of TCM physicians may be reflected by the combination of Chinese herbs in the prescriptions. Therefore, mining medication law from prescriptions of Chinese herbs became an important direction in TCM research.

Frequent itemset and association rule mining are widely used to find medication law in database of Chinese herb prescriptions. Yao et al.[1] studied 106 Chinese herb prescriptions for treating diabetes using association rule mining.

Zhou et al.[2] combined association with correlation in the mining process to discover both associated and correlated patterns in the experiment of the dataset of Chinese herb prescriptions. Some other methods were used to find medication law of Chinese herbs. Zhang[3] studied the  medication law for treating urticaria using factor analysis. Zhou et al.[4] built the large-scale herb combination network from the complete connected sub-networks with the element herb as node of one formula, and extracted the hierarchical core herb combinations from the constructed herb combination network.

All these methods could be used to find the medication law from the prescriptions. Frequent itemsets mining may find all the medication laws if the threshold was set to be low enough.

But the number of frequent itemsets was so big that the results would be hard to understand. Other methods, such as clustering, factor analysis, complex analysis, etc, could be used to obtain main medication laws. However, some special experiences of TCM experts are not always so popular that could not be found out by traditional methods.

The rest of the paper is arranged as follows. Frequent itemsets and frequent itemsets compressing are introduced in section 2. Frequent Itemsets Compressing Based on Minimum Cover is explained in section 3 and section 4 is an experiment.

Section 5 concludes this paper.



II. FREQUENT ITEMSETS AND FREQUENT ITEMSETS COMPRESSING  A. Frequent Itemsets Mining Let I={i1, i2, i3, ?, im} be a set of items and database D be  the collection of transactions. Every transaction T is a set of items that T  I and has an identifier called TID. A set of items is called an itemsets. An itemset that contains k items is a k- itemset. Support count of an itemset is the number of transactions that contain the itemset. If the support count of an itemset I satisfies a minimum support count threshold, then I is a frequent itemset. For the database of prescriptions of Chinese herbs, Chinese herbs corresponded to items and prescriptions of Chinese herbs corresponded to transactions. An itemset was the combination of a number of Chinese herbs.

Frequent itemsets could be mined using many algorithms such as Apriori and so on. However, the following problems could be found. Firstly, the results were sensitively to the threshold of support count. It was difficult for the user to find the most suitable threshold. Secondly, since a long itemset always companied exponential number of subsets of the itemset, the number of frequent itemsets was always very big.

As a result, it was very hard for the user to take advantage of all the itemsets.

B. Closed and Maximum Frequent Itemsets An itemset X is closed in a dataset D if there exists no  proper super-itemset Y such that Y has the same support count as X in D. An itemset X is a maximal frequent itemset (or max- itemset) in dataset D if X is frequent, and there exists no super- itemset Y such that X  Y and Y is frequent in S.[5] Closed and maximum frequent itemsets are effective tools for frequent itemsets compressing. Zaki and Hsiao[6] developed a compact vertical TID list structure called diffset, which recorded only the difference in the TID list of a candidate pattern from its prefix pattern. A fast hash-based approach was used in CHARM to prune non-closed patterns. MaxMiner[7] was an Apriori-based, level-wise, breadth-first search method to find maximum itemsets by performing superset frequency pruning and subset infrequency pruning for search space reduction.

C. Top-k Patterns Mining Classical algorithms for mining frequent itemsets require  users to input a minimum support count threshold. It is difficult to find the suitable threshold. Fu et al.[8] proposed a different setting in which the user did not provide the threshold, but instead indicated the amount of results that was required. This was named top-k patterns mining. Many algorithms have been proposed for mining top-k frequent patterns, such as Top-K FP-growth[9], ExMiner[10], etc. Since closed frequent itemsets cover all the itemsets which have the same support count, Han et al.[11] proposed TFP algorithm for mining Top-K closed frequent itemsets.

Traditional top-k approach picks patterns based on significance solely. Xin et al.[12] proposed a method for extracting redundancy-aware top-k patterns. This method could be used to mining top-k patterns which demonstrate high- significance and low-redundancy simultaneously. Arianna Gallo et al.[13] suggested a measure of informativeness for itemsets in transactional databases, and an effective algorithm (MINI) to filter a possibly large set of frequent itemsets down to a small and list of informative and non-redundant itemsets, sorted in order of decreasing added informativeness. However, a limit number of itemsets mined by the above methods could not cover all the information in the dataset. In this paper, we suggested a method to obtain a compressed collection of closed itemsets which have the characteristic of significance, low- redundant and comprehensive.



III. FREQUENT ITEMSETS COMPRESSING BASED ON MINIMUM COVER  Table structure of Chinese herbs prescriptions is shown as following:  Table 1 Dataset of Chinese Herbs Prescriptions  Prescription number (t) Chinese herb (i) Row number (r)  55404 Fructus Aurantii 1  55404 Radix Bupleuri 2   As table 1 show, the first and second column represents  prescription number (t) and Chinese herb (i) respectively.

Every Chinese herb in one prescription occupied one row in the table and corresponded to a row number (r). The collection of each Chinese herb in every prescription was denoted as R{r1, r2, r3, r4, ?, rn}. Let xn denoted a frequent itemset and it corresponded to a number of prescription numbers. Every prescription number and every Chinese herb in xn corresponded to a row number rn. So a frequent itemset xn corresponded to a collection of row numbers denoted as Rn. A collection of frequent itemsets could be obtained at a threshold of support count. Since closed frequent itemsets were lossless compression, the cover of row number collections of every closed frequent itemsets should equal to that of every frequent itemsets. Therefore, closed frequent itemsets were used in the following study.

The steps for closed itemsets compressing are as follows.

Firstly, closed frequent itemsets were obtained at a certain threshold of support count using algorithm CHARM. Then, an algorithm was proposed to compress closed frequent itemsets based on minimum cover and was named as Frequent Itemsets Compressing based on Minimum Cover (FICMC). Since the problem of minimum cover is known to be NP hard, the idea of greedy algorithm was used in the algorithm. Finally, a collection of itemsets were obtained and the row numbers corresponding to every itemset constituted a minimum cover of all the row numbers. The algorithm is shown as following.

Algorithm: Frequent Itemsets Compressing based on Minimum Cover (FICMC) Input: Collection of closed frequent itemsets, X{x1, x2, x3, ,  xp} Row number collection corresponding to each itemset  xn: Rn Output: Another collection of closed frequent itemsets, X?{x1,  x2, x3, , xm}.Row number collection corresponding to each itemset in X? composed a minimum cover of all the row number.

1: Get the union set of Rn (n=1:p): R 2: Let X?= , R?= 3: while (R? R) do 4:    for each itemset in X 5:       ti=|Ri R|  \\get the number of common row numbers of  Ri and all the remain row numbers in R? 6:    find the maximum value of ti: tj 7:    X?=X? xj, X=X- xj, R?= R? Rj, R=R- Rj 8: return  In FICMC algorithm, union set of row number collections corresponding to all closed itemsets was obtained firstly. Then    let the resulting itemset collection X? and row number collection R? be empty set. The closed itemset which corresponds to the most row numbers was chose firstly and the corresponding row numbers were added to R? and subtracted from R. Then closed itemset was selected successively according to the quantity of new row numbers compared with R?. Whenever an itemset was chose, the new row number were added to R? and subtracted from R. The terminal criterion was that R became empty set.

The itemset chosen every time was significant for corresponding to the most new row numbers. Since the itemset choosing process was based on the quantity of new row numbers compared with R? and the row numbers corresponding to all the chosen itemsets were included in R?, the resulting itemset collection was redundant-aware. Since the row numbers corresponding to every itemset constituted a minimum cover of all the row numbers, every prescription could be covered by a number of itemsets in the collection.

Therefore, the result could be regarded as comprehensive. In conclusion, the resulting itemset collection had the feature of significant, redundant-aware and comprehensive.



IV. EXPERIMENT The dataset in this study came from National Science and  Technology Major Projects (No. 2009ZX10005-019). The Chinese herb prescriptions which were used to treat viral hepatitis in TCM hospital of Liaoning province were chose.

576 prescriptions were included in the dataset and 212 Chinese herbs were involved. The dataset was saved as the structure in table 1 and had 6099 rows. In order to obtain the cover of all the rows, threshold of support count was set as 0. 7112 closed frequent itemsets were obtained using CHARM algorithm.

FICMC algorithm was used to compress the itemsets and 208 itemsets was obtained finally.

Table 2 Top 10 Itemsets Selected by FICMC Algorithm Itemset Support  count {Rhizoma Cyperi, Fructus Aurantii, Radix Bupleuri, Pericarpium Citri Reticulatae, Rhizoma Chuanxiong, Radix Paeoniae Alba}   {Radix Gentianae, Semen Plantaginis, Radix Rehmanniae, Fructus Gardeniae, Radix Bupleuri, Radix Scutellariae, Rhizoma Alismatis, Radix Angelicae Sinensis}   {Radix Ginseng, Rhizoma Atractylodis Macrocephalae}   {Poria} 266 {Radix Platycodi, Flos Carthami, Radix Achyranthis Bidentatae, Semen Persicae, Radix Paeoniae Alba, Radix Bupleuri, Fructus Aurantii, Radix Rehmanniae, Radix Angelicae Sinensis}   {Fructus Tsaoko, Cortex Magnoliae Officinalis, Radix Aucklandiae, Poria, Rhizoma Atractylodis Macrocephalae, Pericarpium Arecae, Fructus Chaenomelis, Rhizoma Typhonii Gigantei, Rhizoma Zingiberis, Massa Medicata Fermentata, Fructus Crataegi, Pericarpium Citri Reticulatae,   Radix Astragali, Radix Ginseng, Semen Arecae} {Arillus Longan, Cortex et Radix Polygalae, Radix Aucklandiae, Semen Ziziphi Spinosae, Radix Astragali, Radix Ginseng, Poria, Radix Angelicae Sinensis, Rhizoma Atractylodis Macrocephalae}   {Radix Angelicae Sinensis, Radix Bupleuri} 175 {Herba Taxilli, Herba Leonuri , Ramulus Uncariae cum Uncis, Rhizoma Gastrodiae, Concha Haliotidis, Cortex Eucommiae, Caulis Polygoni Multiflori, Radix Achyranthis Bidentatae, Fructus Gardeniae, Radix Scutellariae, Poria}   {Pericarpium Citri Reticulatae, Rhizoma Atractylodis Macrocephalae}   Table 2 shows the first 10 itemsets selected by FICMC algorithm. The first two itemsets include main components of Chaihu Shugan Powder and Longdan Xiegan Decoction respectively. The two formulas are often used to treat viral hepatitis which is diagnosed as Ganqiyujie Syndrome and Gandanshire Syndrome. It could be seen from table 2 that there is little repetition in the result. Every description in the dataset could be expressed as one itemset or the union set of several itemsets in the result. For example, a prescription in the dataset could be expressed as the union set of the following itemsets: {Rhizoma Cyperi, Fructus Aurantii, Radix Bupleuri, Pericarpium Citri Reticulatae, Rhizoma Chuanxiong, Radix Paeoniae Alba}, {Poria}, {Pericarpium Citri Reticulatae, Rhizoma Atractylodis Macrocephalae}, {Radix et Rhizoma Rhei}. It could be seen that this method could be used to study medication law of Chinese herbs.

200 informative itemsets were obtained by MINI algorithm from 7112 closed itemsets. The result was as following table.

Table 3 Top 10 Itemsets Selected by MINI Algorithm Itemset Support  count {Radix Gentianae, Semen Plantaginis , Radix Rehmanniae , Fructus Gardeniae , Radix Bupleuri, Radix Scutellariae, Rhizoma Alismatis , Radix Angelicae Sinensis}   {Fructus Tsaoko , Cortex Magnoliae Officinalis , Radix Aucklandiae, Poria , Rhizoma Atractylodis Macrocephalae, Pericarpium Arecae, Fructus Chaenomelis, Rhizoma Typhonii Gigantei, Rhizoma Zingiberis , Massa Medicata Fermentata, Fructus Crataegi, Pericarpium Citri Reticulatae, Radix Astragali, Radix Ginseng, Semen Arecae}   {Rhizoma Cyperi, Fructus Aurantii, Radix Bupleuri, Pericarpium Citri Reticulatae, Rhizoma Chuanxiong, Radix Paeoniae Alba}   {Herba Taxilli, Herba Leonuri , Ramulus Uncariae cum Uncis, Rhizoma Gastrodiae, Concha Haliotidis, Cortex Eucommiae, Caulis Polygoni Multiflori, Radix Achyranthis Bidentatae, Fructus Gardeniae , Radix Scutellariae, Poria }     {Semen Lablab Album, Poria , Rhizoma Atractylodis Macrocephalae, Lotus Seed, Radix Platycodi, Semen Coicis, Fructus Amomi , Rhizoma Diosscoreae}   {Arillus Longan, Cortex et Radix Polygalae, Radix Aucklandiae, Semen Ziziphi Spinosae, Radix Astragali, Radix Ginseng, Poria , Radix Angelicae Sinensis, Rhizoma Atractylodis Macrocephalae}   {Radix Platycodi, Flos Carthami, Radix Achyranthis Bidentatae, Semen Persicae , Radix Paeoniae Alba, Radix Bupleuri, Fructus Aurantii, Radix Rehmanniae , Radix Angelicae Sinensis}   {Radix Glehniae, Radix Ophiopogonis , Radix Rehmanniae , Fructus Lycii, Fructus Toosendan, Radix Angelicae Sinensis}   {Carapax et Plastrum Testudinis, Radix Rehmanniae , cornu cervi, Semen Cuscutae, Fructus Lycii, Fructus Corni, Rhizoma Diosscoreae, Radix Achyranthis Bidentatae}   {Radix Asparagi, Semen Platycladi, Cortex et Radix Polygalae, Radix Salviae Miltiorrhizae, Fructus Schisandrae, Radix Platycodi, Semen Ziziphi Spinosae, Poria , Radix Ginseng, Radix Angelicae Sinensis, Radix Scrophulariae, Radix Rehmanniae }   In table 3, 6 of 10 itemsets could be found in table 2. This shows that both FICMC and MINI algorithm could be used to find medication law in the data set of prescription. The minimum support count in table 2 is 14 and the support counts of two itemsets in table 3 are less than 14. 7 of 8 herbs of the first itemset are the same in the last itemset in table 3. We could confirm that the result of MINI algorithm maybe not so significant and redundant-aware compared to FICMC. 200 itemsets obtained by MINI algorithm covered 3374 row numbers while that of FICMC covered 6091 of 6099 row numbers. In this regard, the result of MINI algorithm was less comprehensive than FICMC.



V. CONCLUSION This paper presents a method for compressing closed  frequent itemsets based on minimum cover. A limited number of itemsets could be obtained by FICMC algorithm. The results were significant, non-redundant and comprehensive. As a result, this method could be an efficient way to study the medication laws contained in prescriptions. And on this base, further information about the reference of every Chinese herbs combination could be studied. Moreover, all the itemsets in the result could be used as a new feature presentation method instead of herbs since every prescription could be expressed by one or several itemsets. This new presentation method could reflect the combination information of the herbs.

In the future, this method could be improved to obtain faster running speed and better performance. The process that  obtaining closed frequent itemsets needs quite some time if the threshold is very low and the dataset is big. In the meantime, other solutions could be used to resolve minimum cover problem to get better results. On the other hand, this method can be used in other aspects of TCM researches, such as Chinese patent drug, western medicine, acupuncture, etc. The clinical laws of combining different treatment measures would be found out. In additional, this method could also be used to study the combination of symptoms and summarize the diagnosis regulation.

