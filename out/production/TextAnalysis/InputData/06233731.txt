

Abstract?In the Internet shopping environment, changes of customer?s needs grow increasingly outstanding. One of the most important marketing resources is the prior daily transaction records in the consumer?s database. In this study, the paper present a new methodology for predicting consumers? purchase behavior that uses consumers? purchase sequences. First, transaction clustering is conducted, then it is made that detecting the evolving consumer purchase sequences as time passes, and the consumers behaviors, which are derived from a change in the cluster number of each consumer, are kept in the purchase sequence database. Finally, sequential purchase patterns over user-specified minimum support and confidence are extracted by using the association rule. The sequential purchase patterns are then stored in the association rule database. The better result is achieved by applying the new methodogy to a given example for consumers.

Keywords-consumer, purchase sequence, behavior change

I.  INTRODUCTION Most of the Electronic Commerce businesses endeavor to  survive and become leaders in the frontier of the new wave.

The major key factors[1] of success include learning consumers? purchase behavior, developing marketing strategies to create new consuming markets, and discovering latent loyal consumers etc. Therefore, support of domain expertise to make better decisions and new IT techniques to promote EC marketing are essential.

A record-of-transaction database typically contains the transaction date and the products bought in the course of a given transaction. Usually, each record also contains a consumer ID, particularly when the purchase was made using a credit card or a frequent-buyer card. Therefore, the purchasing sequence of a consumer in the database who has made repeat purchases can easily be determined [2-4]. This purchase sequence provides a description of the changes in a consumer?s preferences over time.

So far, several methods have been proposed for predicting consumers? behavior. Statistical methods, such as regression model and ARMA [5], have been the candidates for decision makers. However, these methods are only efficient for data, which are seasonal or cyclical. Association rules extraction can discover potentially significant patterns and rules underlying the database. The patterns and rules are mostly the  habits of purchasing and other consumers' behavior. In the existing algorithms for discovering the association rules, the support is unique throughout the whole database [6], and they assume that each data included in the database occurs in a similar frequency[7]. However, consumers in e-retailing business are not static, and their buying behavior changes over time [8].

Purchase sequences can reveals the changes of consumer?s preferences over time. However, in the present domain of knowledge, there has been little study of mining the consumers? behavior based on purchase sequences. In this study, for predicting consumers? behavior changes, we propose a new methodology that considers the way in which a consumer?s purchase sequence evolves over time. Therefore, association rules extraction is not suitable for predicting the changes of consumer?s purchase behavior for only mining the transaction data during a certain period.



II.  DESCRIBING METHODOLOGY  To predict consumers? purchase behavior changes, an organization?s management first identifies target consumers who share similar preferences for products and looks for those products that target consumers are most likely to purchase.

The purchase transaction records of consumer are used to build consumers? profile describing his or her likes and dislikes. A set of consumers known as neighbors who have exhibited similar behavior in the past, can be found through calculating the correlations among consumers. A neighborhood size of consumers is formed according to the degree of similarity between each of the neighbors and a target consumer. To illustrate the method mentioned above, let us consider the following example. Table 1 presents typical transaction records for an e-retailing company and the consumer profile is provided in Table 2.

This example determines products that target consumer ID011 is likely to buy, using transaction records for consumers CID006 through CID016. Target consumer?s purchase behavior can be predicted according to the correlation of preferences between the target consumer and the other consumers. All of the four consumers, CID016, CID006, CID007 and CID008, commonly bought ?Candy? and ?Can?. The similarities between CID016 and the other three consumers are equivalent. The Pearson correlation     coefficient is 0.67. Therefore, it is sure that CID006, CID007 and CID008 are the nearest neighbors and have the same preferences as the target consumer.

TABLE I. TRANSACTION RECORDS  Consumer ID transaction time products bought  :  May June July May June July May June July :  July May June    :   :  Can Candy Milk Can  Bread Candy Candy Can Milk  : Milk Can  Candy  TABLE II. CONSUMER PROFILE  CID Candy Can Milk Bread Biscuit   :                  According to Table 1, a consumer profile is rearranged with regard to each consumer?s transaction time. The result is  shown in table 3. From table 3, it can be seen that the purchase sequence of the target consumer CID016 occurred in the order of Candy, followed by Can Products. Similarly, the purchase  sequences of CID006, CID007 and  CID008 were Candy?Can?Milk, Candy?Can?Bread, Can?Candy?Milk, respectively. Assume now that the neighbors of the target consumer are determined based on the purchase sequence of each consumer. Consumers who have purchase sequences similar to that of CID016 include CID 006 and CID007. The purchase sequences of CID016 and CID006 are exactly same, as both bought the same products during the same month; therefore, the nearest neighbor of the target consumer CID016 is CID006. The next nearest neighbor is CID007. Therefore, the products which CID016 is likely to buy are ?Dresses,? and ?Shoes.? As mentioned above, when the past purchase sequences of each consumer are available, this knowledge can be used to predict consumers? purchase behavior.

However, if a consumer profile rearranged by time is applied  directly, this application results in a significant problem, namely, the sparsity problem. Rearrangement of an input matrix by time results in an increased time dimension, as compared to that of a typical consumer profile. In this study, a clustering and SOM technique is employed. All the transactions of consumers may be allocated to a certain cluster and a cluster number imposed. The change in the cluster number resulting from each transaction determines a consumer purchase sequence. By observing changes in the cluster number of each consumer over time, a buying sequence can be built for each consumer. These buying sequences are potentially capable of predicting the future purchases of a target e-shoppe.

TABLE III. PROFILE REARRANGED BY TIME

III.  PROPOSED ALGORITHMS  When the purchase sequence and buying history of a target consumer for the past nT ?  periods prior to time T  are given, it is important for marketer how to predict consumer?s purchase behavior at timeT .

For solving the above problem, the following measures are taken. First, transaction clustering is conducted, so that all the transactions of consumers are clustered. The SOM technique is used to cluster target consumers? transactions. Then it is necessary to detect the evolving consumer purchase sequences as time passes. These consumer behaviors, which are derived  from a change in the cluster number of each consumer, are kept in the purchase sequence database. Finally, sequential purchase patterns over user-specified minimum support and confidence are extracted by using the association rule. The sequential purchase patterns are then stored in the association rule database.

Although SOM technique can obtains transaction clusters, SOM clustering technique often breaks down when handling very high-dimensional data. So it is proposed that using product classes represents the hierarchical relationships among products. The method can make an effective dimensionality reduction while improving clustering results.

CID Candy Can Milk Bread Biscuit  May  June  July May   June   July May    June   July May   June   July May  June  July :   : 0     1     0 0     0     1 1     0     0 0     0     0 1     0     0 0     0     0 0     0     1 0     0     0 0     0     0 0     0     0 0     1     0  : 1      0      0 1      0      0 0      1      0 0      0      1 0      0      0 0      1      0 0      0      0 0      0      0 0      0      0 0      0      0 1      0      0  : 0      0      1 0      0      0 0      0      1 0      0      0 1      0      0 0      0      0 0      1      0 1      0      0 0      1      0 0      0      1 0      0      0  : 0      0     0 0      1     0 0      0     0 0      0     1 0      0     0 1      0     0 0      0     0 0      0     0 0      0     0 0      0     0 0      0     0  : 0     0     0 0     0     0 0     0     0 0     1     0 0     0     1 1     0     0 0     1     0 0     0     0 0     0     1 0     0     0 0     0     0     Assume that a product class set P  is classified into n different subclasses, and that each subclass consists of subclasses at a lower level, or eventual leaf products, as follows:  { }PPPPP nn ,, 121 ?=                         (1) Suppose thatC is the set of the transactions of m consumers  during s periods before timeT . More specifically, letC be composed as follows:  { }CCC kTmkTkTC ???= ,,2,1 ,,                  (2) ,11,0 ?= sk  Where C kTj ?, ? C  is a n 2?s on-empty subset of products. EachC kTj ?,  represents the product class or classes from which consumer j purchased products at time kT ? .

EveryC kTj ?,  is transformed into an input matrix composed of a bit vector, and the matrix to be transformed is used in the transaction clustering. The time-ordered vectors for a particular consumer represent the purchasing history of the consumer; this input matrix can be thought of as the dynamic profile of the consumer. A dynamic consumer profile is defined as follows:  Let C _  be a dynamic consumer profile. Then,C _  is defined by the following matrix for n product classes and m consumers over the course of s periods.

( )PPPC CnCCkTj kTjkTjkTj ???=? ,,, ,, 21 _ ,             (3)  mj 2,1=  ,11,0 ?= sk 2?s  Where                      1 if Pi?C kTj ?,    All the transactions of consumers in the training consumer purchase database are transformed into dynamic consumer profiles based on their prior purchase behaviors. Then we use the SOM clustering technique to assign each transaction to a group. This transaction clustering facilitates the discovery of the dynamic cluster sequence of consumer.

The transaction clustering results in the following set of q clusters.

{ }DDDD q21 ,=                             (4)  Where each Di is a subset of C _  the given in (3).

A rearrangement of these clusters by  consumer  and by  time  period is necessary for the identification of the dynamic behavior of each consumer. It is possible to learn the cluster sequence of a consumer by identifying the cluster to which each transaction of the consumer belongs, during each time period. To formalize this concept, we use the following terminology:  Let BP j be the behavior pattern of consumer j . Then, the  behavior pattern BPi is identical to the changes in the cluster number of consumer j during s periods and is defined as follows:  ( )DDDBP TjTjsTjj ,1,1, ,,, ?+?= mj ,2,1=    (5) WhereD kTj ?, ?D ,11,0 ?= sk  2?s  The  process  of searching for  a behavior path can  be simply conducted through transaction clustering. All consumers  have  a behavior path based on their prior transactions. The association rule technique is well suited for determining the most frequent pattern with confidence, since it provides automatic filtering capabilities. To discover the behavior path of a target consumer at time T based on his/her past behavior, the input data should be divided into a conditional part and a consequential part. Association rules are descriptive patterns of the form X?Y, where X and Y are statements regarding the values of attributes of an instance in a database. X is termed the left-hand-side, and is the conditional part of an association rule. Meanwhile, Y is called the right-hand-side, and is the consequent part. The conditional part is composed of the left-hand-side ( )DDD TjTjsTj ,1,1, ,,, ?+? , and D Tj,   is assigned to the consequential part.

R j represents the association rule about the user specified minimum support and confidence in the following form:  R j : ( ) DDD TjTjsTj ,1,1, ,, ??+?               (6) A rule R j  indicates that, if the path of a consumer  is DD TjsTj 1,1, , ?+? , then the behavior cluster for that consumer is D Tj, at timeT .

It is necessary to know the degree to which the behavior path of a target consumer during 1?s periods beforeT  is similar to the association rule. The cluster path of a target consumer, transformed via the SOM, is compared with the association rules derived from other consumers? paths, and then the best-matching path is determined. Execution of this process requires new measures for calculating the degree of correspondence between the association rules and the behavior path of a target consumer. This similarity measure is defined as follows.

? ?  = ?=   ,  s  i i  kTj i j SSD                            (7)  Where        1 if RD kTikTi ?? = ,, =?S  i kTj,  0 otherwise  mj 2,1= ,11,0 ?= sk 2?s  ni 2,1= The above definition indicates that, if the behavior path of a  target consumer i is equal to the conditional part of association  0 if Otherwise =?  ? C kTj,     rule j in the same period, then S j kTi ?,  is equal to one, otherwise is equal to zero. However, even if the similarity measure is high, a choice of the association rule suited to the prediction of the cluster of a target consumer at timeT is difficult, since such a rule is not general, given that the support and confidence of the association rule may be remarkably low. Therefore, to assure a good fit between the behavior path of a target consumer and the conditional part of the association rule, it is necessary to measure fitness. Fitness is defined as follows:  Suppose FDij be a degree of the goodness-of-fit between the behavior path i and the association rule j . Then, FDij is defined as follows  ConfidenceSupportSDFD jjjiij ??= ,             (8)  Using the above definition, we can determine the cluster of a target consumer at timeT is a consequential part R Tj, of the association rule j with maximum FDij .



IV.  ILLUSTRATIVE EXAMPLE In this paper, we use Table 3 as example given to illustrate  proposed method. The set of product classes given in Table 3 is P={Candy, Can, Milk, Bread, Biscuit}. The transactions of the consumer CID006 are as follows:  =C June,006 {Candy}, =C May,006 {Can}, =C July,006 {Milk}.

Therefore, the dynamic purchase profile of CID006 buying the set of products {Candy, Can, Milk, Bread, Biscuit} from May to July may be represented  as { }0,0,0,0,1,006 _  =C June , { }0,0,0,1,0,006 _  =C May and  { }0,0,1,0,0,006 _  =C July . CID016 and CID006 are exactly same, as both bought the same products during the same month.

Therefore, similarly, the transactions of target consumer CID016 are =C June,016 {Candy} and =C May,016 {Can}.

The dynamic purchase profile of CID016 buying the products may be represented as  { }0,0,0,0,1,016 _  =C June , { }0,0,0,1,0,016 _  =C May .

TABLE IV. BEHAVIOR PATH OF CONSUMER  CID 1+? sT  1?T  T  :  : -    : -  :   Suppose 3=s , according to formula (5), the behavior path  of CID006, BP006  is { }9,3,10 , as shown in table 4,  which indicates  that  consumer  CID006 belonged to the tenth cluster in May and moved into the third cluster in June, thereafter reaching the ninth cluster in July.

According to formula (6), the association rules are derived from consumers? path with regard to a minimum support of 0.1 and a minimum confidence of 0.5. The association rules are as shown in table 5. The similarities  between the path of consumer CID016  and the derived rules are 22016 =SD and  11016 =SD . Therefore, consumer CID016 belongs to the ninth cluster at timeT , since the fitness between CID016 and the rules are =FD2016 0.2 and =FD1016 0.2001. Therefore, we predict that the products which consumer CID016 is likely to buy are ?Bread,? and ?Biscuit.?   TABLE V. THE DERIVED ASSOCIATE RULES  Rule 1+? sT  1?T  T  Support Confidence :    -     -     0.3 0.1 0.1 0.2 0.1 0.1  1.0 1.0 1.0 0.5 1.0 1.0

V. CONCLUSION In this study, we describe a new approach for mining the  changes of  consumer  purchase behavior over time and discuss solutions to several problems. For predicting consumers? purchase behavior, the following concepts are proposed: BP j , SDij and FDij . The SOM technique is used to detect the evolving consumer purchase sequences as time passes. The purchase sequences are derived from the changes in the cluster number of consumer.

The research presented in this paper makes a contribution to mining  consumers? purchase behavior basing on transaction data. E-retailer may be able to perform  effective one-to-one marketing campaigns by providing individual target consumers with personalized Product basing on using purchase sequences.

