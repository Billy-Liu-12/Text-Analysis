Redesign of CloudSat's Maneuvers For Robust Delta-V

Abstract-Since joining the A-Train in May 2006, CloudSat actively maintained its orbit and flew in tight  formation with CALIPSO. This required CloudSat to  perform orbit maintenance burns approximately every  two to three weeks and to also perform larger  inclination burns approximately once a year in  conjunction with the other vehicles in the A-Train. On  April 17th of 2011 CloudSat experienced a severe battery anomaly which caused the vehicle to fault into a  passive but power positive spin, and it could no longer  maintain itself within its control box. Over the next  several months, the team diagnosed the issue with the  spacecraft battery, and developed a new method of  operations which involved hibernating during eclipse,  but allowed the vehicle to collect science data for 55 minutes during the sunlit portion of the orbit. By  November 2011 the vehicle was returned to operational status, and the team then began working on a  methodology to return the vehicle to its slot within the  A-Train. After a lengthy series of burns, the vehicle  rejoined the A-Train in May 2012. I  Prior to the anomaly, CloudSat had sufficient battery  capacity to operate normally in eclipse and, for the most  part, burns were performed in eclipse to simplify burn  planning by eliminating instrument and star tracker  sun constraints. The lack of sun constraints also made  it relatively easy to avoid Moon and Earth interference.

After the anomaly occurred, the battery could not  support the loads required to conduct burns which  meant all the burns now had to be performed while the  vehicle is in the sun. In addition, the battery was so  weak that it could not be relied on to provide any power  at all during burns which imposed many more  constraints on the maneuvers to the burn attitude and  on the orientation of the spacecraft during the burn.

The new limitation included keeping the solar arrays  pointed at the sun at all times and, in order for the new  safe modes to work properly, it was necessary to keep  the momentum axis pointed within 90 degrees of the sun. Due to orbital conditions, the CloudSat team was  under a tight time constraint to develop a maneuver  and burn strategy that dealt with these new constraints.

The initial method selected resulted in the trackers  being removed from the attitude solution during the  maneuver to the burn attitude because they were  blinded by the Earth. The potential unavailability of  trackers was a cause for concern because the only  available backup method for attitude determination  relied on coarse sun sensors and magnetometers, which  are significantly less accurate and if any issue occurred   Brian Pieper Ball Aerospace  1600 Commerce St.

Boulder, CO 80306-1062  310-939-5474 bpieper@ball.com  with their attitude determination the burn could be  prematurely aborted. Early in 2013 the team developed a more robust method to keep the trackers online  during any maneuver to the burn attitude. This paper  will give a brief history of CloudSat's recovery from its  initial anomaly and will describe and show flight results  illustrating CloudSat's new robust maneuver technique.

T ABLE OF CONTENTS  1. CLOUDSAT'S MISSION PRIOR TO THE  BATTERY ANOMALY .?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.? 1  2. CLOUDS AT BATTERY ANOMALY AND  IMPLICATIONS UNDERSTOOD ??????????????????????????????? 3  3. CLOUDS AT REJOINS THE A-TRAIN ????????????????? .4  4. CLOUDSAT'S ROBUST MANEUVERS ??????????????????? 5  5. SUMMARY .......................................................... 7  6. ACKNOWLEDGEMENTS ?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.? 8  REFEREN CES ????????????????????????????????????????????????????????? 8  BIOGRAPHY .?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.?.? 9  1. CLOUDSAT'S MISSION PRIOR TO THE  BATTERY ANOMALY  CloudSat was launched on April 2Sth, 2006 and  joined the A-Train approximately one month later  where it began formation flying with CALIPSO.

CloudSat flew between Aqua and CALIPSO in the A-Train (Figure 1) and other than planned calibration  maneuvers and orbit adjust maneuvers, the observatory continuously collected science data  related to the moisture content in the atmosphere.

Approximately once every two or three weeks CloudSat would perform a small orbit adjust maneuver which was used to insure good ground track overlap between CloudSat and CALIPSO. The  initial bus requirements on CloudSat were intended to insure that CloudSat have a 50% probability of  having its instrument footprint overlap CALIPSO's  to within +/- 1 km. The small maneuvers were generally split between orbit raise and orbit lower  maneuvers. Orbit lower maneuvers were required  because CALIPSO has a higher area to mass ratio than CloudSat, which causes its orbit to decay faster  than CloudSat's. Once a year and occasionally every six months CloudSat conducted a campaign of larger    inclination adjust maneuvers in conjunction with the  rest of the constellation.

Figure 1 - A-Train Constellation  Figure 1 shows the A-Train constellation when  CloudSat was launched. CloudSat originally flew  approximately 12.5 seconds ahead of CALIPSO and,  sixty seconds behind Aqua and performed propulsive  maneuvers to maintain a 1 km ground track overlap between CloudSat's and CALIPSO's payloads.

Relatively simple maneuvers were used during the spacecraft's mission prior to the anomaly, and with a  healthy battery, mission planners only had to insure  the trackers met the Sun, Earth, and Moon outage constraints, rate constraints, and keep the instrument  boresight away from the Sun - the battery had sufficient margin to perform maneuvers which moved the arrays completely off the Sun. Prior to  launch, specific beginning and ending quaternions  were chosen for all possible maneuver cases which  kept the trackers away from the Earth, Sun and  generally the Moon, and specific maneuver times were selected which guaranteed the star tracker rates  stayed below 0.75 deg/sec. Figure 2 show some of  the representative curves that the mission team would  examine to insure that the vehicle's maneuver kept both star trackers online.

The following figures illustrate the orientation constraints for the CloudSat star trackers. Figure 2 shows the representative angles from tracker 1  relative to the Earth, the moon and the Sun along  with the expected exclusion angles. Figure 3 represents those same exclusion angles for Star  Tracker 2.

Figure 2 - Star Tracker 1 Orientation Constraints  Figure 3 - Star Tracker 2 Orientation Constraints  Figure 4 shows the cross axis and about boresight  rates for each tracker. As long as the rates are below 0.75 degs/sec, and both trackers are online the star  trackers should be able to track stars without issue.

Figure 4 - Star Tracker Cross Axis & Boresight Rates  0 100 200 300 400 500 600 700           Time (secs)  A n g le  s (  d e g re  e s )  Tracker 1 Orientation Constraints     Tracker 1 to Nadir  Tracker 1 to Sun  Tracker 1 to Moon  Tracker 1 Earth Limit  Tracker 1 Sun Limit  Tracker 1 Moon Limit  0 100 200 300 400 500 600 700     Time (secs)  A n g le  s (  d e g re  e s )  Tracker 2 Orientation Constraints      Tracker 2 to Nadir  Tracker 2 to Sun  Tracker 2 to Moon  Tracker 2 Earth Limit  Tracker 2 Sun Limit  Tracker 2 Moon Limit  0 100 200 300 400 500 600 700 -1  -0.5   0.5   Time (secs)  R a te  s (  d e g s /s  e c )  Tracker 1 and 2      Tracker 1 About Boresight  Tracker 1 Cross Axis  Tracker Rate Limit  0 100 200 300 400 500 600 700 -1  -0.5   0.5   Time (secs)  R a te  s (  d e g s /s  e c )      Tracker 2 About Boresight  Tracker 2 Cross Axis  Tracker Rate Limit    Figure 5 - Instrument Maneuver Constraints  Figure 5 show the sample data that were examined for CloudSat maneuvers prior to the battery anomaly.

Care was taken to insure that the trackers met  viewing angle and rate requirements, and the  instrument angles relative to the sun were acceptable  from a health and safety point of view.

? 28 lot ? o > l  Voltage drops dramatically when discharge current exceeds 5.25 amps Voltage recovers when current is reduced to below 5.25 amps  l   2. CLOUDSAT BATTERY ANOMALY AND  IMPLICATIONS UNDERSTOOD  Continued examination of the power data and discussions with outside experts diagnosed the battery anomaly as diffusion limited current [1], and it was determined that in order to avoid under-voltage  faults required keeping the cumulative current draw  from the battery during eclipse below 5 A.[2,3]  A review of on-orbit data clearly illustrated diffusion?  limiting current in CloudSat's battery, as can be seen  in Figure 6. Diffusion limiting current is a known and understood phenomenon in Nickel-Hydrogen  batteries in which the electrolyte in the battery is absorbed, and as a result the battery has an upper  threshold on the amount of current it is able to  conduct, and if that limit is exceeded, the voltage on the battery rapidly collapses. If the current draw  drops below the threshold, the voltage on the battery  can recover.

Clearly, post battery anomaly maneuvers had to be designed such the current draw on the batteries could never draw more than 5 A. In addition, the new  maneuver design also had to meet all the previous  constraints on star tracker viewing angles and rates as  well as instrument pointing requirements.

c ? ...

:; v  8000 8 0 900 Time (secs)9  00 1 000    Figure 6 - CloudSat Battery Diffusion Limit    0 100 200 300 400 500 600 700         Time (secs)  A n g le  s (  d e g re  e s )  Instrument Maneuver Constraints      Boresight to Sun Angle  Boresight to Sun Limit    Once the anomaly was understood, several conclusions were reached regarding what was required to keep the mission  operational:  1) The vehicle cannot maintain science or normal bus  operations during eclipse.

2) The control system must remain in a very low  power, passive state during eclipse.

3) The standard Safe mode and point mode can no longer be used.

4) The vehicle must reliably exit eclipse with the arrays on the sun  5) The vehicle's components must be maintained at  temperatures above the components survival  threshold limits but all heaters, including battery, star tracker, and instrument thermal maintenance as well as survival heaters, must remain off in eclipse.

6) The sequence of commands to transition between  hibernate and operational mode (? 100 commands) had to be executed every orbit and all the  commanding for these operations had to be stored onboard the vehicle. Ground station limitations  made transmitting all the necessary commands to the vehicle onerous even in an optimum case,  CloudSat uses the AFSCN ground sites and even in  a best case, these ground stations aren't visible to the satellite before nearly halfway through the  daylight portion of the orbit.

7) Spacecraft and instrument power loads need to be balanced against the available solar array power  and turning on components can only occur once  certain pointing accuracies are met 8) If possible, reconfigure the vehicle without  changing software onboard, which would have required an expensive and lengthy test, verification  and upload process.

Performing maneuvers to achieve burns required a specific orientation of the vehicle and the solar arrays needed to be kept on the sun throughout the maneuver and burn, which  left only a narrow slot for the trackers to point which would  keep them away from the Sun and the Earth.

Within these constraints, the CloudSat team was able to develop a new operation sequence which maximized the  science collection data for the vehicle and produced a robust method for capturing every eclipse exit. Figure 7 shows a  representative picture which details this sequence.

The illustration in Figure 7 shows the vehicle's orientation  over an orbit during the new daylight only operations (DO?  Op) mode. The vehicle collects science data for approximately 55 minutes, hibernates and tumbles during  eclipse, and has brief recovery and setup periods just after  eclipse exit and just before eclipse entry.

Beyond the constraints required to support the vehicle's  science mode, CloudSat needed to rework the commanding   Figure 7 - Daylight Operations (DO-Op) Mode  sequences to support small, precise open loop burns. Prior  to the anomaly, CloudSat performed steady state burns of  precise lengths which significantly changed the momentum state of the vehicle. In CloudSat's new configuration,  significantly changing the vehicle's momentum could impact the vehicle's recovery during eclipse exit, so a new  method of zeroing out the momentum change during burns was developed.

-0.8 -0.6 -0.4 -0.2 0 0.2 0.4 0.6 0.8  Figure 8 - Star Tracker & Solar Array Alignment  Figure 8 shows the tracker and solar array normal alignments at the sub-solar point. In order for the trackers  to function properly the boresights must be kept away from  the Sun, the Earth and the Moon. For the system to remain power positive, the solar array normals must be kept within    a set angle from the sun. Very short discharges from the  battery are allowed, but lengthy maneuvers off the Sun can't  be tolerated by the system. Also, the vehicle must keep its + X axis within 90 degrees of the sun for the safe mode to  work, so the vehicle is left with a narrow keyhole where the  star trackers need to be kept in order to support the mission  requirements and stay operational. All of CloudSat's  planned maneuvers are orbit raises, lowers, inclination  changes or mean local time adjusts, so the vehicle can meet all of its required burns when the trackers are kept at the  same angle relative to nadir.

3. CLOUDSAT REJOINS THE A-TRAIN  The CloudSat team was able to select a new set of attitude  quaternions which insured that the vehicle could meet the  new mission constraints while in the burn attitudes.

Maneuvering from the nominal science attitude to an attitude which would support orbit adjustments, however, generally caused one star tracker to view the Earth. One  early maneuver swept a star tracker across the limb of the  Earth, which indirectly corrupted the spacecraft's attitude solution and caused the vehicle to not execute the burn. A  subsequent flight rule changed the maneuver sequence so that if a tracker crossed the Earth it would be disabled and left out of the solution during the maneuver then re-enabled  after the tracker had cleared the Earth. Disabling the tracker  created a rate problem however that caused the other tracker  to drop out of the solution and nearly all the maneuvers to  the final burn attitude were conducted using just sun sensors and magnetometers. CloudSat was able to rejoin the A?  Train without issue [4], but the team was still concerned the  trackers would not recover prior to a burn and the larger  attitude errors resulting from the coarse sun sensors and magnetometers potentially injecting a larger than desired  error into the vehicle's orbit. The pre-anomaly burn accuracy requirements were 6% accuracy 3-sigma and  allowed a pointing errors of up to 6 degrees 3-sigma, and  achieving these required that at least one star tracker was  used in the attitude solution.

Several orbit maintenance maneuvers were also performed after CloudSat rejoined the A-Train, and although the  vehicle was able to maintain its slot in the formation, the  spacecraft had little or no margin in achieving one or two star tracker attitude solutions prior to the burn. Figures 9-11  show some data which illustrates the vehicle's performance during one of the bums where the trackers didn't lock back  up prior to the burn.

Figure 9 shows the vehicle's rate profile during the maneuver to the burn attitude. In this case the tracker which  crossed the Earth's limb was disabled and the vehicle was unable to keep the other tracker online during the [mal maneuver to the bum attitude, and the maneuver was   Figure 9 - Vehicle Rate Profiles  completed on TRIAD. In addition, the trackers were unable to reacquire and identify stars prior to the start of the burn, and the burn was also completed on TRIAD. Although the  performance was adequate for a small orbit maintenance burn, a larger inclination change burn could have resulted in significant along track errors which could quickly drive  CloudSat out of its control box.

Figure 10 - Star Tracker Rate Profile  Figure 10 shows the rates achieved by both trackers during  the maneuver to the bum attitude. The 2nd star tracker lost  lock during the maneuver and even though the spacecraft was allowed an additional minute to reacquire and identify  stars the trackers were unable to before the burn was  performed.

500 1000 1500 2000 2500 3000 3500 4000 -1  -0.5   0.5   S T  r  a te  ( d p s )  Star Tracker Rates During Maneuver      CA  AB  500 1000 1500 2000 2500 3000 3500 4000 -1  -0.5   0.5   S T  r  a te  ( d p s )  Time (secs)  500 1000 1500 2000 2500 3000 3500 4000 -1.2  -1  -0.8  -0.6  -0.4  -0.2   0.2  0.4  0.6  0.8  Time (secs)  C o n tr  o l F  ra m  e R  a te  s (  d e g s /s  e c )  Transition to and From the Delta-V Attitude      Vehicle captured into initial attitude  Vehicle maneuvers to burn attitude  Vehicle performs burn on TRIAD  X  Y  Z    Figure 11 - Solar Array Illumination  Figure 11 shows the solar array fraction during the  maneuvers, the burn and for the rest of the orbit. The  vehicle had sufficient power margin to perform the burn and  to return to Point Standby following the completion of the bum.

Nadir  4. CLOUDSAT'S ROBUST MANEUVERS  After rejoining the A-Train the team started working on a methodology to improve the odds of the trackers staying online during the maneuver and burn. Insuring that both  trackers stayed online during to all possible burn attitudes required the team to develop a maneuver sequence which  kept the trackers away from any other bodies at all times. In  order to meet this requirement, the team developed a new set of intermediate attitude quatemions and rates which allowed the vehicle to capture into Point Mode when exiting  eclipse, and then maneuver to one of these new intermediate  attitudes which satisfied the tracker constraints and the other  bus constraints. Two intermediate targets are used to  capture the vehicle at eclipse exit and start a slow roll about the nadir vector. The rate of roll was chosen such that, in general, the spacecraft never had to make more than a 90 degree maneuver to achieve any necessary burn attitude.

The initial capture points the spacecraft +z towards -Y in the orbit frame (Figure 12) which keeps the arrays close  enough to the sun to stay power positive. The 2nd setup in the maneuver sequence puts the trackers just above the  Earth's limb with again a slow yaw about the nadir vector.

Nadir  Figure 12 - CloudSat Capture Attitude  Figure 12 shows the capture attitudes for the vehicle during normal science operations and also during the capture prior to  completing any burns. The burn capture attitude is shown on the right.

Table 2, illustrated below, contains a surrunary of the high level statistics on each of the burns and maneuvers that have been  performed since CloudSat switched to using the robust maneuver technique.

Date Maneuver Attitude Attitude +z time in Worst case Mean solar  Type determination determination sun (sec) solar array array  during burn during maneuvers fraction fraction to burn attitude  119/2013 Orbit lower Both ST Both ST 121 sec 0 0.65 0.90  demo after eclipse exit  1116/2013 Orbit ralse Both ST Both ST 148 sec 0 0.42 0.77  demo after eclipse exit   0 500 1000 1500 2000 2500 3000 3500 4000 4500   0.2  0.4  0.6  0.8   Time (secs)  S u n F  ra c ti o n  CloudSat Solar Array Illumination Fraction      SA Fraction Mean = 0.84 Minimum = 0.45  SA 1  SA 2  Ideal from Body    1125/2013 Open loop Both ST Both ST 579 sec 0 0.43 0.76 orbit raise after eclipse exit  2/112013 Orbit lower Both ST Both ST 208 sec 108 0.72 0.92  demo (Exit after eclipse exit  burn #1)  2/8/2013 Orbit lower Both ST Both ST 163 sec 554 0.66 0.84 demo (Exit after eclipse exit  burn #2)  3/2112013 Inclination Both ST Both ST 163 sec 0 0.62 0.82  decrease after eclipse exit  demo (One ST 1092-  1299 sec)  3/28/2013 Orbit raise Both ST Both ST 513 sec 0 0.43 0.76  after eclipse exit  4/512013 Inclination Both ST Both ST 173 sec 0 0.56 0.82 decrease (test after eclipse exit  CF update)  4112/2013 Inclination Both ST Both ST 156 sec 0 0.48 0.78  decrease after eclipse exit  4/25/2013 Orbit lower Both ST Both ST 53 8 sec 0 0.72 0.91 after eclipse exit  5/912013 Orbit raise Both ST Both ST 150 sec 0 0.45 0.76 after eclipse exit  5/23/2013 Inclination Both ST Both ST 603 sec 0 0.42 0.80 decrease after eclipse exit  6/512013 Orbit lower Both ST Both ST 95 sec 336 0.64 0.81 after eclipse exit  6112/2013 Orbit raise Both ST Both ST 159 sec 0 0.48 0.75 after eclipse exit  7/23/2013 Orbit lower Both ST Both ST 401 sec 304 0.62 0.82 after eclipse exit  8/112013 Orbit raise Both ST Both ST 166 sec 0 0.48 0.75  after eclipse exit  9/27/2013 Orbit raise Both ST Both ST 191 sec 0 0.37 0.77 after eclipse exit  Table 2 - High level Statistics For Robust Maneuvers  During normal science operations the spacecraft captures with the boresight of the instrument pointed near nadir, but when capturing in the new attitude, the spacecraft captures with the boresight of the instrument pointing orthogonal to  nadir and to the -Y side of the orbital track. The vehicle captures to this attitude as quickly as it can, and then  immediately begins to yaw towards an attitude which places the propulsion deck towards the sun and the instrument boresight away from the sun and the star trackers above the  Earth's limb. The vehicle then yaws about the nadir vector which keeps sufficient solar input on the solar arrays and  makes sure the vehicle is in a good starting attitude to  perform any nominally expected maneuvers to the bum attitude. After achieving this attitude, the vehicle mimics yaw steering and performs a slow (orbit rate) yaw about the nadir axis which keeps the solar arrays oriented on the sun,  the instrument boresight away from the sun and the star  trackers away from the Earth. Table 2 contains a summary  of all the vehicle maneuvers which have been performed  since the robust maneuvers have been implemented.

Figures 13, 14 and 15 show the vehicle's performance during one representative set of the maneuvers.

This initial setup and capture sequence allows the spacecraft to retain flexibility in order to perform orbit raise, orbit  lower and inclination change bums.

Figure 13 shows rate data for the vehicle during a capture to a burn attitude which performs an orbit raise maneuver  using the robust maneuver technique. This maneuver was  performed on 9/27/2013.

Figure 14 shows tracker performance during the burn performed on 9/27/2013. Note how both trackers stay  online after the initial capture.

Figure 13 - Robust Maneuver Rate Data  Figure 14 - Robust Maneuver Star Tracker Performance  Figure 15 shows the solar array fraction during the  maneuver to the bum and during the bum. This maneuver  was performed on 9/27/2013.

All three figures illustrated here show that the new robust maneuver design successfully meets all of the critical criteria for maneuvers for the new mode of CloudSat  operations. Attitude rates remain at an acceptable level to allow star trackers to maintain lock. Maneuver turns successfully keep the star trackers field of view away from  the Earth and finally, the solar array illumination during  maneuvers is sufficient to minimize discharge on the spacecraft batteries. This new maneuver design has been in  use for the past year and has proven to be reliable for all  maneuvers required for CloudSat orbital operations.

Figure 15 - Robust Maneuver Solar Array Illumination  5. SUMMARY  The spacecraft team has developed a more sophisticated set  of maneuvers to perform bums which allows all the new operational constraints to be met and also helps keep the star  trackers online from capture and through the bum completion. This series of maneuver allows the team a great  deal of flexibility in when the burns can occur, and the developed sequence of commands can be quickly and easily  reconfigured to perform different types of burns (orbit raise,  orbit lower, inclination increase and inclination decrease)  and also perform the bums at different times relative to eclipse exit.

6. ACKNOWLEDGEMENTS  I would like to thank the JPL team for supporting this development effort, and in particular Deb Vane, Tom  Livermore, Mona Witkowski, Ted Sweetser and Ron Boain.

