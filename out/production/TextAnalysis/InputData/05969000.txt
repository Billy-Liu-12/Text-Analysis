Comparisons with Spatial Autocorrelation and Spatial Association Rule Mining

Abstract? Spatial autocorrelation is a very general statistical property of economic variables, it indicates correlation of a variable with itself through space. Spatial association rule mining, discovery of interesting, meaningful rules in spatial databases, ignores autocorrelation of the spatial data, or just generalizes the spatial data into attribute data currently. In order to compare the results between spatial autocorrelation and spatial association rule mining, in this paper, the spatial association rules were mined by Apriori algorithm and it?s development algorithm. Then, spatial autocorrelation analysis and spatial regression analysis were implemented on the same spatial data set. The experimental data is about the county-level revenue and population, education state, health state and social security state in China from 2000 to 2005. The results of the spatial association rules mining proves that economic level such as per capita revenue and social security  have stronger correlation. The result of spatial autocorrelation is that from 2000 to 2005, national county-level per capita revenue, education, health and social security present positive spatial correlation. There is little interannual change in the spatial distribution of per capita revenue, and low economic level applies to almost all counties all over the nation. Education, the situation that low value areas are surrounded by high value areas universally exists, which shows that little significant positive influence from high level areas is exerted on low level areas. At the same time, the interprovincial education gap is gradually increasing. Health, in the year 2000 to 2005, there is a growing aggregation trend in China?s county- level health spatial pattern, and there are more low value areas in health. Social security, in the research years, the aggregation trend is gradually decreasing. While spatial heterogeneity is increasing.

Keywords? spatial autocorrelation; spatial association rule mining; spatial data mining; Apriori; spatial regression

I. INTRODUCTION The first law of geography according to Waldo Tobler is  "Everything is related to everything else, but near things are more related than distant things."[1] As the fundamental concept in geography, it indicates that nearby entities often share more similarities than entities far apart. In spatial statistics, this property is stretched into spatial autocorrelation, which is quantified by measures such as Ripley's K-function[2] and Moran's I[3,4]. Positive spatial autocorrelation indicates the clustering of similar values across geographic space, while significant negative spatial autocorrelation indicates that neighbouring values are more dissimilar than expected by chance, suggesting a spatial pattern similar to a chess board.

The spatial relationship among locations in a spatial framework is often modelled via a contiguity matrix. A simple  contiguity matrix may represent a neighbourhood relationship defined using adjacency, Euclidean distance, etc[5]. Spatial autocorrelation is popular in examining and measuring the correlation between economic factors and other factors, like ecological economics[6] and house prices[7].

Data mining in general is searching for hidden and interesting patterns that may exist in generic data. Spatial data mining in particular is discovering the interesting relationships and characteristics that may exist implicitly in spatial data [8].

Extracting interesting and useful patterns from spatial data sets is more difficult than extracting corresponding patterns from traditional numeric and categorical data due to the complexity of spatial data types, spatial relationships, and spatial autocorrelation[9].

One major approach in spatial association rule mining is firstly generalizing detailed spatial and non-spatial data to a certain high level, and then studying the general characteristics and data distributions at this level. An attribute- oriented induction method has been proposed[10,11]. Another way is to materialize the relationships into traditional data in- put columns and then apply classical data mining techniques [12,13,14,15]. However, currently most methods just generalize the spatial data into attribute data, ignore spatial autocorrelation of the spatial data, which leads poor presence of spatial data of knowledge discovery techniques.

Developing models or techniques to incorporate spatial information into the spatial data mining process[16] is a new way of mining spatial association. It focus on a specific Boolean spatial feature, specifically, the pattern of locations or distributions of the spatial features, also not fully considers and makes use of the spatial autocorrelation.

Ignoring the spatial autocorrelation of the spatial data may introduce deviation to the mining results, and may lead in loss of information and unreliable results. Besides, research on the relation between spatial autocorrelation and spatial association rule mining may make full use of the inherent property of the spatial data and even provide priori knowledge to the mining procedure.

In this paper, Apriori algorithm and its developed algorithm are applied to mining the dataset including county-level revenue, population, education state, health state and social security state in China from 2000 to 2005 with extracting the association rules. After that, spatial analysis methods, specifically, spatial autocorrelation and spatial regression, are employed to the same dataset and the results of spatial analysis are obtained. The differences between the results of  ___________________________________     Apriori algorithm and spatial autocorrelation suggest that the existence of the spatial autocorrelation affects the mining results. Finally, conclusions are made by comparing of the results of Apriori algorithm and spatial analysis. Meanwhile, the computing time and results analysis are discussed.



II. RELATED DEFINITIONS A spatial association rule is a rule which describes the  implication of one or a set of features by another set of features in spatial databases. For example, a rule is as follow: a house that close to a beach is probably expensive.

A spatial association rule is a rule in the form:  1 1... ... ( %, %)m nP P Q Q s c?? ? ? ? Where at least one of the predicates 1 1... , ...m nP P Q Q is a  spatial predicate, %s is the support of the rule, and %c is the confidence of the rule.

In a dataset S, the support of a conjunction of predicates, 1... mP P P? , denoted as ( / )P S? , is the number of objects in S which satisfy P versus the total number of objects of S. The confidence of a rule P Q? , denoted as  ( / )P Q S? ? , is the possibility that Q is satisfied by a member of S when P is satisfied by the same member of S.

Following the above definition, a large number of spatial association rules can be derived from a large spatial database.

However, most people will be only interested in the patterns which occur relatively frequently(with large supports)and the rules which have strong implications(with high confidence).

The rules with large supports and high confidence are strong rules[14].



III. THOUGHTS OF EXPERIMENT Mostly researchers are using a popular data mining  approach-Apriori in association rule mining. Given a set of itemsets (for instance, sets of retail transactions, each listing individual items purchased), the Apriori algorithm attempts to mine the possibility of simultaneous occurrence of items, and then build relationships among them in databases. The algorithm can be divided into two parts: find all frequent itemsets, and generate reliable association rules straightforward from all frequent itemsets.

As mentioned above, conventional association rule mining, like Apriori algorithm, ignores autocorrelation of the spatial data, or just generalizes the spatial data into attribute data, in other words, it works based on hypothesis that all data are independent, and concerns mainly on the attribute data, neglects the spatial information of the data. But in spatial association rule mining, spatial autocorrelation of univariate can not be ignored, as a strong spatial autocorrelation indicates a strong spatial aggregation, which means that the variable?s high frequency in the spatial database.

Besides, study on the spatial correlation between two variables may help to find out which variable has stronger relationship with the variable we interested in. In spatial association rule mining, variables with stronger relationship  forms a rule which will be considered as a single spatial association rule.

Furthermore, as spatial regression can capture spatial dependency in regression analysis, avoiding statistical problems such as unstable parameters and unreliable significance tests, as well as providing information on spatial relationships among the variables involved, it is used to studying the spatial association between three or more variables to find spatial association rules in this paper.

Relation between per capita revenue and other variables can be obtained by the Apriori algorithm, which mainly focus on the non-spatial part of the data. Followed by the spatial analysis methods on the same data set, which not only takes the non-spatial part into consideration, but also thinks over the spatial part of the data, using the spatial tool measuring the adjacency known as spatial weight matrix.

By comparing with the results of Apriori algorithm, the paper seeks to explore the relationship between spatial autocorrelation and spatial association rule mining, on one hand, to find how the spatial autocorrelation brings deviation to the mining result according to the difference of the results, on the other hand, to find how to guide the mining procedure using spatial autocorrelation according to the similarity of the results.

The experiment consists of two parts: Implement the spatial association rules in the data set with  Apriori algorithm, which also consists of two parts: using the classic Apriori algorithm and using the improved Apriori algorithm for mining[17]; Explore the same dataset using spatial autocorrelation method and spatial regression method, then make conclusions by comparing with the results of Apriori algorithm.



IV. EXPERIMENTS AND RESULTS  A. Experimental data The experimental data consists of statistical data of county-  level revenue, population, education health and social security state in China from 2000 to 2005. The data is showed in Fig. 1. Its format is point layer of SHP file which has almost 2000 records. The statistics software in our experiments is GeoDa 095i.

Fig. 1 Experiment data in year 2000  Specifically, the attributes of experimental data include:    1)  Per capita revenue of each county in China from 2000 to 2005, FIN for short;  2)  Population of each county in China from 2000 to 2005, POP for short;  3)  Number of middle school students of each county in China from 2000 to 2005, MIDRATE for short;  4)  Number of primary school students of each county in China from 2000 to 2005, PRIRATE for short;  5)  Number of hospital beds of each county in China from 2000 to 2005, HOSBED for short;  6)  Number of welfare beds of each county in China from 2000 to 2005, WELBED for short;  7)  Number of welfares of each county in China from 2000 to 2005, WELNUM for short;  B. Spatial association rule mining with classic Apriori algorithm  The dataset mentioned above will be used as the data source for Apriori algorithm. For the data needs to follow the normal distribution, which meet the statistical laws, data preprocessing, specifically log transformation is needed. Table 1 shows part of non-spatial data in the dataset after Log transformation.

TABLE 1 PART OF THE DATA AFTER LOG TRANSFORMATION IN YEAR 2000  POP FIN MIDRATE PRIR ATE  HOSB ED  WEL NUM  0.60 4.52 3.30 3.61 2.27 1 0.78 4.23 2.75 3.74 2.27 1 1.81 5.83 4.67 4.63 3.16 1.30 0.48 3.88 3.32 3.77 2.16 1 0 4.07 2.85 2.92 1.881 1 1.75 5.58 4.34 4.66 3.00 0.90 1.20 4.32 3.86 4.51 2.69 0.60 0.30 4.33 3.20 3.24 2.05 0 1.11 4.91 3.99 4.03 2.69 1 1.46 4.83 4.31 4.40 2.70 1.23 1.49 5.03 3.91 4.52 2.65 1 1.30 4.57 4.25 4.53 2.77 0 1.32 4.92 4.13 4.52 2.66 0 1.70 5.54 4.54 4.58 2.92 1.23  Scanning (reading) and contrasting with the entire dataset, when the supports of candidate k-itemsets are greater than or equal to user-defined minimum support threshold, they immediately become frequent k-itemsets. As Table 2 shows the execution, numerous candidate itemsets are generated from single itemsets, and each candidate itemset must perform contrasts on the entire database, level by level, while searching for frequent itemsets.

TABLE 2 PART OF THE MINING RESULTS OF CLASSIC APRIORI ALGORITHM IN YEAR 2000  Frequent Subsets Support pop fin 0.33  midrate fin 0.33 elerate fin 0.33 hosbed fin 0.32 welbed fin 0.32 welnum welbed 0.31 hosbed elerate 0.30  pop fin welnum 0.25 midrate fin welnum 0.25 elerate fin welnum 0.25 hosbed fin welnum 0.25 welbed fin welnum 0.25  pop fin midrate 0.24  In Table 2, high Support means that variables in the same row always happen together, which can be thought as a spatial association rule. Counties with higher per capita revenue always accompany with higher middle school students, hospital beds and welfare beds according to Table 2. The running time of the Apriori algorithm on the experiment data is more than 1 minute.

C. Spatial association rule mining with improved Apriori algorithm  The main idea of reference [17] is to scan the database, count the probability of each item, calculate the probability of the itemsets and extract the frequent itemsets by their probability based on some rules of the items. The best quality of the new algorithm is that it can reduce the times of scanning database.

Table 3 shows the frequent subsets result. This algorithm doesn?t have to repeatedly read the database to contrast each candidate itemsets with all transaction records of the database.

TABLE 3 PART OF THE MINING RESULTS OF IMPROVED APRIORI ALGORITHM IN YEAR   Frequent Subsets Probability pop fin 0.32 midrate fin 0.31 elerate fin 0.31 hosbed fin 0.31 welbed fin 0.30 welnum welbed 0.30 hosbed elerate 0.30 pop fin welnum 0.25 midrate fin welnum 0.25 elerate fin welnum 0.25 hosbed fin welnum 0.25 welbed fin welnum 0.24 pop fin midrate 0.24  In Table 3, Probability stands for probability of the variables in the same row appear simultaneously. High Probability means that variables in the same row always happen together, which can be thought as a spatial association    rule. Counties with higher per capita revenue always accompany with higher middle school students, hospital beds and welfare beds according to Table 3. The running time of the improved Apriori algorithm is less than 10 seconds.

D. Spatial autocorrelation analysis and spatial regression analysis in mining spatial association rule  In this section, spatial autocorrelation analysis method and spatial regression analysis method are applied to the data mentioned in section IV. A to explore its spatial association rules using GeoDa 095i.

By applying Univariate Moran in GeoDa to the data, results of Moran?s I value of each variable can be obtained as in Table 4:  TABLE 4 RESULTS OF SPATIAL AUTOCORRELATION ANALYSIS IN YEAR 2000 TO 2005  Year Variable 2000 2001 2002 2003 2004 2005  POP 0.62 0.60 0.58 0.61 0.59 0.62 FIN 0.63 0.50 0.54 0.57 0.47 0.60 MIDRATE 0.64 0.63 0.59 0.60 0.59 0.63 ELERATE 0.61 0.60 0.57 0.62 0.58 0.61 HOSBED 0.51 0.49 0.47 0.47 0.46 0.49 WELBED 0.45 0.43 0.42 0.42 0.37 0.48 WELNUM 0.41 0.37 0.22 0.38 0.38 0.37  The above result indicates the spatial autocorrelation of univariate which reflect spatial aggregation.

Using ?FIN?(per capita revenue) as the key variable, Table5 shows bivariate correlation relations.

TABLE 5 RESULTS OF BIVARIATE CORRELATION ANALYSIS(VARIABLES WITH FIN) IN  YEAR 2000  Year Variable 2000 2001 2002 2003 2004 2005  POP 0.39 0.27 0.26 0.23 0.21 0.21  MIDRATE 0.40 0.28 0.25 0.21 0.19 0.18  ELERATE 0.29 0.17 0.15 0.12 0.12 0.10  HOSBED 0.47 0.37 0.38 0.38 0.34 0.40  WELBED 0.32 0.27 0.29 0.29 0.25 0.29  WELNUM 0.30 0.21 0.14 0.18 0.13 0.04  The bivariate correlation analysis result indicates autocorrelation between a specified variable and other variables.

In spatial regression analysis, spatial log model will be executed on the experiment data, and the spatial weight matrix will be taken into account. We normally use the R-squared[18] to measure goodness of fit of the model. Simultaneously, in order to obtain the analysis of residuals patterns and hypothesis testing[19], F-test[20] and t-tests[21] are used to check the statistical significance of overall and the individual parameter in regression analysis model.

As in bivariate correlation analysis, the dependent variable is FIN(per capita revenue), other variables involved in the regression model are independent variables. Results of the model(year 2000) are listed in Table 6:  TABLE 6 RESULTS OF SPATIAL REGRESSION ANALYSIS IN YEAR 2000  Variable Coefficient Std.Error T  StatisticProbability  CONSTANT-67027.58 8338.65-8.04 0.00 POP  2080.90 613.56 3.39 7.01e-4 MIDRATE 3.61 0.60 6.00 0.00 PRIRATE -2.66 0.39 -6.91 0.00 HOSBED   318.61 14.87 21.43 0.00 WELBED 46.28 12.79 3.62 3.04e-4  Focused on the R-squared value(0.554422), it?s goodness of fit of the model is high, which means the model meets the objective fact at a high degree of compliance, in other words, it?s a spatial association rule. From t-Statistic, it shows that the variables HOSBED(number of hospital beds)have the greatest impact on model, followed by MIDRATE(Number of middle school students)and PRIRATE(Number of primary school students).



V. RESULT ANALYSIS AND COMPARISONS  A. Mining results of classic Apriori algorithm From the results of the classic Apriori algorithm, the  following spatial association rules can be drawn: ? Rule 1:FIN high MIDRATE high ? Rule 2:FIN high HOSBED high ? Rule 3:FIN high WELBED high ? Rule 4:WELBED high WELNUM high ? Rule 5:FIN low HOSBED low ? Rule 6:FIN high MIDRATE high HOSBED high ? Rule 7:FIN high MIDRATE high ELERATE high ? Rule 8:POP high MIDRATE high ELERATE high ? Rule 9:FIN high POP high HOSBED high ? Rule 10:FIN high WELNUM high WELBED high  According to Table 2, counties with higher FIN(per capita revenue) always accompany with higher MIDRATE(middle school students), HOSBED(hospital beds)and WELBED (welfare beds) according to Table 2. On the contrary, Counties with lower per capita revenue always accompany with lower middle school students, hospital beds and welfare beds.

B. Mining results of improved Apriori algorithm From the results of the improved Apriori algorithm, the  following spatial association rules can be drawn: ? Rule 1:FIN high MIDRATE high ? Rule 2:FIN high HOSBED high ? Rule 3:FIN high WELBED high    ? Rule 4:FIN high WELNUM high ? Rule 5:WELBED high HOSBED high ? Rule 6:WELBED high WELNUM high ? Rule 7:FIN low HOSBED low ? Rule 8:FIN high MIDRATE high HOSBED high ? Rule 9:FIN high MIDRATE high ELERATE high ? Rule 10:POP high MIDRATE high ELERATE high ? Rule 11:POP high WELNUM high HOSBED high ? Rule 12:FIN high POP high HOSBED high  According to Table 3, Counties with higher per capita revenue always accompany with higher MIDRATE(middle school students), HOSBED(hospital beds)and WELBED (welfare beds) according to Table 3 and vice versa.

The mining result using the developed Apriori algorithm basically coincides with the one using classic Apriori algorithm. But the developed one decrease the time consumption resulted from excess scanning database. It?s feasible to use the improved algorithm instead of the classic one.

C. Analysis results of spatial autocorrelation and spatial regression  1)  Results of spatial autocorrelation Level-2 Heading: A line chart of annual changes in Moran?s I value of each  variable can be drawn according to Table 4, as Fig. 2 shows:  Fig. 2 Annual changes in Moran?s I value of each variable from 2000 to 2005  From Fig. 2, it shows apparently that, the level of spatial autocorrelation of per capita revenue(FIN), population(POP), middle school student(MIDRATE), primary school student(ELERATE) and hospital bed(HOSBED) is relatively high(Moran?s I value >0.45), which indicates that the distribution of these variables are highly centralized.

There is little interannual change in the spatial distribution of per capita revenue, as the level of spatial autocorrelation of per capita revenue remains relatively stable. Same situation happens in POP,MIDRATE,ELERATE and HOSBED.

2)  Results of bivariate correlation analysis A line chart of annual changes in Moran?s I value of  bivariate correlation between FIN and other variables can be drawn according to Table 5, as Fig. 3 shows:  Fig. 3 Annual changes in Moran?s I value of of bivariate correlation between FIN and other variables from 2000 to 2005  Clearly, the correlation level between FIN and HOSBED is much higher than the other variables, followed by WELBED.

From here we can come to the conclusion that strong relation between FIN and HOSBED and WELBED does exist.

3)  Results of spatial regression analysis As noted above, the R-squared can reflect goodness of fit of  the model. Meanwhile the t-tests is used to check the statistical significance of individual parameters in regression analysis.

Again, a line chart of annual changes in R-squared and t- tests values can be drawn according to the results of spatial regression, as Fig. 4 shows:  Fig. 4 Annual changes in in R-squared and t-tests values from 2000 to 2005  Apparently, the value of R-squared is always around 0.5, statistically large. The goodness of fit of the model is high.

Besides, HOSBED does bigger contribution to the model according to the figure, which also proves that the correlation between FIN and HOSBED is much stronger.

D. Result comparisions Analyzing the outcomes of the experiments, the conclusion  can be draw as below: Both results of Apriori algorithm and spatial autocorrelation have proved that the data of county- level revenue and population, education state, health state and social security state does has strong correlation.

High per capita revenue always accompany with high health state and social security state, not only the Apriori algorithm, but also the bivariate correlation analysis proves that. Moreover, the level of effect of each variable does to the spatial regression model, which matches the results of Apriori algorithm well, as the health state has the strongest correlation with per capita revenue, followed by social security state and others.

In other words, the mining results of Apriori algorithm are basically consistent with the results of spatial autocorrelation and spatial regression, that is, spatial analysis. However, the advantage of the spatial analysis is efficiency, as spatial data is already known to be large in size. It can save time consumption significantly. In addition, spatial analysis method will find much more interesting and useful rules and knowledge from the spatial data, such as the distribution of the variables, the cluster centers of the variables, even the changing trend of the variables.



VI. CONCLUSION AND FUTURE WORK  A. Conclusion In this paper, two methods are applied to mining  association rules, including the Apriori algorithm and spatial analysis method(spatial autocorrelation and spatial regression), to extract the correlation between the county-level revenue and population, education state, health state and social security state in China from 2000 to 2005. Results of the two methods are compared, in order to find which one is more appropriate under certain circumstance. Log transformation is applied to the experiment data, which is effective in normalising the data in addition to weakening the negative effect of outliers. A strong correlation of the variables is observed, revealing that there are clear spatial patterns of the variables on the distribution map.

Mining spatial association rules present a great challenge to the developers of multi-relational data mining methods, as the explosive growth of spatial data and widespread use of spatial databases emphasize the need for the automated discovery of spatial knowledge. In this paper we explore the spatial association rule mining which take account of the spatial autocorrelation of the data. Illustrative examples taken from spatial data of county-level revenue and population, education state, health state and social security state in China show that our method enables us to use GeoDa to compute the spatial autocorrelation between the variables and locations. It will be very time consuming if there are a lot of counties to mine the spatial association rules with Apriori algorithm. Moreover, implicit spatial patterns will be extracted from the analysis results of spatial autocorrelation. The most important thing is, spatial analysis method will provides priori knowledge to the mining procedure as the results of both methods have so many rules in common.

However, the differences between the two methods showed that the spatial autocorrelation will also brings deviation to the results which we must find ways to eliminate.

B. Future work Besides the deviation that spatial autocorrelation brings to  the mining results, it?s very difficult to set the rules to specify the candidate frequent itemsets from the spatial autocorrelation. In this paper, we get the candidate frequent itemsets by the level of correlation between the variables and the goodness of fit of the models, and don?t know how the  spatial autocorrelation affect the mining procedure. So how to maintain the impact on mining procedure, that is, when to make use of the spatial autocorrelation and when to eliminate it should be improved in the future.

ACKNOWLEDGEMENTS This paper is funded by the National Natural Science  Foundation of China-Youth Science Fund Project(No.

40801152) and Scholarship Research Fund Project, Ministry of Education(No.213153249).

