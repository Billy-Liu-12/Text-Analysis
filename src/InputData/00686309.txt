An Effective Algorithm for  Discovering Fuzzy Rules in Relational Databases

Abstract  In this paper, we present a novel technique, called F-APACS, for discovering fuzzy association rules in relational databases. Instead of dividing up quantitative attributes into f i e d  intervals and searching for rules expressed in terms of them, F-APACS employs linguistic terms to represent the revealed regularities and exceptions. The deBnitions of these linguistic terms are based on fuzzy set theory and the association rules expressed in them are, therefore, called fuuy  association rules here. To discover these rules, F-APACS utilizes an objective interestingness measure when determining if two attribute values are related. This measure is defined in terms of an ?adjusted difference? between observed and expected frequency counts. The use of such a measure has the advantage that no user-supplied thresholds are required. In addition to this interestingness measure, F-APACS has another unique feature that it provldes a mechanism to allow quantitative values be inferred from the rules. Such feature, as shown here, make F-APACS very effective at various mining tasks.

Keywords: data mining, fuzzy association rules, linguistic terms, interestingness measure.

1 Introduction  Data mining, sometimes referred to as knowledge discovery in databases, is concerned with the nontrivial extraction of implicit, previously unknown, and potentially useful information from data [6] .  One important topic in data mining research is concerned with the discovery of association rules [l]. An association rule describes an interesting association relationship among different attributes. A boolean association involves binary attributes; a generalized association involves attributes that are hierarchically related and a quantitative association involves attributes that can take on  quantitative or categorical values. Existing algorithms (e.g. [2, 121) for mining quantitative association rules require discretizing the domains of quantitative attributes into intervals so as to discover quantitative association rules. These intervals may not be concise and meaningful enough for human users to easily obtain nontrivial knowledge from those rules discovered. Instead of using intervals, we introduce a novel technique, called F-APACS, which employs linguistic terms to represent the revealed regularities and exceptions. The linguistic representation makes those rules discovered to be much natural for human users to understand. The definition of linguistic terms is based on fuzzy set theory and hence we call the rules having these terms fuur association rules.

In fact, the use of fuzzy techniques has been considered one of the key components of data mining systems because of the affinity with the human knowledge representation [7].

Regardless of whether the association being considered is boolean, generalized or quantitative, existing algorithms (e.g. [ l ,  11-12]) decide if it is interesting by having a user supply two thresholds -- support and confidence. Given two attributes X and Y,  the support is defined as the percentage of records having both attributes X and Y and the confidence is defined as the percentage of records having Y given that they also have X .  If both support and confidence is greater than the user-supplied threshold, the association is considered interesting. A weakness of these approaches lies in the difficulty in deciding what these thresholds should be.

To overcome this problem, F-APACS utilizes adjusted difference [Z-51 analysis to identify interesting associations among attributes. The use of this technique has the advantage that it does not require any user- supplied thresholds which are often hard to determine.

Furthermore, F-APACS also has the advantage that it allows us to discover both positive and negative association rules. A positive association rule tells us that a record having certain characteristic will also have  0-7803-4863-X/98 $10.0001998 IEEE 1314    another characteristic whereas a negative association rule tells us that a record having certain characteristic will not have another characteristic.

Many data mining algorithms (e.g. [l-2, 4-5, 10-121) require the class labels (conclusions of rules) to be crisp and the variables representing the class labels are therefore qualitative. This makes quantitative values are not inferred from those rules. To be more effective, F-APACS is able to deal with class boundaries that are fuzzy and to associate qualitative attribute values with quantitative attribute values. This provides a mechanism for F-APACS to allow quantitative values be inferred.

In the next section, we provide a brief description of how existing algorithms can be used for the mining of quantitative association rules and how fuzzy techniques can be applied to data mining process. The definition of linguistic terms is provided in Section 3. The details of F-APACS is given in Section 4. In Section 5, we present how to allow quantitative values be inferred from fuzzy association rules. The experimental results of F-APACS over several real-life databases are discussed in Section 6.

Finally, in Section 7, we provide a summary of the paper.

2 Related Work  Quantitative association rules are defined over quantitative and categorical attributes [ 121. The statement 70% d t a t iay  educatd pop1 e tet w en age 25 and J) are unmarried? is one such example. The values of categorical attributes are mapped to a set of consecutive integers and the values of quantitative attributes are first discretized into intervals using equi-depth partitioning, if necessary, and then mapped to consecutive integers to preserve the order of the valueshtervals [12]. Both categoricaI and quantitative attributes can then be handled in a uniform fashion as a set of cattribute, integer value>.

With the mappings defined in [12], a quantitative association rule is mapped to a set of boolean association rules. In other words, therefore, rather than having just one field for each attribute, there is a need to use as many fields as the number of different attribute values. For example, the value of a boolean field corresponding to <attributel, valuel> would be ?1? if attribute1 has value, in the original record and ?O?, otherwise [12]. After the mappings, the algorithms for mining boolean association rules (e.g. [ 11) is then applied to the transformed data set.

Let I = {i l ,  iz, ..., im} be a set of binary attributes called items and T be a set of transactions. Each transaction t E T is represented as a binary vector with t[k] = 1 if t contains item i k  and t[k] = 0, otherwise, for k = 1, 2, ..., m. An association rule is defined as an implication of the form X 3 Y where X c I, Y c I, and X n Y = 0. The rule X 3 Y holds in T with support  defined as Pr(XUY) and confidence defined as Pr(YIX) . For the mining algorithms such as that described in [l, 11-12] to determine if an association is interesting, its support and confidence have to be greater than some user-supplied thresholds. A weakness of such approach is that many users do not have any idea what the thresholds should be. If it is set too high, a user may miss some useful rules but if it is set too low, the user may be overwhelmed by many irrelevant ones.

Furthermore, the intervals involved in quantitative association rules may not be concise and meaningful enough for human users to obtain nontrivial knowledge.

Fuuy linguisfic summaries introduced in [ 13-14] express knowledge in linguistic representation which is natural for people to comprehend. An example of linguistic summaries is the statement ?about half of people in the database are middle aged.? In contrast to association rules which involve implications between different attributes, the fuzzy linguistic summaries only provide summarization on different attributes. There is no idea of implication in fuzzy linguistic summaries. As a result, this technique which provides a means for data analysis is not developed for the task of rule discovery.

In addition to fuzzy linguistic summaries, the applicability of fuzzy modeling techniques to data mining has been discussed in [ S I .  Given a series of fuzzy sets, a, . 7.&, context-sensitive Fuzzy C-Means (FCM) method is used to construct the rule-based models with the rules y is if Q1 and 0, and . .and Q where 01, &, . 1. r;Z, are the regions in the input space that are centered around the c? p r c t c i y e s  f u  i = 1, 2, .,.c [8]. Nevertheless, the context-sensitive FCM method can only manipulate quantitative attributes and it is for this reason that this technique is inadequate to deal with most real-life databases which consist of both quantitative and categorical attributes.

3 Linguistic Terms  Given a set of records, B, each of which consists of a set of attributes J=  {Il, Z2, .. ., Z,,}, where I,. v = 1, 2, . . ., n can be quantitative or categorical. For any record, d E B, d[Z,] denotes the value i, in d for attribute I,,. For any quantitative attribute, I ,  E J, let dom(Z,) = [lv, U,] c ?3 denote the domain of the attribute. A set of linguistic terms can be defined over the domain of each quantitative attribute. Let Gr, r = 1, 2, ..., s, be linguistic terms associated with some quantitative attribute, Z, E $ Lr is represented by a fuzzy set, Lr, defined on dom(Z,,) whose membership function is pLv, such that  P&,:domu?) + [OJI     The fuzzy sets Lr, r = 1,2,  . . ., s, are then defined as  if I ,  is discrete  if I ,  is continuous Lvr =  for all i, E dom(Z,). Some value i, E dom(Z,) is compatible with some linguistic term Gr to a degree of pbr (i,) .

For any categorical attribute, I,  E 5 let dom(Z,) = {ivl , i,, , . .. , i,, } denote the domain of I,. To handle categorical and quantitative attributes in a uniform fashion, we can also define a set of linguistic terms, Lt, r = 1, 2, ..., m, for each categorical attribute, Z, E -9, where Lr is represented by a fuzzy set, Lr, such that  1 L =- vr .

lvr  Using the above technique, we can represent the original attributes, 5 using a set of linguistic terms, L =  {L,,,lv = 1,2 ,..., n,r = 1,2 ,..., s,,) where s, = m, for categorical attributes. Each linguistic term is represented by a fuzzy set and hence we have a set of fuzzy sets, L = { L J v  = 1,2 ,..., n,r = 1,2 ,..., s,} . Given a record,  d E D, and a linguistic term, Lr E L, which is, in turn, represented by a fuzzy set, hr E L, the degree of membership of the values in d with respect to Lyr is given by pLvr ( d [ Z , ] )  . In order words, d is characterized by the term Lr to a degree of phr (d[Z, l )  . If p&, (d [Z , ] )  = 1 ,  d is completely characterized by the term &. If pLr (d[Z,,]) = 0, d is undoubtedly not characterized by the term 4,. If 0 < pL, (d[Z,]) < 1 ,  d is partially characterized by the term &,.. In case that d[l,] is unknown, puL, ( d [ Z , ] )  = 05 which indicates that there is no information available concerning whether d is characterized by the term Lr or not.

In fact, d can also be characterized by more than one linguistic terms. Let us consider the linguistic terms, 4,r, , hZr2 , . .. ,L,,,",, E L , and the corresponding fuzzy sets,  GZrz ,..., hmr, E L . d is characterized by the terms Ltlr,, Ltzr2 9 . .  . ?  LV,,, to a degree of  Based on linguistic terms, we can apply F-APACS to discover fuzzy association rules which are presented in a manner that is natural for human experts to understand.

The use of fuzzy techniques also buries the boundaries of  adjacent intervals of numeric qualities. This makes F-APACS resilient to noises such as inaccuracies in physical measurements of real-life entities. Furthermore, the fact that 0.5 is the fuzziest degree of membership of an element in a fuzzy set provides a new means for F-MACS to deal with missing values in databases.

4 Mining Fuzzy Association Rules  F-MACS begins the data mining process by calculating the sum of degrees to which those records in databases are characterized by the linguistic terms. Given a record, d E 9, and linguistic terms, .&, 4k E L, p # j which are, in turn, represented by fuzzy sets, Lpq, Ljk E L, p # j  respectively, the degree to which d is characterized by Gq and Gk is accumulated in degLpqLjk . F-MACS then determines if an interesting association relationship exists between &, 4k E L, p # j .  More specifically, F-APACS can be described as follows (Fig. 1).

1) F-MACS( ) 2) begin 3) 4) forall&,GkE L , p # j d o  6 )  forall -&, Gk E L, p # j do 7 )  if interesting(Gq, 4 k )  then 8) x = 4Urulegen(Lpq.Ljk) ; 9) retnrn(a; 10) end  forall d E !D do  5) degLMLfi + = min(/.kw (d[lpl)~&fi (4111)) ;  Fig. 1. Algorithm F-APACS.

The identification of interesting associations is based on an objective interestingness measure, called adjusted difference [2-51. This measure is defined as  where zLpqLfl is the standardized difference given by  e,--Ljk is the sum of degrees to which records are expected to be characterized by Lpq and 4k and is calculated by  u=l i=l     and yLpgL,k is the maximum likelihood estimate  variance of zLpgLx and is given by of the  If ld,--L,k I>  1.96 (the 95 percentiles of the normal distribution), we can conclude that the association between +k and .& is interesting. If dL > +1.96, the presence of .$ implies the presence of -&. It is more likely for a record having both L,t and &. We say that 4 is positively associated with .rp.9- If dLMLfi < -1.96, the absence of 4 implies the presence of GT It is more unlikely for a record having f& and hq at the same time.

We say that + is negatively associated with .&.

F-APACS employs the adjusted difference analysis in interesting( &, +) to determine whether the association between Gq and hk is interesting. When such association is found to be interesting, the interesting function returns true; otherwise, it returns false. If interesting(,&, 4) returns true, a fuzzy association rule is then generated by the rulegen function. The rulegen function takes as argument a pair of linguistic terms, Lpq and hk, to generate a fuzzy association rule such that it is in the form of L,k * L, [wLwLir 1 where wL w f denotes weight of evidence 13-51 measure which is defined as  w f  i#q  wL L. provides a measure of the difference in the gain in information when a record with Ijk characterized by Gq and when Characterized by 4;. i f q. It is positive if 4 is positively associated with bq whereas it is negative if 4k is negatively associated with Lp4.

P9 Ik  5 Inferring Previously Unknown Values Using Fuzzy Association Rules  Using discovered fuzzy association rules, F-APACS is able to predict the values of some characteristics of previously unseen records. The results can be quantitative or categorical depending on the nature of the attributes whose values are to be predicted. Unlike other classification techniques which classify records into  distinct classes, F-MACS allows quantitative values be inferred from fuzzy association rules.

Given a record, t E dom(l1) x ... x dom(1,) x x dom(l,), let t be characterized by n attribute values, at, .,.q, .,.a,,, where ap is the value to be predicted. Let 6, p = 1,2,  . J,,, be the linguistic terms corresponding to the class attribute, I,,. We further let 1, be a linguistic term with domain dom( 1 ) = { Lpl , Lp2 , . . . , Lpsp } . The value of c4, is assigned according to the value of Zp. To predict the correct value of l,,, F-MACS searches the association rules with Gq E dom(1,) as consequents. If some attribute value, say 9, j # p ,  of t ,  is characterized by the linguistic term in the antecedent of a rule which implies Lpq, it can be considered as providing some evidence for or against the value of lp being assigned to hT By repeating this procedure, that is, by matching each attribute value of t against the rules, F-APACS can determine the value of Zp by computing the total evidence measure.

Since each of the attributes of t may or may not provide evidence, and for those that do, they may support the assignment of different values, the different pieces of evidence are quantitatively measured and combined for comparison in order to find the most suitable value of 1,.

For any attribute value a,, j # p, of t ,  it is characterized by a linguistic term, 4k, to a degree of compatibility, f l L a  ( a j ) ,  for each k E ( 1, 2, .*. s,}. Given those rules  implying the assignment of &, Ljk * L, [wLMLx ] , for all k E c { 1,2, . 7-s,}, the evidence provided by q for or against such assignment is given by  Suppose that, of the n - 1 attribute values excluding 9, only some of them, qll, ..). ..). qml with ~ + , ~ = { c q l i ~  {1,2, .,.n)-(p)],arefoundtomatchone or more rules, then the overall weight of evidence for or against the value of 1, to be assigned to Gq is given by  (7) j=l  In case that Ip is categorical, Zp is assigned to GC if w, > w,,, h = 1,Z ,...,si andh f c (8)  where si (5. sp) denotes the number of linguistic terms  implied by the rules. c4, is therefore assigned to ipc E dom(Z,).

If I, is quantitative, a novel method is used to assign an appropriate value to c4,. Given the linguistic terms, L,, , L,, , .. . , LpSp , and their overall weights of evidence,     w,, wz ,..., wSp , let pLpm (i,) be the weighted degree of membership of i, E dom(Z,) to the fuzzy set Lpv, U E { 1, 2, ...$,). pipu (i,) is given by  PiP" ( i p )  = qJ 'PL PO (i p, 1 (9)  where ip E dom(Z,) and U = 1, 2, .J. sp. The predicted value, a, is then defined as  where j l iuy ( i )  = max(p> ( i ) ,&( i ) )  for any fuzzy sets X and Y. This prediction, a, provides an appropriate value for ap.

For quantitative predictions, we use the root-mean- squared error as a performance measure. Given a set of testing records, D, let n be number of records in D. For any record, r E D, let [ I ,  U] c % denote the domain of the class attribute. We further let t, be the target value of the class attribute in r and or be the predicted value given by F-APACS. The root-mean-squared error, m, is defined as  To evaluate the effectiveness of F-MACS, we used several real-life databases including (i) a transactional database of a PBX system; and (ii) a database concerning with 800 industrial enterprises in mainland China.

6.1 The PBX Database  The PBX database is collected from a private branch exchange (PBX) system used in a telecommunication company. It consists of phone call records about the usage of the PBX system. There are 3,009 records and each record is characterized by 13 attributes. Among these attributes, two are categorical and all the remaining attributes are quantitative. There are 98.4% of records having missing values in at least one of the attributes.

As an illustration, let us consider attributes Time-of- call and Duration-of-call in detail. We define the linguistic terms (i) Mid-night, Morning, Afternoon, Evening, and Night for Time-of call; and (ii) Very-short, Short, Moderate, Long, and Very-long for Duration-of- call. These linguistic terms are shown in Fig. 2 and Fig. 3 respectively.

Degree ot membership t Mid-night Morning Afternoon Evening Night  12am 3am 6am 9am 12pm 3pm 6pm 9pm Time-ol-call  Fig. 2. Linguistic terms for Time-of-call.

?Degree of membership  0 3 6  9 12 15 18 Duration-of-call  Fig. 3. Linguistic terms for Duration-of-call.

In [3], F-MACS has been shown to be able to  discover meaningful fuzzy association rules in databases.

In this experiment, Calling-party-id is chosen as the class attribute. Using the linguistic terms, we applied F-AF'ACS to the PBX database. For comparison, we also applied C4.5 [ 101, a decision-tree based classification technique, to this database. Of all the records, 2,000 are randomly selected for training and the others are used for testing. Fig. 4 shows the classification accuracy.

Fig. 4. Classification accuracy for the PBX database.

As shown in Fig. 4, F-MACS outperformed (24.5.

This revealed that F-MACS is able to discover some important knowledge that cannot be found by C4.5.

6.2 The china Database  The china database is provided by the China Business Center of the Hong Kong Polytechnic University. It contains the data collected in a survey performed by the census bureau of the government in People' s Republic of China. This survey is concerned with the situations of production and operation of 800 industrial enterprises in mainland China in 1992. The china database contains 800 records representing these industrial enterprises.

Each record is characterized by 56 quantitative attributes.

The percentage of missing values in each attribute ranges from 0.5% to 97.5%.

As an illustration, let us consider attribute A1 which represents ?Total value of indusmal output (constant price of 1990)? in detail. We define the linguistic terms Very- low, Low, Moderate, High, and Very-high for A l .  These linguistic terms are shown in Fig. 5.

1 10 1M 1mo 1? 1? l m ? A1  Fig. 5. Linguistic terms for Al.

Among all the attributes, domain experts identified  attribute A I  as the class attribute. It should be noted that there are 30 records whose values of attribute A I  are missing or unknown. These records are ignored in our experiment. Of the remaining records, 580 are randomly selected for training and the others are used for testing.

It should also be noted that attribute A1 is quantitative and the predictions on this attribute are therefore expected to be of quantitative values. Unfortunately, other classification techniques which can only classify records into distinct classes are unable to give quantitative values as predictions. It is for this reason that they are not readily applicable to this task. On the contrary, by representing attribute A I  with the linguistic term, F-APACS is able to inferring quantitative values using fuzzy association rules.

In our experiment, the quantitative attributes are represented by appropriate linguistic terms. The root- mean-squared error over the class attribute A1 for the china database is equal to 4.4%. In other words, the predictions produced by F-APACS deviated from the target values by 4.4% in average.

7 Conclusions  We presented a novel algorithm, called F-APACS, which employs linguistic terms to represent the revealed regularities and exceptions in this paper. The linguistic representation is especially useful when those rules discovered are presented to human users for examination.

Unlike other algorithms which discover association rules based on the use of some user-supplied thresholds, F-APACS employs adjusted difference analysis to identify interesting fuzzy associations among attributes. This makes it to be able to avoid the use of some user-supplied thresholds which are often difficult to determine. Using  adjusted difference analysis, F-APACS is able to discover positive and negative association rules. Furthermore, unlike other classification techniques which classify records into distinct classes, F-APACS allows quantitative values be inferred from fuzzy association rules.

