Average Fuzzy Direction Based Handwritten Chinese Characters Recognition  Approach

Abstract   Since handwritten Chinese characters? style is uncertain and differs as people differ, this article brings forward a new Average Fuzzy Direction Code based on weight, so as to conquer traditional fuzzy arithmetic?s shortcoming that is without enough generalization capability; At the same time it improves association rules in data mining and applies it to the process of handwritten Chinese characters? generalization and picking up of their abstract attributes. Thus exact denotation of handwritten Chinese characters is resolved, and simultaneously it picks up the handwritten Chinese characters? characteristic and mines improved association rules, and further achieves the purpose of handwritten Chinese characters? quick recognition. Therefore it resolves traditional pattern identification?s problem of poor adaptability.

1. Introduction   Off-line handwritten Chinese character recognition is an important part in character recognition field.

However, handwritten Chinese character?s structures are various and writing style differs as people.  These conditions make a same kind of samples have a lot of difference and stable characteristic be hard to pick up.

Also Chinese character patterns have many categories, and there are lots of similar characters, and it makes identification work even harder. Handwritten Chinese characters identification is believed one of the hardest problems in this field[1]. The reason is that a characteristic description pattern is difficult to find which comprehensively shows all Chinese characters pattern?s essence. So there is no way to quickly and exactly identify handwritten Chinese characters.

2. Pick-up and recognition of characteristic   To recognize Chinese character automatically, the first thing is pick-up and recognition of characteristic  According to fuzzy direction conversion technology, different Chinese characters make diverse direction code sequences by strokes direction, thus characters can be recognized by different code sequences. To overcome recognition difficulty brought by diverse fonts, especially direction irregular appeared in words written by different people, fuzzy direction technology is introduced. Depending on character trace? fuzzy direction value, it fells under certain correspondingly closest unswerving direction by some similar degree. This equals changing diverse style characters into unswerving chirography, and recognition robustness is improved greatly. Since characters? parallel move can not change direction code sequences, it has outstanding adaptability to characters? parallel move when this way is adopted to perform mode recognition. However, for one character, various handwritings have diverse direction code sequences, so great limitation exists in this way.

1) For one character in different sizes, its direction code sequences differ greatly;  2) If there is a little difference in character traces, then direction code sequences differ, that is this method does not have ideal effect for conditions such as characters in different sizes, noise, crack, etc;  3) For a same character, if an initial point selected when confirm direction code sequences differs, the resulted sequences value differs.

2.1 Improved fuzzy direction coding method   This article adopts 4 directions, which is shown in  Fig.1.

Fig. 1  Definition of four fuzzy direction  2008 Workshop on Knowledge Discovery and Data Mining  DOI 10.1109/WKDD.2008.52   2008 Workshop on Knowledge Discovery and Data Mining  DOI 10.1109/WKDD.2008.52   2008 Workshop on Knowledge Discovery and Data Mining  DOI 10.1109/WKDD.2008.52   2008 Workshop on Knowledge Discovery and Data Mining  DOI 10.1109/WKDD.2008.52   2008 Workshop on Knowledge Discovery and Data Mining  DOI 10.1109/WKDD.2008.52     in angle range U = [ - 22.5  337.5 ], any plan direction u?U can correspond to one fuzzy direction value in Fig.1 by fuzzy conversion.

For the discussed angle range U, define its F  direction collection ,1 ~ A ,2  ~ A ,3  ~ A ,4  ~ A and their  membership function is regulated as followed:     1 2 2 . 5 2 2 . 5 2 2 . 5 1 8 0( ) 1 1 5 7 .5 2 0 2 .5  2 2 . 5  4 51 2 2 . 5 6 7 . 5 2 2 . 5  2 2 5( ) 1 2 0 2 . 5 2 4 7 .5 2 2 .5   9 01 6 7 . 5 1 1 2 .5 2 2 . 5  2 7 0( ) 1 2 4 7 . 5 2 9 2 .5 2 2 .5   u u  uA u u  o t h e r s  u u  uA u u  o t h e r s  u u  uA u u  o t h e r s  ? ? ? ? <? ? ? ?= ? ? <? ? ? ? ? ? ?? ? <? ? ? ?= ? ? <? ? ? ? ? ? ?? ? <? ? ? ?= ? ? <? ? ? ? ?   1 3 51 1 1 2 .5 1 5 7 . 5 2 2 . 5  3 1 5( ) 1 2 9 2 . 5 3 3 7 .5 2 2 . 5   u u  uA u u  o t h e r s  ? ?? ? <? ? ? ?= ? ? <? ? ? ? ?    thereupon, for u ? U, there is Fig.2   Fig.2 Membership function  According to maximum membership principle, for one x?U, there is :  ~ ~ ~ ~ ~  1 2 43( ) max{ ( ), ( ), ( ), ( )}A x A x A x A x A x= ???.(1)  Suppose )()( ~~  xAxA k= , in which k=1,2,3,4, then x can be fuzzily denoted as  kxAx k /)( ~~  = ????????????...?..(2) K is the fuzzy direction that the direction belongs to,  and )( ~  xAk  is its fuzzy degree.

In this way, strokes in a character are not ?vectors?, but ?scalar quantity?. Factors like character noise often influence initial points? selection arithmetic. Well, adopting 4 directions make direction code sequences have great adaptability. Mode recognition?s exactness will not be misguided by initial points, and immunity is improved effectively.

Besides, the essential of defining direction sequences by character traces is to grasp strokes direction and structure, and their length is secondary.

Both strokes? direction and structure are character?s comparatively stable characteristic, yet its length has much elasticity, and it changes along with character?s size and style of writing. Chinese character in nature is 2-dimensional mode and has abundant structural information: one is embodied by a character?s strokes makeup, the other is embodied by strokes? relation.

Only when this information is showed in description, it is possible to reduce limitation to customers? writing and increase recognition system?s robustness.

Traditional definition sums up direction, structure and length, and thereby loses some important information.

This makes it very sensitive to length change. Hereon, AFDC (Average Fuzzy Direction Code) is adopted.

2.1.1 Average Fuzzy Direction Code.

Definition 1:  for direction space k = {1, 2, 3, 4}, suppose one character a is made up of n strokes, in which the ith stroke direction sequence has im direction codes, that is this Chinese character is shown by one fuzzy direction sequence in im  length  ( ~ ~ ~  ,1 ,2 ,, , ii i i mA A A ), and 1,2, ,i n= . for jir , ?k , 1,2, ,i n= , 1, 2, ij m= , this stroke?s average  fuzzy direction code ~  ig  is ~  , ~   ,    i  i  m  i j ji  i m  i j ji  A m  g r  m  =  =  = ?  ? ??????????..??(3)  In which jiA , ~  denotes the ith stroke the jth fuzzy direction?s fuzzy degree. And then, character a can be denoted as  ~ ~ ~  1 2( , , ..., )na g g g= ...............................................(4) This is an ordinal direction sequence. Since  character code is shown by stroke?s average fuzzy direction code sequence, code length diminishes greatly. At the same time, the introduction of average value gives code very good robustness for strokes     direction value?s fluctuation. Besides, each stroke is denoted by one code, and this not only simplifies problems, but improve adjustability and intuitional quality.

Fig.3 Example of handwritten Chinese characters  The character shown in Fig.3(a) is { 1 ~ g = (1/ 1)? 1b  = (11)}, the character shown in Fig.3(b) is  { 2 ~ g = (1/ 1); 2b  = (111)}, Hereinto, 2  ~   ~ , gg  are AFDC  value, and b1, b2 are traditional code value. Obviously, what the two figures show are the same character ???, but b1?b2, the recognition requirement cannot be reached. Well, AFDC code value can easily recognize them. It is clearly that AFDC code has great adaptability to characters in various sizes.

2.1.2 Weighted AFDC method. By adopting AFDC method we can easily recognize a character?s strokes number and their directions. But when meet similar characters which are same in strokes number and directions, such as ???, ???, ???, ???,???, ???,? ??,???, etc, we can do nothing. Therefor, a weight sequence is introduced under the precondition of AFDC code. Its definition is followed:  Definition 2:  Suppose one character a is made up  of  n strokes, and the ith stroke?s AFDC value is ~  ig and its length is il . Define the stroke?s weight is:  ? =  = n  j j  i i  l  lr   ????????????????..(5)  Thereinto 1,2, ,i n= . and then character a can be denoted as:  ? ? ?  ?  ? ? ?  ? =  n  n  rrr ggga  ...

...

~~   ~  1 ??????..?...?.....(6)  Then we can distinguish similar characters.

Suppose strokes searching sequence is from up to down and left to right, thereupon:  ? ?  ? ? ?  ? =?  ?  ? ? ?  ? =  35.032.033.0 1/11/11/1  "", 26.036.038.0 1/11/11/1  "" ??   ? ?  ? ? ?  ? =?  ?  ? ? ?  ? =  4.032.028.0 1/13/11/1  "", 39.033.028.0 1/13/11/1  "" ??  It is obvious that the AFDC sequences of ??? and ??? are same, but their weights are different. ??? and  ?? ? are in the same way. That is to say similar characters? weighted AFDC sequences are different.

Thereby it is possible to distinguish them.

2.2 Sample-base?s hierarchical storage   Before recognizing handwritten Chinese characters,  a standard character base should be founded. Just as a person has to know standard print before he (she) knows characters written by other people. Get the matrixes or vectors of some standard font?s common characters in some size by weighted AFDC method, and store them in computer as standard sample-base.

When meet a character need recognizing, first get its denotation by weighted AFDC method, and then recognize according to nearest selected principle.

To realize recognition speediness and effectiveness, this article divides the sample base into 2 grade mode: the 1st grade is a code aggregation with different AFDC sequences; the 2nd one is a code set of similar characters which have same AFDC sequences and different weighted AFDC sequences. When perform recognition, first do 1st grade recognizing in sample base by function (4); if it fails, then find the AFDC sequence in 2nd grade sample base by function (6) and compare weight sequences and recognize by the nearest selected principle. Code sequences in sample base can be sequenced in some way, so that searching speed and efficiency can be further improved.

2.3 Sample base?s evolution   According to system theory and evolutionism, one thing can develop only when it is under open ended system. So, sample base should not be closed and invariable. Along with the increase of characters met, experience accumulated should add, indexes such as recognition exactness and timeliness should improve.

In real recognition process, it is inevitable to meet some new, strange characters or bewildering conditions. At this time, it can not simply recognize by some similar degree definition and nearest selected principle. Because characters met may be a new mode or a character in sample base with anamorphic information. A new mode met should be superadded to sample base. Before that it should be distinguished whether it belongs to the 1st grade sample or the 2nd grade sample. And it is discussed separately: for a characters not in sample base, if its code fuzzy direction sequence has a big difference from these in sample base, then insert it into 1st grade sample base; if its code fuzzy direction sequence has little difference from these in sample base, but its distance to similar     sample weight sequence is bigger than a certain tolerated threshold, then add it into 2nd grade sample base. For a character in sample base, fell it under a nearest category by nearest selected principle. For example, in reality, it may meet ??? the traditional Chinese character of ?? ?, and its code sequence probably does not exist in the initial sample base. So insert it into sample base as a 1st grade sample. In handwriting it may meet various logograms. For  instance, some write ???? as ? ?, which should be added into sample base as a 1st grade sample. People usually write ???as ? ?, of which the fuzzy direction code is similar to that of ???, but the weight sequence has big difference from that of ???, so insert it into 2nd grade sample base.

Thus sample base will be expanded as ?experience? gets abundant and the extended contents differ as users? habits differ, and will bring more convenience to users. The recognition system will evolve from initial general version to professional versions in various fields with more flexibility and expansibility.

2.4 Sample base?s generalization   It is known to all that the makeup of Chinese  character which people are more familiar and identify with is radicals, although strokes are the most basic composing. Fig.4 shows the relation among Chinese character, radicals and strokes.

Fig.4 Sample base?s generalization  Suppose D denotes sample base, in which sample description is about stroke sequence, just like a kid who start learning Chinese characters. However, a Chinese character recognition system can not always stay in a kid level, and strokes expression does not accord with people?s habit too. Therefor D should be generalized in the direction of picking up radical information, so that new knowledge-radical is concluded.

Suppose =I { pIII ,,, 21 } is fuzzy direction space in D, and B= ( ]1,0 is stroke weight value space.

So a character a can be denoted as  =a ? ?  ? ? ?  ?  n  n  rrr ggg   ~~~    1,,~  =?? ? =  n  i iii randBrIg , In which  1,2, ,i n= .

Definition 3: suppose mode T= ? ? ?  ?  ? ? ?  ?  q  qfff ??? 21  ~~~  ,  in which 1  =? =  q  i i? . When they meet the followed  relation, it claims that mode T? A.

1) ( qfff  ~~~ 21 ?=? 11  ~~~ ?++ qiii ggg ?? 11 +??? qni  2) ( qi ??? 2 ? resembles  ? ?+  = ?++   11 )  ...    (  qi  j jqiii rrrr fuzzily, that is the  two vectors? comparability meets given threshold.

Suppose there are N samples in D, and suppose:  ? ? ? ?  = .,0  , otherwise  ATk i i?  ??????????.(7)  in which iA  denotes the ith character, k is the times that T appears in iA . then support  P of mode T in D is  : DP N  i i?  =  =  ?    ??????????.??(8)  Definition 4:  if for given minimal support(min_sup), there is P> min_sup. then T is claimed as a radical.

Usually suppose min_sup=1/c, and c is a constant that is bigger than 2.

The above definition means that a frequently appeared mode (certain strokes set) can be generalized as an attribute, namely a radical. This also answers for Chinese characters? composing formula, and the appearance frequency of a radical is much higher than a single Chinese character. Thus characters can be denoted by radical sequences. Suppose all radical?s set is ? . For a Chinese character A that is made up of m radical, there is :  ( )mTTTA 21= ?????????.?(9) In which miT i ,,2,1, =?? . note: radical got  here don?t always accord with traditional ones, and they are just some stroke sets with high appearance frequency in D.

2.5 Radical knowledge mining   Apriori arithmetic fundamentals of mining frequent item sets can be adopted to mine out radical knowledge in sample base[2]. Apriori arithmetic is one common     arithmetic that used to dig association rules. It is named after prior knowledge of related frequent item- set characteristic. This arithmetic uses cycle layers ordinal search to complete the mining work of frequent item set, that is to use frequent k-item set to produce (k+1)-item set, and thereby pick up frequent (k+1)- item set. In this article: k-item set denotes a mode that contains k basic fuzzy direction units; frequent means a mode meets minimal support threshold min-sup, frequent k-item set denotes a frequent k item set.

Table 1   Sample base D WID Characters? 1-item set WID Characters?  1-item  set W1 2 2 1 1 1 3 4 W6 2 2 1 1 3 3 1 1 W2 1 3 1 3 W7 2 2 1 4 1 3 1 3 W3 2 1 4 1 3 1 3 W8 1 3 1 3 4 W4 2 2 1 4 2 4 W9 2 4 1 3 1 3 W5 2 1 4 2 4   3.Radical mining arithmetic demonstration   In this article?s radical recognition, since sample base D is very big and basic strokes? quantity is comparatively less, each stroke?s support is fairly large and all 1-item sets are believed frequent. Thereby 2- item set is constructed directly. For instance, for a sample base made up of  9 characters shown in table 1, use i to denote 1-item set iI . Do a transform to item set weight value in each step of item set operation.

Suppose  kT = 1 2 ... mI I I = 1 2 1 2  ...

...

k  k  g g g r r r  ? ? ? ? ? ?    when compare two modes, adopt zero-standard value as segment and mode weight which have equal direction in characters. That is to suppose:  =if ? =  k  j ji rr   ? kj 2,1=  When compare weight values, use 1 2( , , ..., )kf f f  value to compute. For the 9 character  sample base D shown in table 1, the followed are all steps frequent sets kL  got by Apriori arithmetic.

Table 2.  L2 Item set Support count Item set Support count 11 4 21 6 13 12 22 4 14 4 31 6  Table 3.  L3 Item set Support count Item set Support count 131 5 221 4 214 4 313 5  Table 4.  L4 Item set Support count 1313 5  Apriori arithmetic ends because no new frequent item set is found. What traditional arithmetic ultimately get is radical L4 with most item sets. But low step radical should not be given up consequently.

There are many radicals with inclusive relations in Chinese characters, such as ? ?? ? ? and? ?  etc. To avoid neglect of radical knowledge in low step frequent item sets because of high step frequent item sets, this article adopts an inverse iterative algorithm:  =ksupmin_ ),sup(min_ 1 kf k+   , 1, 2k l l= ? ...........(10) in this formula the initial minimal support threshold is  lsupmin_ , function f is a decreasing function about step k. under the condition of ITT kk ?=+1 ?and  11 ++ ? kk LT  , support count of 1+kT is less than or equals to that of kT . It is obviously that support count of kT  should be bigger than that of 1+kT  , then kT  can become radical knowledge. Thus f, the minimal support threshold function about k, is a decreasing function of step k. A minimal support threshold sequence or a function can be predefined to realize threshold reverse-iterative computation. In this demonstration, min_sup=?7/9 5/9 4/9?is predefined, and the arithmetic finds radicals:  1311 IIIR = ? 2122 IIIR = ? 31313 IIIIR = .

After radical rules are mined, a sequenced radical attribute sample base may be founded on it, and the sequence basis is each radical?s support. When recognizing, the system may look over radical base, and first check radicals that appear very frequently and with same initial strokes. Then recognition may be realized quickly. Even pre-recognition may come true in online handwriting recognition, that is the system recognizes what a user would write before he (she) finishes all strokes. Certainly, if a user thinks the recognition is right, he (she) selects the character directly, or he (she) goes on his (her) writing, and the system will amend result sets at any moment in the process.

4. Conclusion and application expectation   After weighted AFDC method is adopted, data  mining technology is used to generalize sample base and get abstract knowledge, and sequenced radical sample base based on support is founded, Chinese characters? recognition performance in many aspects is greatly improved such as exactness, effectiveness, self- adaptability, robustness and intelligence, etc. It can be imagined that after this method is applied to real     software, it has less requirements for characters that need recognizing, and there is no need to train a system for each user in a designed way. As time is going, a system?s ?experience? accumulates, and sample base also evolves dynamically, and the system has distinguished expansibility. A user can define his (her) personal sample base, and a system can recognize traditional and simplified Chinese characters without extra measures.  A user may think it a great intelligent system.

Acknowledgements   The authors are thankful to the National Natural  Science Foundation of China and Shanghai Education Committee for providing support for this research (Grant number respectively: 70541009; 06FZ001).

