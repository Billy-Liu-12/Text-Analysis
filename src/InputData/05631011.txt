Real-time Motion Planning for Humanoid Robot Based on Embedded

Abstract-- A control and decision system based on embedded  system are designed with the features of humanoid robot. The  video which is captured by image processing system is recognized  through improved look-up table method. A smooth motion  planning algorithm for humanoid robot is proposed and next  several motions for humanoid robot are achieved by the local  motion planner based on the minimum consuming energy. For  the competition rules of sprint held in FIRA (federation of  international robot-soccer association), decision is made for  humanoid robot to plan the motions with the method of gait  generation off-line and adjustment on-line. Simulations for  image processing and sprint experiments on real humanoid robot  HIT-2 are achieved to verify the algorithm and decision present.

Key words-- motion planning; video recognition; humanoid  robot; vision system

I. INTRODUCTION  With the development of technology, Omnidirectional  locomotion is not restricted to wheeled vehicles. Spenneberg  and Kirchner [1] developed omnidirectional locomotion on  the robot with eight legs. Hengst et al. [2] described an  approach to generate omnidirectional walking for the Sony  ERS-110 Aibo dogs.

In the competition of humanoid robot, the flags adopted  for objective recognition and location is based on color space.

HIT-2 humanoid robot uses PDA?Personal Digital Assistant?

as the image processor to reduce the burden of underlying  data processing of robot. Image segmentation is mainly based  on the principle of threshold segmentation algorithm. There is  no color space alternative to choose to instead of other spaces  for all color image segmentation. Therefore, right color space  is need to chosen according to the features in robot soccer  games.

In this paper, we design a system based on embedded  vision for humanoid robot, and present an improved  looking-up table algorithm for image recognition. Meanwhile,  motion of turning for robot is planned and smoothed. A  trajectory of the next steps for robot is generated by the local    planner and finally, according to the rules of sprint for  humanoid robot in FIRA, a decision is made and experiments  on real humanoid robot HIT-2 are shown.

?. RELATED WORK  The potential market in the entertainment humanoid  robot has been attracted by scholars. Many different types of  humanoid robot have been developed. Among these studies,  motion planning from the starting point to reach the target  point for an autonomous robot is always a challenging work.

Because humanoid robot with multiple degrees of freedom of  its own properties often become very complex planning issues.

In the continuous process of research, there appeared a variety  of different control methods. Setiawan et al. [3] realized  online control of forward and backward walking by  connecting motion patterns generated in advance. Kajita et al.

[4] realized generation of online walking pattern applying  Three-Dimensional Linear Inverted Pendulum Mode to  humanoid type robot.

?. DESIGN OF EMBEDDED VISION SYSTEM AND  IMAGE RECOGNITION  A. Structure of vision system  The entire system adopts principle of hierarchical control  978-1-4244-7874-3/10/$26.00 2010 IEEE  and gets the image by the single camera. The information of  image is processed in the PDA (Personal Digital Assistant)  and the decision system also running in the PDA will get the  information and other feedback from sensors to call the  motion system executing.

B. Recognition of the color space based on improved Look-up  table  As we known, using look-up table approach can further  speed up the clustering speed. This approach adopts operation  of array indexes instead of N4 times comparison operation,  which greatly improves the efficiency of computing for  clustering algorithm. However, the disadvantage is its too  much storage space. According to this problem, an algorithm  based on improved look-up table is present to complete the  color space clustering.

The use of projection transformation can project the  pixels of image in the color space corresponding to the  coordinates onto the three axes of color components  respectively. Thus, the number of dimensions of clustering an    array of look-up table reduced to one dimension. J kinds of  color space can be expressed by three arrays of unsigned  integers with j-th bit. (HClass[0255], SClass[0255],  IClass[0255]). Where array HClass, SClass and IClass  represent each value of color respectively. The j-th bit of  elements in every array denotes the binarization results of the  j-th color. The clustering of pixels is achieved through bitwise  AND operation for arrays.

The nature of approach of improved look-up table  present in this paper is based on the multi-threshold for color  image segmentation. There are two advantages of this  approach.

1. By adopting j-th bit of unsigned integers to represent the  elements of array, only two times for bitwise AND operation  can determine the color category of pixels, which greatly  increased the speed.

2. By projecting three-dimensional color space onto a  one-dimensional axis, only three one-dimensional arrays can  express the color space and predefined color category, which  greatly save the memory space.

?.MOTION PLANNING FOR HUMANOID ROBOT  A. Motion planning for running  The energy is assumed not stored in every joints and the  energy cost function for moving can be defined as    T  T  E dt?

+  ?

= ? ? ? , where [ ] 11 2 3 4 5 6 7 8 9 10, , , , , , , , , ?? = ? ? ? ? ? ? ? ? ? ? is  the major torques during the motion of running,  and [ ] 11 2 3 4 5 6 7 8 9 10, , , , , , , , ,? ? ? ? ? ? ? ? ? ? ? ?= is the angles of joints of  the robot. Some angles described as bellow can be calculated  according to the Fig.1:  1 6 7 2 2 1  3 3 4 4 5 4  2 ,  ,  q q q q  q q q q    ? ? ? ?

? ? ?

= ? ? = ? +  = ? ? = ?

"""  Fig.1 picture of poses of humanoid robot during the process of  running motion  B. Smoothing for the complex gaits  The connection of complex gaits is question worth  studying. If the connection failed, the completely complex  gaits may fail. To smooth the connection between two gaits,  suppose the i? as the degree of joint in time i , so the next  degree of joint is 1i? + . If the i  is passed and the time 1i +  is coming, so the current degree of joint is 1i? + , and the next  degree of joint is 2i? + . For the smoothly connecting from  i? to 1i? + , we adopt the trigonometric function to time  difference. Suppose the beginning time is iT  and the ending  time is 1iT + , the transition angle ( )t?  and be obtained  from the following equations:  ( ) 1   sin   i i i  i  i i  t Tt  T T  ? ?? ?+  +    ? ?? = +  ?

?1?

And the angular velocity can be get by equation (2):  ( ) 1  1 1  cos   i i i  i i i i  t Tt    T T T T  ? ? ?

?+  + +    ? ?? =  ? ?

?      ?2?

Since the ( )t? is derivable between iT and 1iT + , the  connection curve is smoothing.

C. Local motion planner  Global scanning an unknown environment using vision  will take considerable time, and motion planning for  humanoid robot under unknown environment is a complex  project. Therefore, we design a local motion planner, which  can be defined as finding a feasible locomotion for the next  n steps based on minimum of energy dissipation. We design  some basic motions off-line including of forward one-step,  backward one-step, left one-step, right one-step, turn right and  turn left. These motions, which stored in the motion library of  robot are test on the flat floor and executed stably. The local  motion planner can use these basic motions for planning the  locomotion.

The local motion planner plans the local locomotion via  the information of itself and captured by the vision system. A  sequence ( )1 2, , nM M M M!  composed of basic motions  can be gotten according to the trajectory. Let  ( ), , , ,iM k t d e? denote the basic motion, where k is the  number of motion, t represents the time needed to finish the  motion, d is the distance from the projection of center of  gravity of robot under the former pose to the next pose after  finishing this motion, ? denotes the shifting angle between  the former pose of robot to the next pose completed by this  motion, and the e  means the energy consuming during this  motion, which is test by the experiments. The planner can  generate a feasible trajectory according to the principle of  least energy consumption. The minimum energy consuming  of sequence will be selected to execute. Since we select the  basic motion in the library by random, the computational  complexity will increase exponentially by the increase of  basic motions. The local planner just plans the two or three  steps next to robot in order to eliminate the time of    computing.

When the robot executes the sequence of motions, the  information gathered by the vision system and information  gained by the tilt sensor can help the robot to adjust its  location and keep stable.

D. Control decision for sprint  According to the rule of competition held in FIRA, the  decision for sprint of robot can be shown as in Fig. 2:  Fig. 2 geometric graph of playing field for sprint game of humanoid  robot  As shown in Fig.2, the circle with white color represents  the robot and during the sprint, its location can be different. L  is the left part of the centerline of runway and R is the right.

Because of the symmetrical relationship, only the situation of  robot in L is discussed. The green part is the safe region and  when the robot is in the red part which means danger, because  the robot may go outside of the runway if it adjusts its pose  when it is in the red part. The yellow part is the final region.

O represents the central of color and the origin of the  coordinate system. Ol represents the half of the horizontal  distance and Xt is the point gathered from the color block  during the sprint. The offset can bet expressed as Xc-Xt. S  represents the length of runway and D1 is the half of width of  runway. St is the vertical distance between the robot and color  block on real time. ? presents the angle deviate vertical  centerline from the robot. Xd is the horizontal coordinate  between the danger and safe zone. The flow of the algorithm  can be described as bellow:  Step 1: Recognize the target and gain the corresponding  coordinates of pixels.

Step 2: According to the values of Xt ,Xd and ?, the  location of robot is to be judged to whether need to be  adjusted. If not, then go to Step 4.

Step 3: Adjusting the location of robot by calling the  commands of motions.

Step 4: Whether the goal is reached? If yes then go to  Step 6.

Step 5: Call the command to make the robot run forward.

Go to Step 1.

Step 6: Call the command to make the robot run  backward. Then go to Step 1.

?. SIMULATIONS AND EXPERIMENTS    Fig.3 has shown the results of processing of red color  block, which can be achieved that under this light  environment, the robot can recognize the target very well.

The snapshots of HIT-2 robot in the competition of sprint  are shown in Fig.4. The interval of every snapshot is one  second. The experiment has shown that the robot can reach  the goal successfully.

Fig.3 pictures of image recognition  Fig.4 Snapshots of sprint for humanoid robot HIT-2  ?. CONCLUSIONS AND FUTURE WORK  A hierarchy control system based on embedded vision  system is proposed. The image is gathered by the camera  and decision is made to call the commands to execute the  motions in the motion library.

In this paper, we designed a humanoid robot based on  vision system and according to the features of sprint in FIRA.

The information of feedback of vision system could be  adopted as the chief sensor information for the decision  system. Motion planning for the local environment was  achieved by the local motion planner and the decision was  made for the sprint.

