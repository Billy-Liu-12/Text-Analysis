THE APPLICATION OF DECISION TREE IN CHINESE EMAIL

Abstract:  Email is a kind of semi-structured document, some  important attributes are contained in its structure, and  especially using spam-specific features could improve the email  classification results. In this paper, we apply decision tree data  mining technique to dig out the potential association rules  among these attributes of email, and then to identify unknown  emails category based on these rules. According to the  experiment of applying numerous Chinese emails to our email  classifier, the efficiency of our method is not lower than that of  other existing methods of checking whole email content text.

Meanwhile our method can reduce the cost of computation and  consumption of system resources.

Keywords:  Email classification; Decision tree; Association rule mining;  Spam-specific feature  1. Introduction  These days, email has become one of the fastest and  most economical forms of communication in all aspects of  every day life. However this connivance is diminishing by  the growth and availability of the emails. Nowadays, a typical  user receives about 20-40 email messages every day. For  some people hundreds of messages are usual. Thus, users  spend a significant part of their working time on processing  email. Not only SPAM (unsolicited email messages) is  flooding our mailboxes but locating important and vital  information among the huge number of emails has turned into  a laborious and time consuming daily activity. Therefore,  email management is an important and growing problem for  individuals and organizations.

As a result, there has been a growing interest in creating  automatic systems to help users managing an extensive email  ?ow. A classi?er is a system that automatically classi?es  emails into one or more of a discrete set of predefined    categories. Generally, the main tool for email management is  text classi?cation [1, 2, 3, 4].

But the nature of email classification is very different to  that of traditional text classification tasks. Email is  time-dependent, semi-structured and written in informal  format. Many email body belongs to the short text. When  some people communicate or exchange of personal  information through email, their mails body is only a few  words. The key features in short text is sparse, so the  accuracy of using traditional contents-based algorithms to  analyze body text only is not high.

This paper proposes a Chinese email classification  model, attempts to using decision tree technology to dig out  the association rules between the category and those features  extracted from email document, then to classify unknown  emails into a predefined categorization.

2. Related Works  Various methods or algorithms with respect to email  classification or filtering of spam had been proposed. For  example, comparing Black List and White List, using IP  address detection, filtering by keywords, automatic semantic  analysis and varied experience rules. However, these methods  tend to include some restrictions. For instance, IP address  detection requires the cooperation of ISP firms; the methods  of filtering by keywords and automatic semantic analysis  require the long-term operation for checking the content of  email which will consume plenty of time and costs. These  methods based on the static dataset, can not automatically  adapt to the situation as new types of spam emerge or  spammers change their behavior to avoid detection. So the  content-based system will be required.

There are so many approaches that is based on an  analysis of the content of the email in research literatures. For  example, [5] screened the spam by applying Byes classifier in  1998, because of its proven ability in text classification; [6]  classified spam and non-spam by Support Vector Machines  (SVMs) in 1999; [7] introduced a filtering method based on  clustering algorithms of data mining in 2002; [8] developed a  new asymmetric boosting method in 2007; [9] proposed a   2010 IEEE978-1-4244-6527-9/10/$26.00     Qingdao, 11-14 July 2010    kind of KNN (the K Nearest Neighbors) approach in 2006;  [10] proposed an incremental clustering-based classification  method in 2008. The paper [11] proposed a model based on  the Neural Network to classify personal emails and the use of  Principal Component Analysis (PCA) as a preprocessor of  NN to reduce the data in terms of both dimensionality as well  as size. The paper [12] proposed that in the classification  experiment for spam mail filtering, decision tree (J48)  showed better result than NB, NN, or SVM classifier. The  paper [13] designed a system that automatically identifies  messages belonging to the same activity, an electronic  commerce transaction, thereby providing a high-level view  that supports the use of email as a task manager.

3. Our Solution  In this paper, we try to check the attributes of email and  some spam-specific features, such as from, to, subject,  name of sender, address of sender, sending date, name of  recipient, number of recipients, receiving date, email size,  specific-character proportion, and so on. Then we apply  decision tree data mining algorithm to analyze the potential  association rules among these attributes of email. Based on  the association rules, we can classify unlabeled emails into  prede?ned categorization correctly, and avoid consuming a  lot of time to scan fully the content of email. Our model of  email classification is illustrated in Figure 1.

Figure 1.  The model of email classification  3.1 Attribute Extraction of Email  Usually three classes of features present in email:  unstructured text, semi-structured text, and numeric data.

Unstructured text in email consists of fields like the subject  and body, which may contain any natural language text.

Semi-structured text fields, such as from and to, are very  well defined, both syntactically and semantically. The paper  [14] found that, even used in this simple way, categorical text  fields are useful in email folder classi?cation, especially  when combined with unstructured data, such as the body. The  paper [15] showed that the emails header session could be    utilized to efficiently filter out spam emails in 2007. Numeric  Data in email includes such features as the message size,  number of recipients [7], and counts of particular characters  [2].

We found that using spam-specific features could  improve the classification results. For example, the size of the  advertising mail is not more than 200,000 bytes; the image  quantity in ads mail is usually between 2 to 5, and its average  file size is between 1k to 3k; the number of words in  political-related message is often more than 1000 above, the  hyperlinks quantity in adult sexual mails is usually between 5  to 8; and if the E-mail attachments contain audio files or  video files, it usually is a personal message. In order to avoid  keyword detection of spam filters, spammer often confuse  some special characters to the subject or body text. Therefore,  a high proportion of special characters in a message show  that it has a higher risk of junk mail. So we use key attributes  extracted from the emails header session, body, and  attachment, to help the classification. Part of the attributes  our used are listed in Table 1.

TABLE 1. PART OF THE ATTRIBUTES LIST  No. Attributes Meaning  1 X-Mailer is in abnormal format  2 Number of received field  3 Field of sender contains abnormal symbols  4 Senders mail address is in the black list  5 Senders mail address is in the white list  6 Sender mail address is a forgery  7 Subject contains Re:  8 Subject contains Fw:  9 Proportion of special characters in subject  10 Subject contains keyword of spam  11 Time filed is abnormal  12 Body contains keyword of spam  13 Proportion of special characters in body  14 Size of mail  15 Words of body  16 The image quantity in email  17 The average image file size  Classification  Data preparation  The vector    generation  Attribute  extraction  The word  segmentation  Training  Training emails  Decision tree  construction  Rules database  ClassificationUnlabeled email  Labeled email    Qingdao, 11-14 July 2010    18 The hyperlinks quantity in body  19 The HTML Tag quantity in body  20 Attachments file type      We take numerous emails collected in advance as the  training data. Each training email should be recorded as a  vector Mi= (A1, A2, , Ak, Cj), where Ai (i=1 to k) represent  attributes extracted, and Cj represent the category to which  each training mail belongs.

Attributes value should be assignment 1 or 0 when it  is Boolean type, or assignment predefined constant value  when it is string type, or direct use the quantity value when it  is numeric types. Note that a keyword table is necessary for  checking attributes of email. A samples set is illustrated in  Table 2.

TABLE 2. A SAMPLES SET LIST  A1 A2 A3  A13  A18  C  1 15 1  0.22  5  1  0 20 1  0.78  4  1  0 1 0  0.05  0  2    0 1 0  0.53  0  6  3.2 The Process of Rule Training  We apply the decision tree data mining algorithm C4.5  to find the association rules between the target attribute and    those critical attributes of training emails. C4.5 is an  algorithm used to generate a decision tree developed by Ross  Quinlan [16]. C4.5 is an extension of Quinlan's earlier ID3  algorithm. It can avoid over fitting the data, handle  continuous attributes, and improve computational efficiency.

In order to handle continuous attributes, C4.5 creates a  threshold and then splits the list into those whose attribute  value is above the threshold and those that are less than or  equal to it [17]. We also perform error-based pruning to reduce  overfitting in the decision tree learning.

C4.5 takes information gain ratio as attribute choice  criterion to avoid the preference bias. The formulas (1)-(4) of  GainRatio are listed below.

)(  )()(  TSplit  TGainTGainRatio =             (1)  )(  ||  ||)()(   i  K  i  i TInfo  T  TTInfoTGain ?=  ?  =  (2)    ||  ||  ||  ||)( 2  1 T  Tlog  T  TTSplit i  K  i  i    ?=  ?  =  (3)    ||  ),(  ||  ),()( 2  1 T  TCflog  T  TCfTInfo j  NC  j  j  ?=  ?  =  (4)    In formulas above, T is the training emails set in current  node, |T| is the number of emails in T, NC is the number of  categories, Cj is the No. j category in the categories, and f(Cj,  T) is the number of emails belong to Cj. After splitting by an  attribute, T set should split into T1, T2, , Tk, and K is the  number of subset.

The potential association rules would have been  constructed in the resulted decision tree after the C4.5  algorithm terminated. An example of if-then rule is shown as:  (1) IF A2 > 1 and A13>0.64 THEN C=3;  (2) IF A2 > 1 and A13 <=0.64 and A15>1000 and A18 <=3  THEN C=2.

The meaning of rule (1) is that if the number of received  field is above 1 and Proportion of special characters in body  is more than 0.64, then it belongs to ads spam.

3.3 Classification of Unlabeled Email  Based on the association rules, we can judge the  unlabeled email to be labeled. When an unlabeled email  arrives in our system, the information contained in it will be  checked and recorded as the attributes vector. The unlabeled  email will dovetail with some association rule of the    associated category in the rule database. Thus, each email  should be classified into one category predefined.

If a unlabeled email can not fit all rules in the rule  database, we will label it as unrecognized-mail. After labeled  it by manual, a re-training will be performed, to update the  rules database.

4. Experimental Results  Then, we arrange 1000 Chinese emails for the  experiment, which are composed of 500 spam emails and 500  legitimate mails, all of them are labeled sexual, political,  advertising, personal, or working by manual. We take 800  emails as training samples, and 200 emails as test samples. In  our experiment, the number of attributes extraction is 30. The  experimental result of this research is recorded in Table 3.

TABLE 3. EXPERIMENTAL RESULT  Category Sexual(%)  Political  (%)  Advertising  (%)  Personal  (%)  Working  (%)    Qingdao, 11-14 July 2010    Recall 100 99.67 99.26 98.33 98.67  Accuracy 96.91 96.33 97.56 96.67 97.89  5. Conclusions  In this paper, we propose an efficient email classification  method based on decision tree data mining technique. We dig  out the association rules among specific features in the email,  and apply these rules to label unknown emails category.

Different from those methods of checking the complete  content of email, we judge email simply by its attributes  without screening overall content of email. Obviously,  according to the datum of experiment, the efficiency of the  method proposed in this paper is not lower than that of other  present methods of checking email content. Meanwhile our  method reduces the cost of computation and it wont    consume too many system resources.

Acknowledgements  This work was financially supported by the National  Natural Science Foundation of China under Grant (No.

