Greenhouse Monitoring with Wireless Sensor Network

Abstract - In modern greenhouses, several measurement In the past generation greenhouses it was enough to have points are required to trace down the local climate parameters one cabled measurement point in the middle to provide the in different parts of the big greenhouse to make the greenhouse information to the greenhouse automation system. The automation system work properly. Cabling would make the system itself was usually simple without opportunities to measurement system expensive and vulnerable. Moreover, the control locally heating, lights, ventilation or some other cabled measurement points are difficult to relocate once they are installed. Thus, a Wireless Sensor Network (WSN) activity, whichwas affecting the greenhouse interior climate.

consisting of small-size wireless sensor nodes equipped with This all has changed in the modern greenhouses. The typical radio and one or several sensors, is an attractive and cost- size of the greenhouse itself is much bigger what it was efficient option to build the required measurement system. before, and the greenhouse facilities provide several options  In this work, we developed a wireless sensor node for to make local adjustments to the lights, ventilation, heating greenhouse monitoring by integrating a sensor platform and other greenhouse support systems. However, more provided by Sensinode Ltd. [1] with three commercial sensors measurement data is also needed to make this kind of capable to measure four climate variables. The feasibility of the automation system work properly. Increased number of developed node was tested by deploying a simple sensor measurement points should not dramatically increase the network into Martens Greenhouse Research Foundation's greenhouse in Niirpio town in Western Finland. During a one automation system cost. It should also be possible to easily day experiment, we collected data to evaluate the network change the location of the measurement points according to reliability and its ability to detect the microclimate layers, the particular needs, which depend on the specific plant, on which typically exist in the greenhouse between lower and the possible changes in the external weather or greenhouse upper flora. We were also able to show that the network can structure and on the plant placement in the greenhouse.

detect the local differences in the greenhouse climate caused by Wireless sensor network (WSN) can form a useful part of various disturbances, such as direct sunshine near the the automation system architecture in modem greenhouses.

greenhouse walls. This article is our first step in the area of Wireless communication can be used to collect the greenhouse monitoring and control, and it is all about the measurements and to communicate between the centralized developed sensor network feasibility and reliability. Data control and the actuators located to the different parts of theanalysis, control solutions and more complex network setups will be left to be the main directions of our future work. greenhouse. In advanced WSN solutions, some parts of the  control system itself can also be implemented in a distributed manner to the network such that local control

I. INTRODUCTION loops can be formed. Compared to the cabled systems, the The most important factors for the quality and installation of WSN is fast, cheap and easy. Moreover, it is  productivity of plant growth are temperature, humidity, light easy to relocate the measurement points when needed by just and the level of the carbon dioxide. Continuous monitoring moving sensor nodes from one location to another within a of these environmental variables gives information to the communication range of the coordinator device. If the grower to better understand, how each factor affects growth greenhouse flora is high and dense, the small and light and how to manage maximal crop productiveness [2]. The weight nodes can even be hanged up to the plants' branches.

optimal greenhouse climate adjustment can enable us to WSN maintenance is also relatively cheap and easy. The improve productivity and to achieve remarkable energy only additional costs occur when the sensor nodes run out of savings - especially during the winter in northern countries batteries and the batteries need to be charged or replaced, but [3]. the lifespan of the battery can be several years if an efficient  power saving algorithm is applied.

In this work we took the very first steps towards the reference values to certain environmental variables, and then wireless greenhouse automation system by building a the greenhouse automation system targets to keep the wireless measuring system for that purpose and by testing its variables in these values. The optimal levels of water and feasibility and reliability with a simple experimental setup. fertilizer can also be defined [5].

We integrated three commercial sensors to Sensinode's Carbon dioxide (CO2) is a natural gas, which is sensor platform [1]. By using these sensors, we are able to dangerous for humans in high concentrations, but a lifeline measure four parameters, which are crucial in greenhouse for trees and plants. The air consists of nitrogen, oxygen and climate adjustment: temperature, relative humidity, light carbon dioxide. In the photosynthesis process, the plants irradiance and air carbon dioxide content. The platform uses convert CO2, water and light into glucose and oxygen 6LoWPAN protocol, which allows us to send compressed according to IPv6 packets over IEEE 802.15.4 networks.



II. RELATED WORK 6H20+ 6CO2 + light- C6HI206+602  The Rinnovando group [4] is doing research work in a Thus, CO2 is an important greenhouse climate variable, tomato greenhouse in the South of Italy. They are usin which enhances the growth of the plants. Sunshine and lights  humidit increase the amount of carbon dioxide. During the summer,Sensicast devices for the air temperature, relativity humd the greenhouse gets the C2 it needs from the natural air,and soil temperature measurements with wireless senso when ventilation and roof windows are open [3]. In norther network. They have also developed a Web-based plant countries this opportunity does not exist during the winter.monitoring application. Greenhouse grower can read the Grower can use pure extra CO2, or he can produce moremeasurements over the Internet, and an alarm will be sent to carbon dioxide by C burner. Some reenhouse heatin his mobile phone by SMS or GPRS if some measurement y variable changes rapidly. The Rinnovando group has a test systems re-circulate their CO2 emissions into the greenhouse bed in 20 x 50 meters tomato greenhouse. In their test bed, making double advantages for the producer [2]. The use of six nodes are deployed into two rows 12.5 m apart from each external CO2 offers also a way to tie the carbon dioxide other. One mesh node works as a repeater and improves the collected from some industrial process to the biomass grown throughput of the communication. Bridge node gathers data in the greenhouse instead of emitting it to the atmosphere.

from other sensor nodes, which transmit the measurements The optimal greenhouse air temperature depends on theintended level of the photosynthetic activity. Each plantof temperature and relative humidity in one minute intervals has its own o y y[4]. species hslSonoptimal values of air temperature and*4 . active radiation of light, which enable the maximumLiu et al. [5] have developed and tested a WSN prototype acierdaino ih,wiheal h aiu forenvironmentalem onitorn insid thsedgreeNhprouse.te photosynthetic activity (see Figure 1). Soil temperaturefor environmentar topol og netor of Crossbo MICA plays also an important role. Conduction heat transfers  moteus.ngThe motes measurey temperatuore humi .An directly to the soil structure and through convection betweenmotes. The motes measure temperature, humidity and soil thplnrosadwtefowrudtemmoisture, and send their measurements to the sink node in th.ln ot n ae flo aonthmioisture,ntservlsSheir measurements tothesink nodein A main concern in humidity and temperature control is tofive minutes intervals. Sink node is a combination ofMICAz ymote and MBS 10 boad with daa termina.Th temia provide the best conductivity to active movement of waterwithandA Mpr IOcessoarmdule stho thermialaTetm earement and nutrients through the plant. Humidity control is also anwithnLC- ceside theg hou s the dataeto important tool to prevent the spread of plant diseases in in CD-crennsde he renhoseanddelves te atato  greenhouses. Normally, the range of healthy relativethe main PC by using GSM module. The central PC located ghouses. Normally th frang to healtHy ati further apart from the network takes care of data logging and midty r the plant to 700n.H ha processing. Mote programming and data receiving is moisture reduces the reauired plant watering frequency. The possible through the RS-232 serial interface provided by gremenhoue automatin u ses thewtr ga sting  MIBS10 bard.The eceied SgnalStregth ndictor system, if the air moisture decreases under the targeted levelMIB5 10 board. The Received Signal Strength Indicator [6] (RSSI) values over the distance between nodes with different [6].

antena hightan polrizaion ngls wee copare to Temperature and humidity are closely linked together inantenna heights and polarization angles were compared to agrehu.Cod irasalwrmste-lineach other. Based on the results it was possible to conclude aagreenhouse. Cold airhan lowe moisture-holding that ~~ ~~~ ~ ~~. thlogs.omncto ag a civdwe capacity than warmer air, and therefore the decrease of the nodetha sameest corientation randemax an* hieve *hei relative humidity is a sign of increased air temperature [3].

Transpiration rate tells how many grams plant's leaf surfaceThe temperature difference in experimental measurement ygl p between two nodes, where one nodle was placed in the center cle tmt eesswtrvpu e iuebetween twondes,hereonendewaplaedinthecnter The greenhouse protects the plants from the extremeof the greenhouse and another near the greenhouse wall,  indiatestheexisenceof he mcrocimae laers 5].prevents the photosynthetic activity, the plants do not grow.

Horticultural lighting allows the grower to extend the

III. PLANT DEVELOPMENTAL FACTORS growing season. It enables a year-round producing of plants  The~~prdciiyo. h renos eed nmn or makes it possible for the grower to start sowing in early different~ ~ ~~~~~~~~lfatosMayrsac rjet r ouigt spring and continue season till the first frost. Plants need  these factors and their interdependencies. Grower can set the aot1-2huslgtt mrv rwh hntepat     are producing flowers or fruits the supplemental need of signal amplifier cabled sensor units cannot transmit the data light per day increases up to 16 hours. Figure 1 shows the correctly. Wireless sensor network does not have such photosynthetic activity in different wavelengths of light problems. Measured data can be sent directly to the gateway radiation [2]. node which is plugged in to the computer (see Figure 5), or  it can be transmitted in a multi-hop manner via router nodes, PhotosnthetiAc..t Radif the distance between the measuring nodes and thePhoto s~mthetic Activite Radiation computer exceeds the length of a single radio link. Besides  data collecting and control calculation, the computer also presents the climate variable values and statistics on theo80 4-~~~~~~~~ ~~srenfr the user. The computer runs the greenhouse  60 F climate control algorithm, and the new values for the control i 40 - signals are computed typically in every 15-60 seconds.jjjjjjjj I Control output signals from the computer have low 0 20_ |||||||||1*|| | ~ voltage (24 volts). Each output is connected to electronic  relay, which switches the equipment under its control on or 400 500 600 700 off through the second relay, which gives to the device the  ULTRA input voltage it needs. The control system is illustrated in VIOLET VISIBLE LIGHT INFRA RED Figure 2. Computer computes the intermediate time from the  output signal and then determines how long each relay is Fig. 1. Photosynthetic activity in different wavelengths of light turned on [2].

radiation. Figure from [2]. A modern greenhouse can consist of several parts which contain their own local climate variable settings. As a consequence, several measurement points are also needed.

ADJUSTMENTS CALCULATIONS V. EXPERIMENTAL SETUP IN A GREENHOUSE  Plumsp * A. The Greenhouse Environment ^ I ~~ootimun oldvlIyeO We made our experiments in Martens Greenhouse  Boiler Research Center's greenhouse in the Narpio town in Western  BTu ef Finland [7]. The size of the greenhouse was 18 x 80 metersX . IJand in its traditional control system it has only one cabled measurement unit in the middle.

Lununahoni Greenhouse's moist climate and dense flora are similar to Scr.eii| the surroundings of a jungle. This kind of environment is  challenging both for the sensor node electronics and for the C02 eiliieti I short-range IEEE 802.15.4 wireless network, which  mI I communication range is much longer in open areas.

Therefore, we limited the distances between communicating  MEASUREMENTS nodes to 15 meters in our deployment.

ieehlioiimo?nt1.

Outsidt e 11'otunet B. Sensor Nodes State of eqtupilet  The wireless sensor node we used was Sensinode's Fig. 2. Tasks in greenhouse environmental control. Figure from [2]. Micro.2420 U100 (see Figure 3) [6]. It operated as a basic  measuring node with a CC2420 802.15.4 RF-transceiver and a MSP430 Microcontroller. The gateway node was a

IV. GREENHOUSE CONTROL combination of U100 node and USB serial adapter board Greenhouse monitoring and control can be divided into (Micro.USB U600) [1]. Sensors were soldered to a board  three main tasks: Measuring, calculating and adjusting [2]. equipped with the needed components (resistors, capacitors These three tasks have their own functionalities as presented and operation amplifier). Then the sensor board (see Figure in Figure 2. 4 on the left) was plugged in to the Ut100 node through its  The measured values of the greenhouse climate variables I/O pins. The node and two 1,5V AA-batteries acting as a are first converted from analog to digital and then power source were sheltered by a plastic box (80*55*33mm) transmitted to the computer. Because of the high moisture in to prevent them from the humidity. Sensor board was placed the greenhouse, the computer is normally located outside. on the top of the box and sensitive electrical components Signal provided by the sensors is normally weak. Without were protected from the moisture by a plastic coating spray.

Finally, the whole board was enveloped by ESD plastic D. NodeDeploymentandNetworkArchitecture sachet leaving only the heads of the sensors outside.

We applied a simple star topology, where four nodes with temperature, luminosity and humidity sensors measured climate variables and communicated directly with the|nector gateway node. The gateway node acted as a coordinator and received the measured data from the sensor nodes. It was  C106k ~~~~~~located in the greenhouse entrance hall because the humidity ,.,. II ,,giW 7lE.|;0|=WA g nthere was 20-30o lower than inside the greenhouse. A  laptop computer was connected to the gateway node by Connector w R hing USB-cable.

Martens greenhouse was divided into vertical blocks and Fig. 3. Sensinode's Micro.2420 UIOO. The node is equipped the nodes monitored one block at a time. Figure 5 illustrates  with ZigBee radio, but it operates under 6LoWPAN how the sensor nodes were deployed to the greenhouse protocol. block. The idea of the vertical deployment was to get a  better understanding of the microclimate layers which Sensinode's devices are based on 6LoWPAN protocol typically exist in the greenhouse, and to figure out what kind  which enables transmission of compressed Internet Protocol of differences occur in the climate between lower and upper version 6 (IPv6) packets over IEEE 802.15.4 networks [8]. flora.

Sensinode's Nanostack protocol provides the use of 6LoWPAN and a standard Socket API for accessing the network. It works in 2,4GHz ISM band and offers 250 kbps data rate [9].

C. Sensors  Fast response time, low power consumption and tolerance against moisture climate made SHT75 relative humidity and temperature sensor [10] a perfect solution for the greenhouse environment. Temperature accuracy of the  and clock line are the same in both cases, but SHT75 has tmeauehmdt esr)adcro ixd esr only one pull-up resistor between data and power supply line. \  Luminosity was measured by TAOS TSL262R [11l], \ which converts light intensity to voltage. Unstable output/\\ signal is handledby low-pass filter to get correct luminosity values. . d hunnidlty 1-.

WoeissmounrtedIIirradiance, temelperaur andPhumiip.Dtyi.4esrbad(qupe ihlmnstn  sensors in t ofour nodes, but Carbon dioxide sensorwas tricky because it sets special requirements for the input voltage and the response time. Figaro's TGS4l61 [12];  alternahive, whch was the most compatible with low voltage U Itu sensor node. CO2 measuring takes longer time than other matewayiodey measurements and CO2 s ensorvoltage supply must be within  s0.sV from the 5 Volts. The carbon dioxide value can be s o read from the output voltage. Operation amplifier raises the orniuer(t b e voltage level of otherwise weak signal from the sensor. We Fig. 5. Experimental setup in Martens greenhouse.

end up to left the TGS4161 to be implemented in its own node which can also act as a router node in a multi hop Node 1 (see Figure 5) was placed 490 cm away from the network, which will be part of the future work. glazed side wall of the greenhouse. It was hanged in 120 cm  height and the distance to the edge of dense tomato foliage was 410 cm. Node 2 had 180 cm distance to the side wall and it was placed at the height of 176 cm. That location was a shadowy spot where the nearest lamp was broken. The length between the first plants and the device was 174 cm.

Node 3 measured the crown layer in 310 cm height just and the block where our sensor nodes were deployed, was in above the Node 1. Node 4 was in the middle of the the greenhouse's south end.

greenhouse block 930 cm away from the side wall and The temperature values measured by four wireless sensor hanged at a height of 295 cm. The distance from the node to nodes are shown in Figure 7. Local temperature values were the edge of the foliage was 135 cm. Node 2 and Node 3 are strongly influenced by the sunshine at the beginning of the shown in Figure 6. experiment period. Node 1 was far away from the  Periodical sleep and wake modes were applied. In its greenhouse ceiling and from both greenhouse walls. Thus, turn, each node woke up and turned on its radio for 15 the temperature stayed stable in its area for most of the time.

seconds, and went then back to sleep and turned off its radio The 15 minutes sampling period in the greenhouse control for 255 seconds (4 min 15 s). At a time, only one of the four system explains, why temperature raised over 30 Celsius in nodes equipped with temperature, luminosity and humidity some spots before the control system opened the roof sensors was reading data from the sensors and waiting data windows. Later on, a partly cloudy weather balanced the request from the coordinator. The coordinator took care of results between the nodes for the rest of the experiment.

data requesting, and the other nodes were only able to answer to the request. Thus, the coordinator acted as a master device, which polled data from the sensor nodes in TEMPERATURE certain time periods. Collisions between other node transmissions were easily avoided in this way. .E 1 ( r.value 246)  iNOE 2 fav. vale 25.Z) (avr  NOE4 arvalue =22S,14)   - 25  Fig. 6. The node 2 and node 3 (inside red squares) in a 5  greenhouse test setup.

'M WOW Me en in==- OM mn 40>1-- m,&,me C 'Mr 1 9 -=**X**s -t**s*gg**am*dgo X= cm XI  TIME

VI. RESULTS - %-- R- I I I-, - M M-  In our experimental setup, four nodes were deployed to Fig. 7. Temperature measurent results.

one greenhouse block to gather information about the differences in climate variables between lower and upper flora. Each node red temperature, humidity and irradiance values once in four minute intervals over three hours. During the experiment, the coordinator sent 200 data requests, and each sensor node responded 50 times. Ten packets with NODE 1 J 'lim=s 6AG readings were either lost or received incorrectly. That NODE 2 Wr. va[Lu =67X2] indicated 5% data loss rate in terms of packets. The maximal NODE 3 talr. value =S65; 27J communication range, 15 meters was figured out in NODE 4 vaua =5A1) individual test where the distance between the coordinator and the sensor node inside the greenhouse dense flora was increased until the connection was lost. We also observed that the reliable range in terms of tolerable packet loss was 70 approximately 10 meters. Compared to our previous ge experiment in an open parking lot, the reliable communication range fell to one third in the greenhouse's dense flora.

A fickle weather on the measurement day affected the 5  results. The sun was shining for a half an hour in the beginning of the test and later on during shorter periods of 40 the day. The greenhouse environmental control system, ,,,=,{+ Priva[13], adjusted the ventilation, heating and misting TIMIE w40"^t-o 4 according to new samples once in 15 minutes. Priva's - measurement box located in the middle of the greenhouse, Fig. 8. Relative humidity measurement results.

Node 3 and Node 4 were both placed on the crown layer Irradiance sensor does not have the sleep mode at all, and to of the tomato growth. A slant ceiling of the greenhouse save energy it have to be turned off most of the time.

made the distance between Node 4 and the ceiling three In the nearby future, we will develop a multi-hop meters longer than distance between Node 3 and the ceiling. network to cover the entire greenhouse. We will also attach Therefore, the measurements provided by node 4, indicated probes to the nodes so that the wireless nodes can be used to one degree lower temperature. Node 2 was located near the measure soil moisture and possibly other parameters from side wall of which the sun was heating raising the the flower pots, but still be flexibly moved with the pots or temperature measured by the node. from one pot to another. We are also considering the option  The relation between the humidity and temperature was to implement the C02 sensor to the network by connecting it explained in Chapter III. The measurements collected by the to the plug-in router node.

nodes verified the fact that the lowering of the relative In addition to networking in data collecting purposes, we humidity increases the air temperature and vice versa. Figure will develop the control part and close the wireless control 8 shows the changes in relative humidity between four loop. The control commands will be counted in a centralized nodes. Comparison between temperature and humidity or locally centralized manner, and then transmitted values (Figures 7 and 8) shows how variables are linked wirelessly to the actuators located to the different parts of the together. For example, two distinct drops in humidity are greenhouse. Required local control implementations suggest clearly to be seen in the Figure 8. Temperature values us to use DSP-units with some ofthe wireless sensor nodes.

increased at the same time when moisture dropped, as shown in Figure 7. Relative humidity did not differ much between REFERENCES the nodes. Node 1 and Node 2 were placed on a shadowy spot, and they measured a little bit higher moisture than [1] Sensinode (2007). OEM Product catalog. [Online]. Available: nodes on the upper layer. http://www.sensinode.com/pdfs/sensinode-catalog-20071 101.pdf.

[2] G. J. Timmerman and P. G. H Kamp, "Computerised Environmental VII. CONCLUSIONS AND FUTURE WORK Control in Greenhouses," PTC, The Netherlands, Page(s): 15-124, 2003.

In this work, we integrated three commercial sensors [3] Greenhouse guide. (Referred 20.04.2008). [Online]. Available: with Sensinode's sensor platform to measure four http://www.littlegreenhouse.com/guide.shtml.

environmental key variables in greenhouse control. Theenvironmenta key variables in greenhousecontrol. Te, [4] M. Mancuso and F. Bustaffa, "A Wireless Sensors Network forsystem feasibility was verified in a simple star topology Monitoring Environmental Variables in a Tomato Greenhouse," presented setup in a tomato greenhouse. We achieved up to 10 meter at 6t IEEE International Workshop on Factory Communication Systems in communication range with tolerable 5% packet loss. Torino, Italy, June 28-30, 2006.

Because of the high humidity and dense tomato growth, the reliable communehicathumiontrange w nsred tomao gron thid f [5] H. Liu, Z. Meng and S. Cui, " A Wireless Sensor Network Prototype for  0 Environmental Monitoring in Greenhouses," presented at Wireless the respective communication range in open space. The Communications, Networking and Mobile Computing 2007 (WiCom the local differences in the greenhouse environment, such as 2344 - 2347.

different climate layers which exist from greenhouse bottom [6] M. Aberg Secher, "Kasvihuone," Otava, Helsinki, Finland, Page(s): 25- to the top. 80, 1998.

High moisture forced to consider the possible damages [7] Martens Greenhouse Research Center Web-page, http://www.martens.fi and to protect sensitive boards carefully. When running the (referred 17.5.2008).

experiments, another board damaging factor was noticed.

Te pollent romthertoato flowers color rone noth bc [8] G. Montenegro and N. Kushalnagar, "Transmission of IPv6 Packets overThe pollen from the tomato flowers colored one Of the black IEEE 802.15.4 Networks," Internet-Draft, IETF, Septemper 2007.[Online].

plastic boxes yellow. Small particles of the pollen could also Available: http://www.ietf.org.

block the measuring component of the sensors, affecting the measuring results. [9] Sensinode (2007). NanoStack manual vl.0.1. [Online]. Available:  Applied 15 seconds wake periods between 4 min 15 s www,sensinode.com.

sleep periods fulfilled the requirements of the energy-sefe wirls sensor net aqrciectu. ach sensrg [10] Sensirion (2007). SHTlx / SHT7x Humidity & Temperature Sensor  v.3 .0.1 .[Online].Available:http://www.sensirion.com/en/pdf/product informnode was receiving and sending packets in its own turn ation /Data_Sheet_humidity_sensor_SHTlx_SHT7x_E.pdf according to the polling of the coordinator node. The sleep time of the node was 93.75%, which could be increased over [11] Texas Advanced Optoelectronic Solutions Inc. (2003). TSL260R, 97.50% by shortening the operation time from 15s to five TSL261R, TSL262R Light to voltage optical sensors. [Online].

seconds. Available:http://www.roborugby.org/docs/Taos-TSL260R.pdf.

Sensorswere turned on all the time. Both, 5HT7. [12] Figaro engineering inc. (2003). TGS 4161 - for the detection of Carbonhumidity/temperature sensor and TSL262R light irradiance Dioxide.[Online].Available:http://www.figarosensor.com/products/416lpdf.

sensor are suitable for the low power nodes. Especially, the SHT75 with low current sleep mode and accurate sensors is [13] PRIVA - Greenhouse Environmental Control Systems. [Online].

