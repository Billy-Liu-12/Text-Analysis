A SAR-Based Interesting Rule Mining Algorithm*

Abstract  Association rule mining is one of the most important fie& in data mining. Rules explosion is a problem of concern, as conventional mining algorithms often produce too many rules for decision makers to digest.

This paper discusses how to mine interesting rules with the .antecedent constraint being positively associated with the consequent. Notions of simple association rules (SAR), interestingness measures and antecedent constraints are incorporated in the process of interesting rules discovery.

The entire set of interesting rules can be derivedjom the simple rules without any information loss, and the proposed SAR-based mining algorithm performs better than conventional methods by reducing the number of ct.rzdidate rules.

1. Introduction  Association rule mining, one of the important areas of data mining, is meant to discover the association between different attributes in large databases [l]. For a given transaction database T, let I = {Ii, i=l,...,m} be a set of literals, called items. An association rule can be regarded as a relationship in forms of X a Y ,  where X and Y are two sets of items (hereafter referred to as itemsets), XnY=0. Two measures, namely the Degree of Support (Dsupp) and the Degree of Confidence (Dconf), are used to define a rule. A rule X s Y  can be obtained if Dsupp(X3Y) = llXYll/ IT1 2 Min-supp and Dconf(X=Y) = llXYll / llX/l 1 Min-conf, where llXll is the number of transactions that contain X, IT1 is the total number of transactions in database T, Min-supp and Min-conf are ~ M D  given thresholds. In this paper, the set of all rules satisfying the thresholds is denoted as Y:  Y = {r: XzY I X, Y c I, and XnY = 0, Dsupp(r) 1 Min-supp, Dconqr) 2 Min-conf) .

In accordance with this, the basic Apriori algorithm was introduced and often regarded as a conventional method [2].  However, association rule miners often generate thousands of rules that cannot easily be handled  or digested directly by decision makers, which leads to the concems of rule interestingness. Existing studies on interestingness have addressed a variety of issues and concems: (1) Many interestingness measures have been defied, upon different semantics to represent the relationship inherent between the antecedent and the consequent of a rule, such as gain, laplace, l$, influence, conviction and improvement [3 ,  8-91; (2) Item constraints could be incorporated into the rule generation process so as to derive certain forms of rules more effectively [IO]; (3) The simplicity is an important aspect of interestingness.

For example, simple association rules were introduced to eliminate redundant information [4-51; (4) Another direction is to extend the notion of association rules, giving rise to various extensions such as generalized association rules [ 1 11, quantitative associatior. rdes [ 121, fuzzy association rules [6-71.

Although each of these studies focused on a specific aspect of interestingness, few efforts incorporated various aspects of interestingness together into the process of rule mining. Practically, decision makers might only be concerned about rules with the antecedent constraint positively associated with the consequent. For instance, a storekeeper wants to discover interesting rules in the form of ?P and ? = Q ,  meaning that the customers who at least bought P also bought Q, where P was positively associated with Q. Such focused rules, concerning several semantics of interestingness, can be found from all the rules generated by conventional mining methods. Of course, it will be desirable if the available information could be incorporated into the rule generation process so as to derive the rules more effectively. in accordance with these concems, interestingness measures, item constraints and the ideas of simple association rules are co,.*;idered in the process of mining interesting rules with given antecedent constraints in this paper.

2. Problem statement and definitions  2.1. Interestingness measure  - *  Partly supported by ?Nation?s Outstanding Young Scientists Funds? of China (No. 79925001), and the Bilateral Scientific and Technological Cooperation Programme Between China and Flandres (1 74B0201).

0-7803-7461 4/02/$17.00 0 2002 IEEE 178    Lift, a well-known interestingness measure, represents a test of statistical independence [13], and can be used to evaluate a rule in terms of the relationship between the antecedent and the consequent.

Definition 1. Given X, Y c I, XnY = 0: DconflX - Y) Lift(X a Y) =  DSUPP(Y) Furthermore, Conditional Lift is defined to represent  the relationship between subsets of items in the antecedent and the consequent.

Definition 2. Given X, Y, Z c I, XnY = 0, YnZ = 0, xnz  = 0:  Dconf(XY Z) Dconf(Y Z)  Lift(X I XY a Z) =  . For Lift(P 1 X3Y)  with Pfl ,  if LifC-1, then the (subset of) itemset in the antecedent is positively associated with the consequent; if Lifkl, then it is independent of the consequent; and if Lift<l, then it is negatively associated with the consequent. For instance, given rule rl: ?Beer and Mea- Diaper, with Dsupp=15%, DconF70%? and r2: ?Beer 5 Diaper, with Dsupp=20%, DconF80%, we have that ?Meat? is negatively associated with ?Diaper?, for Lift(?Milk?lrl)=Dconqrl) /Dconf(rz)=7/8<1, then rl is regarded to be uninteresting.

2.2. Interesting association rules  Prior to defming the interesting association rules, some properties of association rules are worth notirig:  Lemma 1. Given X, Y, Z, P c I, XnY = 0, YnZ = 0, xnz = 0, PsX: (1) Dsupp(X3YZ) = Dsupp(XY=S) = Dsupp(XZ3Y) (2) Dconf(X3YZ) = DconflXsY).Dconf(XY-Z) = DconflX=Z)*Dconf(XZaY) (3) Lift(P I X=YZ> = Lift(P I X*Y).Lift(P I XYsZ) = Lift(P I XaZ).Lift(P I XZaY) Proof: (1) According to the definition of Dsupp, we have Dsupp(X3YZ) = Dsupp(XYZ) = Dsupp(XY2Z) = Dsupp(XZ=Y).

(2) According to the definition of Dconf, we have  - - Dsupp(XY). Dconf(XY a Z)  = DconfO( * Y) . DconfO(Y a Z) By exchanging Y and Z, we obtain, Dconf(X*YZ) = DconflX5Z).DconflXZ=Y)  DSUPP(X)  (3) According to the definition of Lift and Conditional Lift, we have  Dconf(X * YZ) DconQG - P) 3 YZ) Lift(P 1 X 9 YZ) =  U  Theorem 1. Given X, Y, Y?, P c I, XnY = 0, P G , Y?cY, for a rule r: XaY,  if there exists a rule h: XaY?, where such that Lift(P I h)Sl, then there exists a rule 6: XY?=(Y-Y?), such that: (1) Dsupp(5) = Dsupp(r); (2) DconflE,) 2 Dconflr); and (3) Lift(P I 5)  2 Lift(P I r).

Proof: According to lemma 1, we have: (1) Dsupp(6) = Dsupp(XY) = Dsupp(r) 2 Mh-supp; (2) Since Dconflr) = DconflX-Y) = DconflXaY?) + Dconf(XY?=(Y-Y?)) = Dconf(h)-Dconf(C) and Dconf E [0, 11, we have Dconf(6) 2 Dconflr) 2 Min-cone (3) Since Lifi(P(r)=Lift(PI X=Y)=Lift(P(X-Y?).Lift(PlXY?=(Y-Y?)) and Lift(P1 XaY?) =Lift(Plh)ll, we have Lift(P I ?,) 2 Lift(P I r).

According to Theorem 1, rule 5 contains the same items as rule r does. Furthermore, Dsupp, Dconf, and Lift of 5 are greater than those of r. Therefore, 6 expresses the information about the relationship among itemset XY in a more interesting way. Thus, r should be filtered out as a redundant rule.

Furthermore, interesting rules with antecedent constraint P, P d ,  being positively associated with the consequent, can be defined as follows:  Definition 3. Given X, Y, P c I, XnY = 0, Min-supp and Min-conf, rule r: X-Y is an interesting association rule with antecedent constraint P, if:  (2) Dsupp(r) = Dsupp(X=Y) = Dsupp(XY) 1 Min-supp; (3) Dconflr) = Dconf(X3Y) 2 Min-conf; (4) For any rule r?: X-Y?, where Y?sY, Lift(Plr?)=Lifl(P  (1) p E x;  I X=Y?)>l.

From the perspectives of novelty and correlation, both interestingness measures and antecedent constraints are incorporated in the process of rules discovery. Decision     makers can then focus on specific forms of rules they are really interested.

In this paper, let Y denote the set of all rules, i.e., Y = {r: X a Y  I X, Y c I, and XnY = 0, Dsupp(r) 2 Min-supp, Dconf(r) 1 Min-cod, and I3 denote the set of all the interesting rules with antecedent constraint P. i.e., n={r: X a Y  I X,Yc I, XnY = 0, PEX, Dsupp(r) 2 Min-supp, Dconf(r) 2 Min-conf, and Lift(P 1 r?)>l, Vr?: XaY?, Y?cY}. Furthermore, Il can be partitioned into several subsets according to the number of items in the consequent,  Ill-PI n =  Unk k=l  nk denotes the subset of J3 with k items in the consequent, k l ,  2, ..., III-IP/ ( 111 and jPI are the number of items in I and P, respectively).

3 SAR-based interesting rule discovery  From the perspective of rule simplicity, a set of simple association rules (SAR) each rule with its consequent containing only a single attribute has been introduced in rule discovery [5 ] .  Let Y, denote the set of SAR: Ys ={r: X=A I X c I, A E I, XnA = 0, Dsupp(r) 2 Min-supp, Dconflr) 2 Min-conf). The number of SAR is much less than the number of all rules. Moreover, rule set Y, can derive the entire rule set Y without any information loss.

Furthermore, this paper incorporated the notion of SAR into the process of interesting rule discovery.

Definition 4. Let R be association rule sets. A rule r is called to be derived from R, denoted by r Ed R, if rER or Dsupp, Dconf and Lift of rule r can be expressed by Dsupps, Dconfs and Lifts of rules in R in forms of Lemma 1.

For instance, given A, B, C, P c I, AnB = 0, BnC = 0, AnC = 0, PEA, rule h: A=>B and 5: AB-C E R, for rule r: AaBC:  (1) Dsupp(r) = Dsupp(ABC) = Dsupp(S), (2) Dconf(r)=Dconf(A=BC)=Dconf(AaB)-Dconf(ABa C)=Dconf(h)-Dconf(C); and (3) Lift(Plr)=Lift(P I h).Lift(P 1 5). Thus, we have r Ed R.

Apparently, all rules in R can be derived from R.

Theorem 2. Given Min-supp, Min-conf, and antecedent constraint P, P a ,  let Ys denote the set of SAR with antecedent constraint P: Y, ={r: X-A I X c I, A E I, XnA = 0, PEX, Dsupp(r) 1 Min-supp, Dconf(r) 2 Min-conf), I l l  denote the set of all the interesting simple rules with antecedent constraint P, n1={r: X s A  I X c  I, A E I, XnA = 0, PgX, Dsupp(r) 2 Min-supp, Dconf(r) 2 Min-conf, and Lift(P I r)>l}, (Ill c YS). We have:  (1) If r d I ,  then rEd Y,; (2) II={r: X-Y I rEd\fls, X, Y c I, XnY = 0, P o ,  Dsupp(r) 2 Min-supp, Dconf(r) 2 Min-conf, and Lift(Plr?)>l, Vr?: XaY? ,  Y?cY}.

Proof: (1) First consider a rule r with one item in its consequent: X a I i  in Ill, obviously r is also a member of n. Now consider a rule r in n with k items in its consequent, without loss of generality: X=1112.. .IkEnk, 2sk<lIl-IPI. According to Lemma 1, Dsupp(r)=Dsupp(X  It. .  .Ik-ldk), Lift(Plr)=Lift(PJX=Il12.. .Ik-l).Lift(PIXIIIz.. .

Dconf(r), Dconf(XIIIz.. . Ik.l=Ik)2Dconf(r) and Definition  Again, by applying Lemma 1 to Xa1112. ..Ik-l, Dconf(r)  II12.. . i k - 1 d k ) ,  Lift(Plr)=Lift(PIXaI,I,. . .Ik-2).Lift(PIXII  and XI112.. .1k-2=& EY~. Similarly, repeatpdly using Lemma 1, we will finally have: Dsupp(r)=Dsupp(XI, I2 ... IL-I-Ik), Dconflr)=DconfCX=Il).Dconf(XI la 12). ..: DconfTX1112...Ik~l~~k), Lift@ I r) = Lift(P 1 X -I1)*Lift(P IX1112=12)-. . :Lift(P IX1112.. .Ik-laIk), where  Since Dsupp, Dconf and Lift of r can be expressed by Dsupps, Dconf and Lifts of rules in Y,, we conclude that r  (2) On one hand, if r d 3  then P a ,  Dsupp(r) 2 Min-supp, Dconqr) 2 Min-conf, and Lift(Plr?)>l, Vr?: XaY?, Y?cY by definition; also according to (l), red  Y,. On the other hand, if rEdYs, and PEX, Dsupp(r) 2 Min-supp, Dconf(r) 2 Min-conf, Lift(Plr?)>l, Vr?: X-Y?, Y?EY, then r d I .  Thus, n={r: X-Y I rEdY,, X, Y c I, XnY = 0, P a ,  Dsupp(r) 2 Min-supp, Dconf(r) 2 Min-conf, and Lift(Plr?)>l, Vr?: X-Y?, Y?sY} Theorem 2 states that (1) all interesting association rules in II can be derived fiom the simple rule set Y,; and (2) applying thresholds of Min-supp, Min-conf and Lift(Plr?)> 1 onto the derived rules will result in exactly the whole interesting rule set n.

1112 ... Ik-IaIk), Dconf(r~DconfO(aIII z...Ik-l).Dconf(XII  Ik-laIk). And according to Dconf(XdlIz.. . Ik .1)2  3, We have XaI1  12...1k-l E n, and X1112...1k-l a r k ?  ys.

=DconflXdl12.. . Ik-z)*DCOIlf(XI112.. .Ik.2aIk-l)?DCOnf(X  12. .. Ik-2~Ik-1)?Lift(PIxIlI2 ...Ik-l~Ik), X3I I  12.. eIk-2 E n,  x=2?IlEn, and X a I l ,  XI1312, ..., xIlI2...Ik-I- Ik ?Ys.

E d  ?ys-  3.2. Algorithm of interesting rule mining  In accordance with Theorem 2, a SAR-based algorithm to mine interesting rules has been developed as follows:  Step 1. Generation of Simple Association Rules Input: Dataset; Min-supp; Min-conf; and P.

Output: Simple rule set Ys, interesting simple rule set Il l // (P U p) is a (IPl+k)-fiequent itemset, IPI is the number of items in P.

//Fk = {(P U a)> is the set of (lPl+k)-fiequent itemsets with antecedent constraint P //The following codes are the process of generating Y, and Ill from fiequent itemsets.

1 for each P u t  ? Fk, k 2 1; 2 s k - 1 =  {O<-l)-itemsets P"' 1 P c a>; // fk-1 can be 0 3 for each a-' E S t l  8 end for; 9 end for;  Dconf = JIP U all / IIP U P"'I1; if Dconf2Min-conf then Y,CP U &-1& - e-'); if DconfiMin-conf and Lifb 1 then Lift = (IIP U all / IIP U *-'I])/ (llfll/ l$'-'Il);  rIlcPa-'3(a-a-l);  TID # 1  #2 #3 #4  #5  #6 #7  Step 2. Derivation of All Interesting Rules From Ys Input: Ys, 111, and Min-conf.

Output: Set of all interesting rules, i.e. ll.

1 k=l; 2 while nk#0 3 nk+1=0; 4 for each r: XaI i l  Ii2 ... I&, r d I k 6 Dconf = Dconf(r).Dconf(h); 7 Lift = Lift(Plr)-Lift(P(h);  9 end for; 10 endfor; 11 k=k+ 1; 12 end while;  for each rule ?L X Iil IQ.. .I& =&+I, k Y S  if iL+'>ik and Dconf 2 Min-conf and Lift> 1 then &+lCX=IilIit.. . I&I&+l;  Itemset A D E B E A B D E BDE B C D A B E A C D E  4. Example and experiments  4.1. An Example  An Example is given to illustrate the process of SAR- based interesting rule discovery. For a given databset in Table 1, Min-supp=lO% and Min-conf=60%, and the antecedent constraint is A, Ad(.

As shown in Table 2, the first step of SAR mining discovered Ys including 10 simple rules (#l-10); eight of these SAR (#1-8) with Lift(A1 r)>l are interesting and compose the interesting simple rule set I l l .  In the second step, all the interesting composite-consequent rules can be derived fiom Y,, e.g. rule "#11 A-DE'EII~ is derived fiom "#l AaD" and "#5 ADaE". The mining process contains 21 candidate rules (20 in the process of SAR mining, and 1 in the process of rule derivation), while 33 candidate rules should be evaluated in conventional methods. Therefore, the SAR-based algorithm performs better than conventional algorithms.

Table 2. Interesting rules (Min-supp= lo%, Min-conf-60%, antecedent constrainFA)  4.2. Experiments and analysis  Since the simple rule set is a subset of the set of all rules, the number of simple rules is usually smaller than that of all rules, especially when Mh-supp and Min-conf are closed to 0. In the first step of SAR-based algorithm, the simple rule set, instead of the entire rule set, is generated; and in the second step, if some items do not appear in any rule as its consequent, then no any other rule with these items as part of its consequent will be derived.

Therefore, the number of candidate rules generated by the SAR-based algorithm will be less than that by the conventional methods. Moreover, when interestingness measure and antecedent constraints are incorporated, the size of simple rule set (therefore the number of candidate rules) could be reduced farther.

In order to show the advantage of the SAR-based  mining algorithm over conventional methods, four pairs of comparative experiments were carried out. These experiments tested the influence of four factors: (1) Min-supp, (2) Mh-conf, (3) number of attributes (NA), and (4) average length of record (ALR), on the     experiment results, respectively. Meanwhile, the ratio of the candidate rule numbers of SAR-based algorithm (New) to that of conventional method (Old) was the comparative measure. The experiments results revealed (i.e., Figures 1 4 )  that: (i) The experiment results revealed that the number of candidate rules by SAR-based algorithm was 40% - 50% smaller than by conventional methods; and (ii) the advantage of SAR-based algorithm over conventional methods, represented by the ratio of candidate rules (New/Old), is more remarkable for lower Min-supp, higher Min-conf, and databases with fewer attributes and higher density.

0 80000 60000 3 40000  3 100000  5. Concluding remarks  This paper has discussed how to mine interesting d e s with antecedent constraints. It has been proved that all the interesting rules could be derived f?om the simple rule set.

The results of experiments have revealed that the proposed SAR-based interesting rule mining algorithm performed better than conventional methods by reducing the number of candidate rules. Currently, ongoing research is being conducted on firther optimizations and applications of SAR-based algorithm.

- - I I I I I I - -  .. -A..

- **-- -.

