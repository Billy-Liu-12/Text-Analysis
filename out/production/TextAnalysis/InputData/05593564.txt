A kind of improved algorithm for weighted Apriori  and application to Data Mining

Abstract?In data processing of the supermarket, people  often use the Apriori algorithm to analyze the customer "shopping basket"; Due to the large computation, Apriori algorithm has controlled the number of frequent item sets by using the minimum supporting threshold and pruning techniques, but meaningless frequent item sets still possiblely exist. Divide goods into several broad categories and set up the weighted value of categories; Then, calculate the weighted support and confidence, and do pruning and selection according to the minimum weighted support and confidence threshold to get access to the new frequent item sets and association rules and improve the efficiency of the algorithm.

Index Terms?Improved Apriori algorithm, Weighted supporting degree, Weighted confidence, Shopping Basket analysis

I. INTRODUCTION In recent years, chain supermarket developed rapidly;  Facing fierce marketing competition, people needs to do "shopping basket" analysis at any time to understand preferences spending habits of customers and the relations between the preferences, therefore, it would be better to use Apriori Algorithm for " shopping basket "analysis.

In 1993, Agrawal, who first proposed the Apriori algorithm about association rule mining [4], the algorithm achieved through multiple scan of data sets, each of which minds the corresponding frequent item sets; in the first scan, the algorithm counts on all data items and find all the frequent 1- item sets; In the following each scan, the algorithm generates a new frequent K item sets on the foundation of frequently (K-1) ? item sets of last processing; Through scanning the database, it calculates the degree of support of the candidate sets and frequent item sets; According to the minimum support threshold, it sets pruning operations to candidate frequent item set which does not meet the support threshold to obtain a new frequent item K sets; so repeated until no item frequent itemset found so far.



II. IMPROVEMENT OF APRIORI ALGORITHM It has a positive significance to use association analysis of  data mining for analyzing to get a good knowledge of characteristics and laws of consumer groups; Apriori algorithm using pruning techniques bases on the minimum supporting degree, systemly controls the number of items of candidate item sets and the exponential growth.

A. Apriori Algorithm Problems Although Apriori algorithm can control the excessive  growth of the number of items of the candidate item sets by using pruning techniques bases on the minimum supporting degree, it is still possible to have a lot of meaningless and even false association rules which lead to the portfolio explosive growth of item sets and therefore make the algorithm inefficient. Therefore, in the "shopping basket" analysis of chain supermarket, it primarily exists the following two questions:  ? In database, each project has the same property and function, they all have the same importance; Therefore, each project have no emphasis, but in actual fact, it is better for the supermarket to recmommend relevant commodities according to the season the project's profit and fashion.

? Calculate the supporting degree if the distribution of the items in the database is relatively even; Practing pruning operation on those candidate frequent item sets which can not meet the supporting threshold; The items in the database receive equal processing; It is difficult to set minimum supporting threshold value,because if it is above the actual value, the discovered association rules may not help to find the lower frequency items; if below , it will find a lot of meaningless and even false association rules reducing the efficiency of the algorithm.

B.  Improved weighted supporting degree Algorithm In fact, different projects often have different  importance. In the real world, for example: the supermarket need to consciously recmommend relevant commodities according to the season the project's profit and fashion, thus in order to reflect the different importance of each project, it needs to set different weights for different projects. The method is to divide goods into several broad categories and set up the weighted value of categories; Then, calculate the weighted support and confidence, and do pruning and selection according to the minimum weighted support and confidence threshold to get access to the new frequent item sets and association rules and improve the efficiency of the algorithm.

C. Improved weighted Algorithm model So I = (i1, i2,..., ij) is the set of all the items of basket data, T  = (t1, t2, ..., tn) is the set of all transactions, the item sets of each transaction is the subset of I set. The collection contains any item referred to as item sets, if an item set contains K entries,   Computer Science & Education Hefei, China. August 24?27, 2010   ThP1.7      then it is called the K-item set; Suppose X, Y are item sets, to association rules such as the implicating expression X ? Y, where X ? I , Y ? I, and X Y? = ? , its the strength can be present by the term of support and confidence[2]:  ( )( ) x ys x y n  ? ?? = (1)  ( )( ) ( )  x yc x y x  ? ?  ?? = (2)  For a given item set T = (t1, t2,..., tn), in order to express the importance of the project, we assigned weights wi to each project ti, where 0 ? wi ? 1, i = (1, 2 ,..., n). Calculate the weighted association rules and define the weighted supporting degree as[1]:  ( )( )( ( )) i  Ti x y w  s x y k  ? ? ? ?  (3) Set a K-item as frequent items set, the weighted minimum  support threshold: wminsup, if:  ( )( )( ( )) min sup i  Ti x y w  s x y w i k  ? ? ? ? ?  ................(4) So, X ? Y is a valuable association rules.

The calculation of the weighted confidence level is  described as: Given the project set T = (t1, t2,..., tn), to present the importance of that project, we assigned weights wi to each project ti, where 0 ? wi ? 1, i = (1, 2,..., n). The weighted confidence level:  ( )( )( ( )) i  Ti x y w  c x y k  ? ? ? ?  (5)

III. IMPROVED ALGORITHM OF DECISION MAKING IN THE SUPERMARKET  Supermarkets decision-supporting system uses multi- dimensional data table to save and manipulate the data. Find the inner link of the goods customers have bought and the data which supermarket?s manager is interested in through data mining[3]; The method is that first divide commodities into big categories and each has a uniform weighted value Wi, by using this method, it can avoid that each product has a power value which is inconvenient to set and adjust the weights. Divide commodities into big categories, then set value according the big categories ,due to less categories, it is convenient to set and adjust the weights. And then calculate the weighted supporting degree, find the association rules whose weighted supporting degrees meet the requirements and help stores to make effective marketing strategy.

A.  Calculation and application of the weighted support Supermarket chains collect data and store them in the  database through the front-end POS. Divive the goods into several categories according to the area, the principles of posture, the type of goods, respectively named A, B, C, D, each category has several kinds of merchandise goods, for instance: A stands for food class, A1 indicates the bread, A2 indicates biscuits; B stands for drinks class, B1 indicates milk, B2 indicates Coke; C stands for electrical class, C1, indicates rice cooker; D indicates fruit, D1 indicates apple. A supermarket sales information shown in Table 1.

TABLE I.  TRANSACTION DATABASE  TID Product list TID Product list 1 A1,B1,B2,D1 6 A1,A2,D1 2 A2,B1,C1 7 A2,B1,B2 3 A1,A2,B2,D1 8 A1,A2,B2 4 A1,C1,D1 9 B1,B2 5 A1,A2,B1,B2,D1 10 A1,A2,C1,D1  Set weights according to categories, the weighted value between the categories of goods represent the degrees of importance of the interrelation of goods. Due to a limited number of commodity categories, the table of the weighted value will not be too great. Set goods A, B, C, D class, the table of the weighted value shown in Table 2.

TABLE II.  CATEGORIES OF GOODS ASSOCIATED WITH THE WEIGHTED VALUE OF TABLE  category A B C D weight 1 0.9 0.8 0.7  The weighted value between the categories of goods represent the degrees of importance of the interrelation of goods. the weighted value of categories of goods:  ( )( ) i  T i x y w  k ? ? ?  (6) Use Apriori nature to divide the algorithm into two steps  which are connect and pruning.

The first step: connect, to connect the frequent sets with candidate set of their own.

TABLE III.  PRODUCT CANDIDATE 1 ? ITEM SETS  Item set  Supporting degree count  Supporting degree  Weighted Supporting  degree A1 7 70  70 A2 7 70  70 B1 4 40  36 B2 5 50  45 C1 3 30  24 D1 6 60  42  Second step: pruning, according to the nature of Apriori algorithm [5], set the minimum weighted supporting threshold as 30%. Compress candidate sets. Scan the database to calculate the weighted supporting degree, involve all the candidate items which meet the minimum weighted supporting degree into frequent sets.

ThP1.7      according to the steps of Apriori algorithm, find the goods frequent set1 which meet the minimum weighted supporting degree, commodity candidate 1 ? is filtered to commodity s frequent 1 ? item sets, such as Table 3, Table 4. The filter criteria is that the minimum weighted supporting threshold is 30%.

TABLE IV.  COMMODITY FREQUENT 1 ? ITEMSETS  Item set  Supporting degree count  Supporting degree  Weighted Supporting  degree A1 7 70  70 A2 7 70  70 B1 4 40  36 B2 5 50  45 D1 6 60  42  In accordance with the connecting rules of Apriori algorithm to generate all goods candidate 2 ? item sets, that is: (A1, A2), (A1, B1), (A1, B2), (A1, D1), (A2, B1), ... ..., ( B2, D1). Scan the transaction database, list commodity candidate 2 ? item sets, as shown in table 5.

TABLE V.  PRODUCT CANDIDATE 2 ? ITEMSETS  Item set Supporting degree count Weight  parameter  Weighted Supporting  degree A1,A2 5 1 50% A1,B1 2 0.95 19% A1,B2 3 0.95 28.5% A1,D1 6 0.85 51% A2,B1 4 0.95 38% A2,B2 4 0.95 38% A2,D1 4 0.85 34% B1,B2 4 0.9 36% B1,D1 2 0.8 16% B2,D1 3 0.8 24%  Calculate the weighted supporting degree, and select out commodity frequent 2 ? item sets which meets the minimum weighted supporting threshold of 30%.

TABLE VI.  COMMODITY FREQUENT 2 ? ITEMSETS  Item set Supporting degree count Weight  parameter Weighted  Supporting degree A1,A2 5 1 50% A1,D1 6 0.85 51% A2,B1 4 0.95 38% A2,B2 4 0.95 38% A2,D1 4 0.85 34% B1,B2 4 0.9 36% Similarly, get commodity candidate 2 ? item sets and  commodity frequent 2 ? item sets, as shown in Table 6 and Table 7.

TABLE VII.  COMMODITY CANDIDATE 3 - ITEM SETS  Item set Supporting degree count Weight  parameter  Weighted Supporting  degree A1,A2,B1 1 0.97 9.7% A1,A2,B2 3 0.97 29.1% A1,A2,D1 4 0.9 36% A2,B1,B2 3 0.93 27.9% A2,B1,D1 2 0.86 17.2% A2,B2,D1 2 0.86 17.2% B1,B2,D1 2 0.83 16.6%  commodity candidate 1 ? is filtered to commodity s frequent 1 ? item sets, the filter conditions is to meet the minimum weighted supporting threshold of 30%.

TABLE VIII.  COMMODITY FREQUENT 3 - ITEM SETS  Item set Supporting  degree count  Weight parameter  Weighted Supporting  degree A1,A2,D1 4 0.9 36%  B. Calculation of the weighted confidence In order to tap the concerns of sales-related staff, it use  weighted confidence level for calculation, which is multiply of commodity?s confidence level and associated weighted value of bid categories, this multiply is weighted confidence  of one kind against another kind. As table 8 commodity frequent 3 ? item sets, (A1, A2, D1) weighted supporting degree is confidence level and the weighted confidence level above 30%, as shown in Table 9.

TABLE IX.  CONFIDENCE AND THE WEIGHTED CONFIDENCE LEVEL TABLE  Commodity relationship confidence  Weighted confidence  A1?A2^D1 57.14% 51.42 A2?A1^D1 66.67  60 D1?A1^A2 66.67% 60 A1^A2?D1 80% 72 A1^D1?A2 66.67% 60 A2^D1?A1 100% 90  Supposing the minimum weighted confidence threshold is 55%, according to the table, weighted confidence which is more than 55% is strongly inter-related, so it is easy for customers to accept this combination. Confidence reflects the degree of correlation between commodities, while the weighted confidence reflects the degree of correlation between assortment of the customers or businesses.



IV. WEIGHTED SUPPORT AND CONFIDENCE ALGORITHM In practical applications, such as supermarket database,  according to the season, the project's profits, consumption trend and other factors, it sets the weight of each category of commodities, calculates the weighted supporting degree, sets minimum weighted supporting threshold, and does pruning operation on candidate or frequent item sets which not meet the weighted supporting threshold. Through the use of pruning techniques, some association rules whose weight is not high and which has no practical meaning and which is even false are filtered out; so, it can not only improve the efficiency of algorithm, but also do recommendation focusly and consciously.

The interrelationship of assortment is more strong whose weighted confidence is more than the minimum threshold of weighted confidence, so it is easy for customers to accept this assortment. Confidence reflects the degree of correlation between commodities, while the weighted confidence reflects the degree of correlation between assortment of the customers or businesses. The level of weighted confidence of is critical to the filteration of association rules on the circumstance that the defference of confidences of different assortments is not so clear.

ThP1.7

V. SUMMARY According to the actual needs of supermarket customers,  according to season, product type, sales staffs? experience,it first divide commodities into big categories, set up the weighted value of categories, through analyzing customer "shopping basket", it filters out the item sets whose weight is small and which divisors have no need to care about while it selects out the item sets whose weight is big and which divisors need to care about and find the item sets which meet the minimum weighted confidence; Then, by calculating the weighted confidence, it finds the valuable association rules.

Thus it can not only find the interrelation of different commodities , but also mine data according to commodites and divisor?s refered transaction. how to set reasonable weights has great influence on the result of data mining, and need to be further studied.

