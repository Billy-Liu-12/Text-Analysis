Optimization of a Small Satellite Tridyne Propulsion

Abstract - This paper presents the integrated modeling and optimization of a Tridyne?-based small satellite propulsion system. A detailed integrated model is developed to compute propellant thermodynamic properties throughout the entire propulsion system, from the propellant tank through the valves, regulator and thrusters. The simulation uses a compressible flow model incorporating both friction and heat transfer to predict these properties. The detailed model was validated against, and showed good agreement with two existing professional software tools. While the detailed model proved to be accurate, it was computationally expensive, necessitating the development of a fast screening model for use in optimization.

The screening model utilizes polynomial curve fits for NIST thermodynamic data, lumped pipe flow calculations and larger time steps. The NSGA II multi-objective optimization routine, employing the screening model, found a set of non-dominated designs that showed the tradeoff between the two objectives of maximizing IJ.V and minimizing tank pressure. These non? dominated designs are classified into five design families and three point designs were chosen for further detailed analysis and comparison. This approach shows great promise for preliminary designs of highly integrated small satellite propulsion systems.

T ABLE OF CONTENTS

I. Introduction .... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 2. Design Space .... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2  3. Thermodynamic Modeling .... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3  4. Detailed Simulation Modeling .... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7  5. Screening Model ... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11  6. Multi-Objective Optimization .... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12  7. Component and Tubing Sizing .... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14  8. Optimization Results ... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14  9. Detailed Analysis of Selected Designs ... . . . . . . . . . . . . . . . . . . . . . . . 17  Conclusions ... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19  Acknowledgements ... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19  U.S. Government work not protected by U.S. copyright  1. INTRODUCTION  Gas propulsion systems were among the first to be employed for maneuvering and attitude control of satellites. These systems utilize a high pressure stored gas propellant, a simple feed system incorporating some form of pressure regulation, and an array of thrusters to provide both attitude and translational control. The primary advantage of such a system is the relative simplicity and low cost of the design compared to liquid, monopropellant and bi-propellant systems. These merits are particularly advantageous for application to small satellites where budget and space constraints are fundamental design traits.

Satellites, both large and small, are either based on a standard bus design or are customized to accommodate a particular payload or technology. In either case, the satellite subsystems are integrated to achieve a desired level of performance while still meeting stringent size, weight and power constraints. Traditional design methods leverage standard practices or heritage to achieve a desired perfonnance but are characteristically suboptimal. For example, a satellite propulsion system is comprised of numerous subsystems that must operate cooperatively in a difficult environment. Traditional practices use heritage designs that may not be appropriate for a particular spacecraft or mission. This is particularly true for small satellites where size, power and cost constraints often preclude standard design practices. An alternative approach is to treat either the entire satellite or a complex subsystem, e.g., a propulsion system, as a highly coupled process with competing objectives and constraints. These design problems are typically characterized by highly non-linear, multi-modal design spaces and complex, computationally expensive simulation models. This paper shows how detailed, integrated multidisciplinary models and multi-objective optimization techniques can be used together to discover globally efficient designs for a small satellite propulsion system. [1]  The paper is organized as follows. First, we formally defme the design space for a small satellite propulsion system. The    design space is organized into fixed parameters and design variables open to the optimization process. Next we discuss the thermodynamic modeling approach and validate our model using two existing professional software tools. A computationally efficient screening model, a modified version of the detailed simulation, was next coupled with a multi-objective genetic algorithm to find the Pareto front, or set of non-dominated designs. Several design families were identified and three point designs were selected for further analysis and comparison with the detailed simulation model.

2. DESIGN SPACE  The design space describes the satellite bus dimensions, dry weight, propulsion feed system design, component specifications and ADCS subsystem. Each design is characterized by fixed parameters and a set of unique design variables.

Our goal is to optimize (maximize b. V and minimize tank pressure) the propulsion system in a highly constrained small satellite bus. Due to computational limits, the optimization routine can only handle a relatively small set of design variables. As a result, the bus dimensions, tank volume and much of the feed system design was fully defmed by fixed parameters in this study. Table 1 lists this set of fixed parameters and design variables.

The propulsion system consists of the propellant, pressurized tanks, valves, piping and thrusters. The propellant constituents, propellant tank fill pressure, regulated pressure, feed system component flow coefficients and nozzle throat diameter are the primary design variables.

Propellant Selection  The simplest gas propulsion system is pressurized cold gas.

These systems generate thrust by exhausting the gas on demand and are simple in the sense that they require few components and minimal power. The performance of such systems (usable b. V) is governed by the specific impulse of the chosen gas propellant and the amount of gas stored onboard. For example, nitrogen provides a specific impulse of 55-65 seconds while Krypton provides an impulse of 25- 35 seconds depending on nozzle efficiency and cold chamber temperature. However, Krypton is a denser gas and thus more propellant can be stored in the same tank volume. On the other hand, Krypton also suffers from undesirable thermodynamic characteristics at high pressure. Though specific impulse is largely a function of average molecular weight and is intrinsic to a particular propellant, it can be increased by heating the gas just prior to exiting the nozzle.

One method of heating the propellant gas, without the need of electrical power, is to catalytically react a Tridyne'M mixture. The term was coined by Rocketdyne in the early 1960's when research was initiated under NASA contract.

The concept is to add small fractions of hydrogen and oxygen in the inert cold gas propellant, in order to provide some latent chemical energy to the mix. This energy is released to   the gas by a catalyst embedded in the thruster. The catalyst dissociates the hydrogen molecules, allowing them to react more readily with the oxygen, ultimately forming water. The formation of water is exothermic, and thus releases heat into the flowing gas propellant. This addition of heat raises the thermal energy of the gas, which is converted to kinetic energy from the expansion process through the nozzle.

Higher kinetic energy results in higher specific impulse, which ultimately raises the /:,. V performance of the system.

[2,3,4]  Tridyne'M systems are attractive since they significantly  increase usable b. V (sometimes by a factor of 2) while sharing the simplicity of a cold gas system architecture. However, it is important to note that the hydrogen and oxygen mixture must be lean enough to render the mixture inert. In other words, the mixture must remain below the limits of flammability and cannot be detonated by any open ignition source. These limits are generally defined as not more than 5% oxygen concentration and 10% hydrogen for pressures higher than 2,000 psig. [5]  While Tridyne'M has been in research and development over the last several decades, little flight heritage exists. The primary reason for this was the adoption of high performance hydrazine systems which offer much higher specific impulse and storage density. However, for smaller, low-cost satellites, hydrazine is cost-prohibitive due to the specialized feed system components, hazardous handling procedures, and active thermal control required to prevent the propellant from freezing on-orbit. As small satellites gain attention in the space community and become more capable integrated systems, Tridyne'M could enable moderate performance, low? cost, propulsion.

The Tridyne'M propellant mixture selected for this paper has an oxygen and hydrogen molar concentration of 5% and 10%, respectively. The inert gas that comprises the remaining 85% of the mixture is specified as a design variable and is limited to nitrogen, argon, and krypton. Xenon is difficult to store in gas form since its critical point lies just below room temperature, and helium and neon are not dense enough to be competitive with their heavier relatives. The next section discusses the propellant feed system.

Propellant Feed System  Typically, there are four types of components that exist in a simple gas propulsion system (either cold gas or Tridyne?): (1) a high pressure storage tank, (2) one or several isolation valves to prevent leakage during ground operations and launch, (3) a pressure regulation device, and (4) solenoids immediately upstream of a thruster to provide discrete impulses to the satellite. Figure 1 is a schematic of such a simple feed system.

Pressure Vessel  Solenoid #4 Thruster #4  Figure 1: Propellant Feed System  The components shown in the figure influence both the performance of the propulsion system, as well as the overall dry mass of the vehicle and hence the available ? V. This system architecture defmes the baseline design for the propellant feed system used in the design space. The design variables associated with these components are shown in Table 1. Note that other components such as filters, fill/drain ports, pressure transducers and additional thrusters have not been shown since they do not directly affect the blowdown thermodynamics.

Key to the performance of the propulsion system is the thermodynamic properties of the propellant during blowdown and the components that feed the thrusters.

Consequently, detailed modeling of the system thermodynamics is central to the optimization process.

3. THERMODYNAMIC MODELING  When considering high pressure gas systems, the propellant mixtures are almost always stored in a supercritical state. It is typically not until the gas is regulated to lower pressures that the state becomes pure vapor. Such systems require the use of non-isentropic, non-ideal, compressible flow modeling  Bus Parameters bus dimension  tank fill pressure  blowdown mass fraction  min slew rate (sizing RW)  max R W momentum storage  reset temperature  base dry mass  max propulsion system RW loading fraction (n  # simultaneous thrusters operating min vehicle acceleration  ullage temperature  ullage pressure  solenoid action time  total # thrusters # thruster per translational direction  Propellant Parameters H2 molar fraction 02 molar fraction  N2 molar fraction  Ar molar fraction Kr molar fraction  Table 1:  0.3 m  design variable  0.22S x 4  5 deg/s 0.5 Nms 283 K  20 kg  0.10  0.01 m/s/s  283 K

I.S*Pfill 0.01 s   0.10  0.05  design variable  design variable  design variable   tools to accurately predict thermodynamic properties of the gas. Several tools exist in the public and commercial domains to perform this type of modeling, including (1) Applied Flow Technology's (AFT) ARROW, (2) Engineered Software Inc.

PIPE-FLO Compressible and (3) NASA's Generalized Fluid System Simulation Program (GFSSP). Several limitations exist with these tools, including limited thermodynamic data on various gases, inability to calculate mixing properties of multiple constituents at high pressure and lack of time-based analysis.

For these reasons, a code was developed and validated to model the thermodynamic properties of a high pressure gas as it is travels through the satellite feed system and is ultimately exhausted via the thrusters. An additional module was also added to the code to calculate the kinetics of reacting hydrogen and oxygen at the catalyst bed for Tridyne mixtures. This open-source code was originally written by Professor David Goodwin from the California Institute of Technology. It calculates the combustion temperature of the reacted Tridyne gas, as well as other thermodynamic properties which are used to predict thrust, mass flow rates and specific impulse. [6]  Thermodynamic State Estimation  At high pressures and moderate temperatures (typically above the supercritical state), gases demonstrate a large deviation from ideal gas law. It is in these states that gas propulsion systems often operate. In order to increase the amount of propellant available in a fixed tank volume, high pressures are required. As such, feed system analysis begins with the real gas law stated as follows:  p = ZpRT  Design Space  Thruster Parameters nozzle length LO in  1.0  (1)  catalytic efficiency  throat diameter  cone half-angle  discharge coefficient  velocity correction factor  design variable  ISO 1.07  0.92  Propellant Tank Parameters tank fraction (of satellite bus volume) 0.10  exit diameter 0.12 in material properties: 2700 kg/m3, 896 J/kg/K, 167 W/m/K  Isolation valve, Regulator, Solenoid properties valve critical pressure ratio O.S  upstream isolation valve flow coefficient design variable  downstream isolation valve flow coefficient design variable  solenoid flow coefficient design variable  regulated pressure design variable  material properties: 8000 kg/m3, 500 J/kg/K, 16.3 W/m/K  Piping tubing segment lengths (in): 6,4,4,4, 12, 1 tubing density: 8000 kg/m3 Tubing thermal properties: SOO J/kg/K, 16.3 W Im/K    Where p = pressure; Z = compressibility factor; p = density; R = specific gas constant (universal gas constant divided by the molecular weight); and T = gas temperature. The compressibility factor quantifies the specific gas' non-ideal relationship between pressure and density (at some fixed temperature). Rather than use an equation of state to detennine the compressibility of each constituent in a gas mixture, a National Institute of Standards and Technology (NIST) database was compiled for all the gases of interest, including hydrogen, oxygen, nitrogen and all noble gases from helium to xenon. [7] This database enabled the simulation to request thermodynamic properties from any constituent given 2 independent thermodynamic states (e.g.

pressure and temperature, enthalpy and density, etc.).

Mixture properties  For ideal mixtures, Dalton's Law is used to estimate the partial pressure of each constituent. The law states that the sum of the partial pressures equals the total pressure of the mixture:  Ptotal = Ii Pi (2) Stated differently, Dalton's Law also proves that the partial pressure of any constituent is simply the molar fraction of the constituent multiplied by the total pressure:  (3)  However, for non-ideal gases Dalton's Law no longer applies. While Dalton's Law models each constituent as completely independent and not interacting with other constituents, real gas mixtures exhibit non-negligible intermolecular forces between the different molecules. As such, the following modification is made:  z? Pi = niPtotal z--"?total (4)  Where Z; = compressibility factor of constituent i; Z/oial = mixture compressibility factor. Note that since Z; is evaluated at the partial pressure of the constituent, Equation (3) requires an iterative solution method to converge to the [mal partial pressure.

In order to calculate Zioial a set of mixing rules is required to detennine how the gas constituents interact with each other.

A specific set of mixing rules published by Kwak and Mansoori shows good correlation with supercritical fluid mixtures and has been widely accepted. [8] These mixing rules are applied to the Redlich-Kwong equation of state (EOS) which is reproduced below:  (5)  Where p = pressure; R = universal gas constant; T = gas temperature; Vm = molar volume (density divided by molecular weight); a = constant that accounts for the attractive potential between molecules; and b = constant that   accounts for the finite volume of the molecules. Note that this EOS can be re-written to solve for a compressibility factor based on the non-ideal tenns:  z =  ...!!...- =  P?m pRT RT (6)  Combining Equation (5) and (6), the compressibility factor can be solved for some known pressure and temperature of the gas. To do so, the parameters a and b must also be calculated. For any single constituent gas, the parameters can be expressed as functions of the critical temperature and pressure:  a = 0.4275R2 Tc2  Pc  b = 0.08664R 2? Pc  (7)  (8)  For a gas mixture, Kwak and Mansoori propose using the following mixture rules:  (9)  (10)  b?+b? Where ai) = .Jaiaj; and bi) = ? . These rules are used to calculate a mixture's overall compressibility factor, which enables the partial pressures to be calculated and constituent gas properties to be estimated. The following equation is used for any generic mixture property (other than temperature, pressure and density) based on the constituent molar fraction:  (11)  Where Xnllx = intensive property of the mixture; n, = mole or mass fraction of the constituent; Xi = intensive property of constituent i. Note that for pressure, temperature and density, the following relations hold:  (12)  (13)  (14)  Note that Pi in equation (12) is defined by equation (4), where the mixture and constituent compressibility factors are considered.

Pipe Flow Equations  Internal flow for compressible gases is modeled using three conservation laws: continuity, momentum and energy. The differential fonn of these three laws are reproduced below:  Mass: dp + dA + dV  = 0 P A V  (15)    dp yM2 fdx 2 dV Momentum:-+--+yM - =  0 P 2 D V Energy: dho = 8q  (16)  (17)  Where A = pipe cross-sectional area; V = fluid velocity; M = Mach Number; y = ratio of specific heats;f= Darcy friction factor; x = position along the pipe; D = inner diameter of the pipe; ho = stagnation enthalpy; r3q = heat added to the fluid from the pipe wall. [9]  Note that Equation (16) neglects the effect of change in gravitational potential energy as well as control volume boundary work (e.g. compressor pump work). Using these set of equations, as well as the defmition of Mach number or ratio of fluid speed to the local speed of sound, a first order ordinary differential equation (ODE) can be written to describe the flow of fluid through a constant area channel:  (18)  Where To = stagnation temperature. The above ODE is solved as part of a marching method scheme, where initial conditions from the pressurized cylinder are used in conjunction with the mass flowrate demanded by the thrusters to calculate the thermodynamic state of the gas as it travels through the feed system. Each pipe is discretized into multiple nodes where gas pressures and temperatures are computed using Equation (18).

The two terms found on the right-hand-side of Equation (18) refer to the friction induced by the pipe inner wall, and the heat convected to the gas from the pipe. The friction factor is computed in the pipe flow calculations using the Colebrook equation shown below:  1 _ 21 (E + 2.51 ) Ii - - og10 3.7Dh Reli (19) Where E = inner pipe wall surface roughness; Dh = hydraulic diameter (inner diameter of pipe); Re = Reynold's Number.

Likewise, the change in stagnation temperature can also be solved using the energy equation as written below:  dTo qrcD dx mCp (20)  Where q = heat convected to the gas; m = mass flowrate; and Cp = specific heat at constant pressure. The heat transferred from the pipe wall to the gas is governed by the convection equation shown below:  (21)  Where h = heat transfer coefficient; AID = area of the inner pipe wall through which heat is convected; Twall = surface temperature of the inner pipe wall; Tgas = bulk gas temperature flowing through the pipe. The heat transfer coefficient is computed using the Gnielinski equation which   is valid over a wide range of Reynolds Numbers from 3000 (transition flow) to 5,000,000 (turbulent flow):  (22)  Where Nu = Nusselt's Number; Pr = Prandtl Number. The Nusselt Number is the ratio of the heat transfer coefficient to the thermal conductivity of the gas. Thus knowing the thermal conductivity of the gas and calculating the Nusselt Nwnber from Equation (22), the heat transfer coefficient can be derived. [10]  Note that according to Equation (18) for subsonic flow, both friction and the addition of heat causes the Mach Number to increase as the gas progresses down the length of the pipe.

Provided a pipe of sufficient length, with some surface roughness and some constant influx of heat, the gas will reach sonic conditions. When this condition is reached, the gas chokes at the downstream junction in the feed system.

Choking volumetrically constricts the flow of gas across a standing shock wave. This can dramatically reduce thrust and cause state changes. Consequently, choking is an unwanted phenomenon that is prevented through adequate sizing of tubing and feed system components. As a rule, smaller tubing, orifices and junction flow channels result in higher risk for choking.

Junction Flow Equations  Three types of junctions were considered for this system model: (1) valves, (2) regulators and (3) manifolds. Each junction can be thought of as a boundary condition for the pipe flow equation. Since the internal geometries of these components can be quite complex, simple models are used to calculate the pressure and temperature drop across the component.

Valves are most often specified by a flow coefficient, CI', and a ratio of differential pressure to inlet pressure at choked conditions, XT. The following equation describes the mass flowrate for a compressible gas in turbulent conditions (Re > 4000):  m = NC P Y J MtlP v 1 ZP,T, (23) Where N = constant for unit conversion; P / = inlet pressure; Y = expansion factor; LlP = pressure drop across the valve; T/ = inlet temperature. The expansion factor is calculated using the following equation:  Y = l _ _ x_ 3 FyXT (24)  Where x = ratio of pressure drop to inlet pressure; Fy is the ratio of specific heats of the gas normalized by that of air at standard temperature and pressure (STP). [11]    Thus, by defming a flowrate from the upstream pipe, as well as an inlet temperature and pressure, the pressure drop across the valve can be computed using Equations (23) and (24). As a simplification, XT is typically 0.5 for most flow control valves. This parameter is not significantly affected by size or flowrate. As a result, the valves used in this simulation differed primarily by flow coefficient and mass.

Pressure regulators act as feedback control devices that maintain a fixed downstream pressure. In the real world, pressure regulators are not perfect, and their outlet pressures will fall, or droop, as inlet pressure decreases and flowrates increase. For the purposes of this study, we assume a non? ideal pressure regulator suffers from a droop effect. The droop is normalized with respect to inlet pressure and flow rate. Thus, provided a regulator with some service pressure and desired pressure regulation, we can add the droop effect to see how much the regulation set point changes over the course of the blowdown. The constraint enforced at the system level is such that if the cylinder pressure drops to 1.5 times the regulated pressure, the regulator will no longer be able to function properly and the remaining propellant in the cylinder is considered unusable.

In order to calculate the temperature drop across any of the valve or regulator junctions, we assume an isenthalpic process. In other words, during the flow across a valve or regulator, the enthalpy of the fluid is constant. This can only happen if the fluid in the junction is adiabatic, no work is being done, and the change in kinetic and potential energies are negligible. Flow control devices that meet these requirements are often referred to as throttling valves. [12] Having calculated the pressure drop from the previously introduced equations, the state of the fluid is completely defined at the outlet of the junction. Specifically, temperature is requested from the NIST thermodynamic property library using the following equation:  (25)  Where the subscript 1 refers to the inlet conditions and the subscript 2 refers to the outlet conditions. It is important to note that drops in pressure while holding enthalpy constant will almost always result in a drop in temperature (unless the gas mixture has a negative Joule-Thomson Coefficient). This drop in temperature causes the fluid to move closer to a saturation condition as it flows through each junction.

For manifolds, the continuity equation is enforced to ensure that the mass inflow is equal to the mass outflow. For simplicity, no pressure losses are calculated in the manifold and thus inlet pressure and temperature is identical to the outlet pressure and temperature.

Heat Transfer Modeling  While gas is flowing through the feed system, the transfer of heat to/from the cylinder, junctions and pipes is accomplished via convection. We have already stated that the junctions are considered to be adiabatic systems, and thus convection is   neglected in those components. However, in each pipe segment as well as the cylinder, the heat transfer coefficient is not neglible. Previously, we introduced the Gnielinski equation (22) to calculate heat transfer coefficients in pipes.

However for the cylinder, we assume that the liner of the pressurized vessel is always in thermal equilibrium with the stored propellant gas. This assumption was made due to the fact that liner walls are extremely thin, and thus offer little thermal resistance. Also free convection in zero-g environments is especially difficult to predict and model. [13] However, in order to include the thermal mass of the cylinder, which accounts for a sizeable fraction of the total feed system mass, it was necessary to make this simplification. Figure 2 illustrates this concept:  Gas Mixture  Mpropellant Tgas Pgas Vcyllnder  Figure 2: Cylinder Thermal Model  In the above figure, the cylinder is modeled as a lumped system isolated from its surroundings (e.g. satellite bus, support structure, etc.). This assumption is fairly accurate if the vessel is overwrapped with a composite material to strengthen the liner (also thermally insulating). The heat capacitances of both the gas mixture and cylinder liner are coupled during the blowdown to calculate an equilibrium temperature between them. This equilibrium temperature represents both the gas and liner temperatures. However, due to the added thermal capacitance of the cylinder liner, the temperature of the stored gas mixture does not drop as severely as it would if it had been thermally isolated. As a result, the stored gas temperature drops less drastically over time.

After the convective heat transfer is calculated, the temperature gradient in the feed system causes heat conduction between the cylinder, piping and junctions.

Figure 3 illustrates both the heat conduction and convection between adjacent nodes in the feed network.

T , Gas Inflow  Pipe Nodei Nodei+1  Heat Conduction  T,..

Noden Junction  Figure 3: Pipe Cross-Section Heat Transfer Model    Note that each junction as well as the cylinder is thermally connected to the pipes that run between them. However, due to the small cross-sectional area of the pipe wall and its poor thermal conductivity (stainless steel tubing and components), heat within the feed system plwnbing is conducted slowly.

While the junction's heavier mass provides added heat capacitance to the system, their ability to transfer heat into gas is limited. Since junctions must conduct heat fIrst into neighboring pipes before it can be convected into the gas, they tend to remain substantially warmer than the system tubing. This phenomenon will be illustrated in later sections of this paper.

For the purposes of this study, the feed system plwnbing is completely isolated from any other element of the satellite (e.g. supporting structure, high power components, etc.).

Because the design of the satellite bus and the layout of components are not within the scope of this study, any attempt to model the effects of these boundary heating sources would be purely speculation. Moreover, insulating the propulsion system feed components and plumbing ensures that a reasonably conservative design solution is reached which does not require active thermal control.

4. DETAILED SIMULATION MODELING  The block diagram shown in Figure 4 illustrates the structure and data flow of the simulation model. From the beginning (top-left corner) the user must specify the feed system network and simulation parameters. These parameters and variables include everything from specifying the tubing and junctions to selecting an appropriate time step and choosing the propellant gas mixture.

Next, the simulation reads in these metrics and feeds them into the thermodynamic modeling routines which compute the initial state of the system. Pressures, temperatures and flow rates in the system are iteratively solved for using the previously described marching method. Once the new state of the gas in the feed system has been solved, the heat conduction code is executed to allow heat from warmer junctions and pipes to transfer to colder sections in the system. Once the heat conduction has been calculated, the thermodynamic state and performance parameters of the system are recorded.

At the end of each time step, the simulation checks to see if the blowdown has been completed. In all, there are three ways to defIne and check this occurrence: (1) a timed blowdown where the simulation resets after a fIxed amount of time has passed (2) a fraction of the original gas mass has been expelled, or (3) a specifIed amount of /:,. V has been utilized for a maneuver. The thermodynamic state of the stored propellant is recalculated and the process repeats.

Validation  Two approaches were used to validate the detailed simulation model. The fIrst was to use a validated commercial code that calculates thermodynamic properties of internal compressible flow. The second was to use an example problem from Bandyopadhyay's paper on NASA's GFSSP simulation code. [14] Each of these approaches is discussed below.

The commercial software used to validate the detailed simulation model was Applied Flow Technology's (AFT) Arrow. This software computes the thermodynamic  II II -----------------------------------------------------------------, Simulation and Feed System Parameters  NIST  Thennodynamic Data Tables  Cantera Chemical  Equilibrium Solver  II  , , , , , ,  ?:::>: ' , , ,  , , , , , , , ,  I Simulation Setup & I Propulsion Simulation Model 1 Initialization ..

I Compute Initial 1 1 ResetFeed System and I Thennodynamic State I 1 Stored Gas Temperatures +  Tank Blowdown Not completed  .1 Check for Blowdown 1 Completed 1 Check for Simulation I 1 Completion 1 1 Completion ? Not completed Solve for Feed System Completed  Pressures and Temperetures  I Feed System Iterate Thruster I {cylinder, (combustion, junctions, pipes) nozzle relations) ..

I Conductheat through feed I system piping and junctions ?  I Compute Thermodynamic I State ..

1 Compute Perfonnance I Increment I Parameters time  L ________________________________________________________________ _  Figure 4: Detailed Simulation Model   .II Thermodynamic II Time History and "II Performance Metrics    properties of compressible flow in pipe networks, primarily for the natural gas and oil industries. The code has been validated with numerous examples from industry and the reader is encouraged to further investigate these examples on AFT's website. However, for the purposes of this paper, the feed system model was recreated in AFT Arrow and is illustrated in Figure 5 :  Figure 5 :  AFT Arrow Feed System Model  Note that the thrusters are being represented by two junction types in the AFT software: (1) a heat exchanger and (2) an orifice opening into a vacuum environment. The heat exchanger was set to control the outlet temperature to the combustion temperature calculated using Cantera. Likewise, the orifice diameter was identical to the nozzle throat diameter. Since choking should occur at the throat, the diverging section of the nozzle is not needed to predict system temperatures, pressures and mass flow rates.

For this validation, two propellant gases were used, primarily to distinguish the error between Arrow's and the detailed model's mixing rules. While Design 1 employs a quad? constituent Tridyne? mixture, Design 2 uses only a nitrogen cold gas. The significant design parameters are shown in Table 2.

During the initial time of the blowdown, the pressures, temperatures and mass flow rates were recorded and shown in the next several figures and table. The plots show pressure and temperature as a function of position in the feed system, both relative to the cylinder and relative to the regulator.

Figure 6 shows four plots illustrating these properties for Design 1, only.

Table 2: Validation Design Parameters  Design Variable Design Design Units I 2  Initial Tank Pressure 3000 3000 psi Regulator Pressure 200 200 psi N2 Composition Weight 0.425 1.0 Ar Composition Weight 0.425 0.0 Kr Composition Weight 0.0 0.0 H2 Composition Weight 0.1 0.0 O2 Composition Weight 0.05 0.0 Mass of Cylinder 0.6 0.6 kg Isolation Valve #1 Mass 0.5 0.5 kg Isolation Valve # I Cv 0.15 0.15 Isolation Valve #2 Mass 0.5 0.5 kg Isolation Valve #2 Cv 0.30 0.30 Isolation Valve #3 Mass 0.5 0.5 kg Solenoid Cv 0.05 0.05 Throat Diameter 0.05 0.05 in Catalyst Efficiency 0.75 N/A  AFT Arrow uses a similar marching method to compute thermodynamic properties along each pipe segment. [15] The AFT Arrow solution, however, only calculates the flow properties assuming friction but not heat transfer. Note that the detailed model simulation pressures very closely followed the AFT simulation pressures (especailly when only friction is applied). However, in the plot of temperature vs.

distance downstream of the regulator, the temperature drop across the regulator is much more severe than that of the detail model's. This phenomenon was further investigated in Design 2.

As previously mentioned, Design 2 represents a cold nitrogen gas system. Using just nitrogen allows the comparison between the two simulations to indicate what contribution the mixing rules are making to relative errors. As shown in Figure 7, the mixing rules account for a large majority of the error discovered in Design 1.

As is clearly shown, the adiabatic temperature profiles now closely follow Arrow's. It is very clear that the method Arrow employs to calculate mixing properties is somewhat different than the Redlich Kwong mixing rules discussed earlier. Since AFT does not disclose their rules, no further investigation is possible. However, the above plot does show very good agreement between the single constituent gas models, and thus validates the compressible flow physics models used in the detailed model.

3000 t-----, co ?tii .e 2000 ? :l If) If) ? a.. 1000  - AFT Arrow Solution  oL---?==========? o 10 20 30 Distance Downstream of Cylinder (in)  250r------?---------__,  ? 200 .e ? :l If) If) ? 150  a..

Frictionlesss (heat and no heat added)  .? ..

t  Friction (heat and no heat added) ' ... ,  - AFT Arrow Solution  100?-----?---------?  600 0' ? Q) .a 400 ? Q) a.

? 200  I-  o 5 10 15 20 25 Distance Downstream of Regulator (in)  - AFT Arrow Solution  0C===?== .... = ..... = ..... = .... = ..... = .... = ..... = .... ? .. ? o 10 20 30  Distance Downstream of Cylinder (in)  40?-?--?--?----?-?  0' 20 ? ? :l "? 0 Q) a.

E ? -20  Heat Added (friction and frictionless)  Adiabatic (friction and frictionles? \ ..... ? ? ??? ?-. ? ..

.-------.-.\' 1-???????????_???_???????????????????????????????????? ...... -..

l?---------------------?  - AFT Arrow Solution -40?--?----?----?----------?  o 5 10 15 20 25 Distance Downstream of Regulator (in)  Figure 6: Comparison of Arrow vs. Detailed Model  B1owdown Temperature/Pressure Profiles  (Nitrogen/Argon Tridyne Mixture)   10r---?----?----?----------? Heat Added (friction and frictionless)  o  ? -10 .a \ h.????????????l  .Mliib?;i? ??;ction and frictionless ? ? -20 E ... ?.::  .. :::.::.:: .......... -.... ? ?. ..................

Q)  I- -30 - AFT Arrow Solution I  -40 ?--?----?----?------?--? o 5 10 15 20 25  Distance Downstream of Regulator (in)  Figure 7: Comparison of Arrow vs. Detailed Model  Blowdown Temperature/Pressure Profiles (Nitrogen  Cold Gas)  Finally, another important parameter to track is the mass flow rate through each nozzle to vacuum. This flow rate largely impacts the blowdown since higher flow rates result in high pressure drops across junctions which are consequently accompanied by higher temperature drops. Table 3 below shows a comparison of the AFT and detailed model's prediction of flow rates for both Design 1 and Design 2.

Table 3: Validation Design Mass Flow Rates  Model Design 1 Design 2 Mass Flow Mass Flow  Rate (glsec) Rate (glsec)  AFT Arrow 1.862 2.335 Detailed Model  (Frictionless/Adiabatic) 2.078 2.565  Detailed Model  (Friction/Adiabatic) 1.939 2.318  Detailed Model 2.048 2.455 (Frictionless/Heat Transfer)  Detailed Model 1.908 2.216 (Friction/Heat Transfer)  The second approach for validating the detailed simulation model was to use a simple example from a NASA GFSSP validation study. [14] This example consisted of a pressurized tank and a long outlet tube venting to ambient air. An illustration of this example is presented in Figure 8.

Bandyopadhyay and Majumdar used this system to set up several variations of the problem where both friction and heat transfer mechanisms within the pipe are toggled. The first case was to mimic a Fanno flow calculation in which friction is included but the gas is adiabatic. The pressure in the pipe, normalized by the outlet pressure where the gas chokes as it exhausts to ambient, is plotted in Figure 9.

P1 = SO psia T, = 80 F 'I, =0,5  Fluid: N2  L------J.-____ L "" 3207 inches  Figure I Schematic diagram for a constant area pipe,  M J  Figure 8: NASA GFSSP Validation Example  225.------------------,  1.75 a. C.

1.50  1.25  1.00 +------?-----?----4 0.00 0.20 0.40 0.60 0.80 1.00  x/L'  Figure 9: GFSSP Example Pressure Profile  Note that the pressure steadily drops as the friction in the pipe causes the fluid velocity to accelerate and the Mach number to increase. Incorporating this system in the detailed model and running identical parameters, Figure 10 shows that the pressure profile is nearly identical to that presented in the NASA paper.

2.25 r------------?-___,   1.75 '0..

0: 1.5  1.25  1 ?-?--?--?--?-? o 0.2 0.4 0.6 0.8  xlL'  Figure 10: Detailed Model Example Pressure Profile  Not only did the pressure profile show good agreement, but the temperature profile did as well. The following two plots in Figure 11 illustrate the GFSSP code output and the detailed model simulation output, respectively.

Again, the close agreement in profiles illustrates that the physics modeling of internal compressible flow is correct.

lO  1.16- -- Theoretical -NooUniform Grid with 20 nodes - Uniform Grids with 20 nodes - Uniform Grids with 40 nodes  1.12 I-? 1,08  1,04 -  1.00 0.00 0.20 DAD 0.60 0.80 1.00  xlL  1.16  1.12  , t: I- 1.08  1.04  1 ?-?--?--?--?-? o 0.2 0.4 0.6 0.8  xlL'  Figure 11: GFSSP vs. Detailed Model Example  Temperature Profile  To illustrate another scenario from Bandyopadhyay's paper, the effect of both friction and heating was introduced to the system from Figure 8. The pressure profile, much like before, shows a rapidly decreasing static pressure. When the gas reaches the tube outlet, the choked condition dictates the mass flow rate. The following two plots in Figure 12 illustrate both the GFSSP and detailed model simulation results, respectively, of pressure as a function of position in the tube.

Again the close agreement helps validate the detailed model.

Finally, the temperature profiles are calculated and plotted in Figure 13. As before these profiles match quite well, indicating that both friction and heating effects are accurately represented.

It should be noted that while other validation tests were performed on the detailed model, the above two examples only highlight a subset of those tests. Overall, the model was found to be in good agreement with other validated results.

The next few sections discuss a simplified version of the detailed model as well as the genetic algorithm routine used to find interesting point designs for different regions of the trade space.

.? 40 .3: e 35 " III III e 30 Co      ? 40 E:: ? 35 ::l I/) I/) ? 30 (L    0.2  0.2  0.4 0.6 xlL  0.4 0.6 xlL?  0.8  0.8  Figure 12: GFSSP vs. Detailed Model Example Pressure  Profile (Friction and Heat)   40 +-----,-----?----_,----_,----?   [ 100 ? ::l 1il Qj 80 a. E Q)  I- 60  o 0.2 04 0.6 0.8 x/L  40 ?--??--??--?----?----? o 0.2 0.4 0.6 0.8  xlL?  Figure 13: GFSSP vs. Detailed Model Example  Temperature Profile (Friction and Heat)   5. SCREENING MODEL  While matching validated models closely, the detailed simulation is computationally expensive with single blowdowns taking around a day to compute. The purpose of implementing a screening model is to enable the genetic algorithm routine to perform thousands of simulated blowdowns within a day. This requirement translates to performing these simulated blowdowns in sub-minute real time scales. Without this capability, the optimization algorithm would take prohibitively long to complete.

Several steps were taken to simplify the detailed model to reduce computational expense. These steps are listed below:  1. Use polynomial fit curves for calculating thermodynamic properties. Calling the NIST REF PROP software to retrieve thermodynamic data from takes a substantially longer time than evaluating a polynomial.

2. Increasing the time step in the simulation.

3. Using a lumped capacitance rather than marching  method to solve for only the beginning and endpoints of each pipe.

By incorporating the above features, the detailed model was effectively transformed into a fast screening model which executes a blowdown in less than a minute. The block diagram in Figure 14 illustrates how the screening model was used by the genetic algorithm .

..............................

pr!???o:?';,??lal 'do -- - - -- - - --  Curve Fit  I  lb:.=p a=ra =m=et=er=s=.!IH Design Vector  Propulsion Screening  Model  1 ______ - - --  Figure 14: Genetic Algorithm Routine  Later in the paper, comparisons between the results from the screening and detailed models show that the screening model accurately captures relevant system dynamics. These comparisons are done on three interesting design points, or set of parameters and variables for a propulsion system, which exemplify drastically different concepts (from the standpoint of service pressure, gas mixture, component selection, etc.).

N itrogen Dens ity V S .  Pressure ,  Temperature ( N I ST)   .? 400 0> ? >- ? 200 c C]) o o   . .  ? " " . . '  Temperatu re ( ?C)  .. . . . . . : . . . . . . . .

. . . . ? .

- 1 00 0  " ', ' ' " . "  . ' ,  " .

" .

? ?  'It ..

"  . . ?  " 6000 8000  2000 4000 Pressure (psi)  Polynomia l  Curve Fit Error  . . . . '- 4 . . . . . . g L.U c: 2 ? Ql c..

. , . '  . ' . . ' .

" ': '" .

. , '  .. .. . . ' .

. '  .

. . '  o  " .

. ' .

' "  . ,  " . . "  ' "  Pressure (psi)   Figure 15: NIST vs. Polyfit Curves Density Modeling of  Nitrogen  Another important comparison is that between the thermodynamic properties of the gas constituents retrieved by NIST, and those calculated by polynomial fit curves which were generated based on the NIST data. This comparison is illustrated in the following two plots in Figure 15 for the density of nitrogen gas as a function of temperature and pressure.

The first plot shows the truth (NIST) data for density of pure nitrogen gas at varying pressures and temperatures. The second plot then shows the error between true density and the density calculated by the polynomial curve fits. For pure substances, the model shows good agreement with NIST calculated densities. However, below 1800 psi, the error begins to grow. This was true of all the gases modeled at low pressures. Although this error never grows above 1 %, the use of gas mixtures with multiple constituents compounds the error. Figure 16 illustrates this effect.

The mixture represented above is a Tridyne? propellant gas with 1 0% hydrogen and 5% oxygen, and a balance of 1: 1 krypton and nitrogen. As is shown in the above plot, the errors grow to as large as 10%. Moreover, this error grows exponentially the closer the gas mixture comes to the saturation line. While this error in density primarily affects the stored propellant mass and flowrates, similar errors are seen with other properties such as internal energy and enthalpy. These property errors are then propagated into the thermodynamic calculations occurring in the screening model simulation.

Polynom ia l  Cu rve Fit E rror . .. . .

. '  .

1 0  . .

'  '- e W c: 5 Ql ? C]) c..

- 1 00  0 50 Temperature ( 0c) Pressure (psi)  Figure 16: Polyfit Curve Error for Tridyne'M Mixture  6. MULTI-OBJECTIVE OPTIMIZATION  Multi-objective optimization techniques maximize or minimize multiple competing objectives simultaneously by finding the set of non-dominated designs; also referred to as Pareto optimal designs. Designs are considered non? dominated if in order to improve one objective, the designer must settle for worse performance in at least one other objective. Therefore, the goal of multi-objective optimization is not to output the "best" design, but to give designers more information about the direct tradeoff of objectives by fmding the set of "good" designs. This is in stark contrast to the goal of single objective optimization which attempts to find the single globally optimal design.

Early multi-objective optimization research used weighting functions to combine multiple objectives into a single objective. Examples of these methods are: weighted sum, adaptive weighted sum [16], and normal boundary intersection. [17] These techniques have difficulty dealing with complex Pareto front geometry, and the procedures are computationally inefficient since each optimization run yields only one non-dominated design. [18] These limitations are particularly severe with highly non-linear systems with computationally expensive models, such as the propulsion system presented in this work. The development of heuristic multi-objective optimization techniques over the past decade has alleviated many of the problems present in single? objective techniques as well as gradient based methods.

These techniques have been used widely in the past in aerospace systems [19], including integrated launch vehicle design [20,21], UAY propulsion systems [22], and solid rocket motor design. [23] To the authors' knowledge, there has been no previous literature presented on the integrated modeling and multi objective optimization of small satellite propUlsion systems.

Figure 17: NSGA-II Schematic (adapted from Ferringer  2006)  The work presented in this paper uses a variant of the NGSA? II multi-objective genetic algorithm. [24] Figure 17 shows the optimization process for one generation. At the start of the generation, the current population Pt of size N creates an offspring population Qt of size N through tournament selection, recombination and mutation. The combined population Rt of size 2N is then sorted into non-dominated fronts. In this case there are five fronts corresponding to five ranks. The new generation population Pt+l of size N is then formed by adding members of Rt front by front until there is no more room for the next front. When this happens, crowding distance sorting determines the best members of similar rank based on how spaced out along the front they are.

The optimization routine repeats until convergence is observed or a specified number of generations is run.

The optimization problem considered in this paper is set up as a two objective minimization problem:  Min I (x, p) (26) s. t. g(x, p) ? 0 XLB, i ? Xi ? XUB, i (i = 1, . . .  , N) where J = objectives vector; x = design vector; and p = parameters, g = inequality constraints, and XLB, i , XUB, i are the lower and upper bounds of the design variables.

Objectives  The multi-objective optlllllzation framework allows for optimization over many objectives without the use of a weighting function. This paper considers two objectives: maximizing ?v and minimizing initial propellant tank pressure Ptank .

I (x, p) = rIl ] = [;?V ]  UZ tank Constraints  (27)  Four constraints are imposed on the optimization process. An additional fifth constraint is added later to ensure that fluid component temperature limits are not exceeded. The first two constraints are related to fluid flow in the propulsion system feed network. The first constraint is that there is no propellant saturation at any point in the feed network. The second constraint is that there is no choked flow at any point in the   feed network. If either of the first two constraints is violated, the fitness of the particular design is penalized. The third and fourth constraints place limits on the thrust produced by each nozzle. The third constraint is a constraint on minimum thrust. This constraint is derived from a minimwn acceptable vehicle acceleration parameter which is set to 0.01 m/s2. An acceleration of at least this amount allows a maneuverable spacecraft to perform efficient, near impulsive maneuvers.

The minimum thrust constraint is determined as follows:  F - Mwet x a LB - --?Nts (28)  where Mwet is the initial wet mass of the spacecraft, a is the desired acceleration and Nts is the nwnber of thrusters per translational direction. The maximwn thrust constraint is derived from the desire to not excessively load the reaction wheels while cleaning up from errors caused by the minimum impulse bit. The maximum thrust constraint is determined as follows:  F - {x LRW UB - T xd (29)  where LRW is the total reaction wheel angular momentwn capacity, ( is the maximum percentage of the reaction wheel capacity allowed to counter propulsion system errors, r is the thruster solenoid time constant, and d is the satellite characteristic dimension. The total reaction wheel capacity is determined from a desired slew rate as follows:  LRW = I X Wslew (30) where wslew is the desired maximwn slew rate and I is the spacecraft moment of inertia. The spacecraft is modeled as a cube with side dimension d and uniform density giving:  (31)  Constraints three and four are implemented with proportional penalty functions. This means that the penalty placed on the fitness is proportional to the amount of constraint violation.

Design Vector  The design vector is comprised of 8 design variables as shown in Table 4. Design variables 1 and 2 correspond to the initial fill pressure of the tank and the regulated pressure.

Design variables 3-4 determine the composition of the inert gas mixture in the system. The inert gas composition is given as:  (32)  (33)  (34)  Where CH2 is the molar concentration of hydrogen and CO2 is the molar concentration of oxygen, both fixed parameters.

Design variable 5 specifies the nozzle throat diameter, and    variables 6-8 specify the flow coefficient of the upstream and downstream isolation valves and the thruster solenoid valves.

Table 4: Optimization Design Variables  10 Design Variable Lower Upper Bound Bound  Xl Initial Tank Pressure (psi) 500 10000 x2 Regulator Pressure (psi) 37 500 X3 T nert Gas Parameter I 0 x4 Inert Gas Parameter 2 0 I Xs Throat Diameter 0.025 0.08 X6 Upstream Isolation Valve Cv 0.007 0.2 X7 Downstream Isolation Valve Cv 0.007 0.5 Xa Solenoid Cv 0.01 0.2  7. COMPONENT AND TUBING SIZING  While several of the component and tubing parameters are varied by the optimization routine (refer to Table 1) , other specifications are needed to analyze the tradeoffs involved.

For example, components that can accommodate large flow rates and high service pressures are typically heavier (more metal is required to maintain structural integrity and larger orifice area). The same trend is also relevant in tube sizing (a larger inner diameter mandates a larger outer diameter).

Therefore, by allowing the optimization routine to trade sizing characteristics of the valves to accommodate varying mass flow rates demanded by the thrusters, the feed system mass must also be adjusted. To model the relationship between flow capacity, service pressure and mass, several strategies were employed. The component masses, including that of the propellant tank, were linked to the flow coefficient, service pressure, volume (in the case of the propellant tank) and/or regulated pressure (in the case of the pressure regulator). These relationships were derived from actual components and databases available from commercial vendors. We illustrate the relationship defined for composite overwrapped pressure vessels (COPY) in the figure below:  6 ?================? x Structura l  Composite Industries 5 ? General Dyn amics  ? 4  0> ? ? ? '" '" 3 ('Q ? :2: 2  ? ? ? ? O L-----?----?----?----?----?  o 0 .05 0 . 1  0 . 1 5  0 .2  0 .25 Pressure x Volume (MPa x m3)  Figure 18: COPV Mass, Volume, and Service Pressure  Sizing Relations  Both Structural Composite Industries, LLC and General Dynamics produce a wide range of COPY's for aerospace   applications. By plotting the "sizing" metric of service pressure multiplied by hydraulic volume vs. the mass of the COPY, we derive a linear relationship which allows us to scale the propellant tank. More specifically, as the optimization routine analyzes the various systems with storage pressures between 500 and 8,000 psi, the cylinder weight changes according to this curve fit. Furthermore, note that in our simulation, we choose tank volume to remain fixed. Therefore, by varying service pressure, we adjust the tank mass accordingly. Similar calculations are made for each component and tube length in the system.

8. OPTIMIZATION RESULTS  The NSGA-II optimization process was run with a population size of 400 for 214 generations. Optimization convergence was monitored by computing the area under the non? dominated front at each generation. Figure 19 shows a plot of the two competing objectives of maximizing LW and minimizing initial tank pressure.

l1Vmax - - -1 - - - - - - - - - - - - - - - - - - - - - - - - - _ _  non?dominated  Area A  o ??--?----------------------?? Pmin Tank Pressure Pmax  Figure 19: Area-based Convergence Metric  Area A will increase as the optimization process converges to the true Pareto front; towards the upper left. The convergence metric ( is then derived as:  (35)  where P max and P min are the bounds on the tank pressure design variable, and LlVmax is set to a number arbitrarily higher than the maximum expected LW value. Area A is computed by taking the set of non-dominated designs, fitting a linear spline to the points and computing the area under the spline through numerical integration. Figure 20 shows the convergence of the multi-objective optimization through termination at generation 214. The plot shows that the routine converges fast until around generation 60 where convergence slows and tapers off between generation 100 and 150. Testing found that normalizing variables significantly increased the NSGA-II optimization convergence. The optimization results are shown in Figure 21. Figure 21-a shows the final non? dominated front, as well as the complete set of dominated designs that were evaluated during optimization. Figures 21- b,c,d show design details of the non-dominated set of designs.

Table 5: Non-dominated Design Families  Design !:lV Tank P Reg P N, Ar Kr Family m/s psi psi Inert Gas Molar Concentration  4.7 500 182.1 0.00 0.00 1.00 16.9 1106 194.8 0.00 0.00 1.00 29.5 1698 204.5 0.00 0.00 1.00 42.2 2300 201.4 0.00 0.00 1.00  2 50.0 2499 57.6 0.00 0.01 0.99 54.0 2602 47.3 0.00 0.00 1.00 55.5 2604 43.0 0.00 0.00 0.99  3 64.5 3022 40.9 0.00 0.00 1.00 70.7 3364 41.4 0.00 0.00 1.00 71.7 3473 39.0 0.0 \ 0.01 0.97  4 84.3 4747 38.0 0.05 0.05 0.90 92.8 6407 37.0 0.08 0.08 0.85 93.1 6498 37.0 0.10 0.04 0.85  5 97.7 7507 37.0 0.08 0.10 0.82 101.2 8478 37.1 0.09 0. \0  0.80  0 . 8  0 . 7 5 v- Q) (,) 0 . 7  c Q) ? Q) > 0.65 c 0 0  0 .6  0 .55 0 50 1 00 1 50 200 250  Generation  Figure 20: NSGA-II Convergence  The front can be broken into a set of five design families which share commonality. Table 5 lists these five families.

The families are ordered by increasing LW and initial tank pressure. Family 1 occupies the low LW and low pressure region of the non-dominated front, and consists of 100% Krypton inert gas designs. The designs within the family have high regulated pressure, high thrust, and large solenoid valves. Family 2 designs are similar to family 1 designs, but have a much lower regulated pressure, corresponding lower thrust, smaller solenoid valves and a larger upstream isolation valve. Family 3 designs continue to operate at low regulated pressures and low thrust, however, the designs feature larger solenoid valves and a smaller isolation valve. Families 1-3 all contain 100% Krypton inert gas composition. Family 4 is similar to Family 3, except that as the performance increases, increasing concentrations of both nitrogen and argon are added to the inert gas mixture. This is likely caused by gas saturation during blowdown which becomes more of a concern as the blowdown pressure difference increases. This is also the region of diminishing returns as increasing tank pressure results in less L1 V performance gain. Family 5 is similar to Family 4 except that the designs feature a much larger downstream isolation valve. This is likely caused by the choking constraint being activated as the inert gas density decreases (which increases volumetric flow rate for a given mass flow rate).

Cv Iso Wet Dt Cv Iso Up Down Cv Solenoid Thrust ISP Mass in gal/hr gal/hr gal/hr N s kg  0.026 0.076 0.048 0.149 0.52 84.3 24.7 0.025 0.073 0.082 0.127 0.59 83.9 25.6 0.025 0.049 0.116 0.115 0.65 83.4 26.4 0.025 0.060 0.143 0.119 0.64 83.0 27.2 0.025 0.199 0.162 0.010 0.16 82.9 26.7 0.025 0.192 0.161 0.034 0. \ 5  82.5 26.7 0.025 0.02\ 0.223 0.089 0. \4  82.7 26.0 0.026 0.0 \3 0.268 0.079 0. \4  82.4 26.4 0.027 0.009 0.268 0.077 0. \ 5  82.0 26.7 0.029 0.007 0.253 0.103 0.16 82.8 26.8 0.029 0.010 0.256 0.115 0. \6  84.7 27.7 0.029 0.007 0.257 0.108 0. \6  86. \ 28.6 0.029 0.007 0.402 0.092 0.16 86.3 28.7 0.028 0.007 0.448 0.097 0.16 86.7 29.2 0.029 0.007 0.372 0.093 0. \6  87.3 29.6  Table 5 also lists the performance parameters of thrust, specific impulse (lSP) and the initial wet mass of the spacecraft for the five design families. Family 1 has thrust around 0.5N while families 2, 3, 4and 5 have much lower thrust which may be a consideration during design selection.

The ISP of the systems first decreases in Family 1 with increasing tank pressure due to lower blowdown temperature, is constant in Families 2 and 3 and then increases in Families 4 and 5 due to a lower average gas molecular weight as the inert gas composition changes. The initial spacecraft wet mass also increases as propellant gas density and gas mass increases and as the feed system components increase due to a combination of higher pressures and volumetric flow rates.

An optimization was also performed with an additional temperature constraint. The constraint was that at no point in time during system operation should the propellant fluid temperature drop below -56?C, which is a common fluid component minimum temperature rating. The optimization was run for 110 generations with a population size of 400.

Figure 22 shows the details for the non-dominated designs for the temperature constrained optimization. Figure 22-a shows that the unconstrained Pareto front completely dominates the temperature constrained Pareto front. This is expected since adding a constraint to the optimization problem can only reduce system performance and therefore the system designer reduces options (and performance) by limiting the design space. Figure 22 can be compared with Figure 21 to see differences. The most noticeable difference is that in the constrained case, tank pressures above 5700psi are absent from the non-dominated design set. This is likely due to the situation where increasing tank pressure would cause an increase in the amount of Nitrogen (Figu re 22-b) needed to meet the temperature constraint and that this increase in Nitrogen would actually cause a reduction in total L1 V. Therefore, increasing tank pressure would decrease L1 V and the design is dominated.

1 20 1 00  u;- 80 I 60 > <J 40   a E ? 0 ? 0.75 :2 ?iii 0 c. 0 .5  E 0 U '" 0 .25 til c.9 t:: QJ E 0    '" 1 50 'E => 1 00    0 .5  ? 0 4  til . ? C 0 .3  QJ ?u IE 0.2 QJ 0 u ? 0 . 1  0 u:::   a .

2000 4000 6000 8000 1 0000 I n it ial Tank Pressure (psi)  b.

Krypton  N?rogen Argon  0 2000 4000 6000 8000 1 0000 I n it ial Tank Pressure (psi)  C .

Reg ulated Press u re (psi)  /  Th roat Diameter (mi l )  0 2000 4000 6000 8000 1 0000 I n it ial Tank Pressure (psi)  d.

Downstream  Isolation Valve "-  Solenoid Valve  I / U pstream Isolation Valve  0 2000 4000 6000 8000 1 0000 I n it ial Tank Pressure (psi)  Figure 21: Optimization Results   1 20 1 00  u;- 80 I 60 > <J 40  0 0  a E ? 0 ? 0.75 :2 ?iii 0 c. 0.5 E 0 U '" 0 .25 til c.9 t:: QJ E 0     .el 1 50 ?c => 1 00   0 0  0 .5 .c ? 0.4 ? C 0 .3  QJ ?u IE 0.2 QJ 0 u ? 0 . 1  0 u:::  0 0  uncons? tY \  M i n i m u m  tem peratu re constrained  2000 4000 6000 8000 I n it ial Tank Pressure (psi)  / Argon  2000 4000 6000 8000 I n it ial Tank Pressure (psi)  <L? Reg ulated Press u re (psi) "'" /  Th roat Diameter (mi l )  - .. / 2000 4000 6000 8000  I n it ial Tank Pressure (psi)  Downstream Isolation Valve  \ Upstream Isolation  Valve  I  2000 4000 6000 8000 I n it ial Tank Pressure (psi)  a.

1 0000  b.

1 0000  C .

1 0000  d.

1 0000  Figure 22: Constrained Optimization Results    There is great benefit to providing the designer with the overall picture to allow for more informed decision making.

For example, a system designer who has settled for a 5000psi initial tank pressure design could then decide if it was worth the additional time and money to qualify fluid control components to lower temperatures in order to gain and additional ? 15 mls of I:!. V.

Three non-dominated designs from the unconstrained temperature optimization were chosen for further analysis with the detailed simulation model. Each design represents a different design family, and is shown in Table 6.

Table 6: Selected Point Designs  TO Objective I Design Design Design Design Variable 1 2 3  Iz  tlV (m/s) 46.14 82.83 99.63 11 > Xl Initial Tank Pressure (psi) 2493.8 4504.0 7996.4  Xz Regulator Pressure (psi) 208.5 37.1 37.0 X3 Inert Gas Parameter I 0.4629 0.5002 0.4560 X4 Inert Gas Parameter 2 0.0009 0.0824 0.1934 Xs Throat Diameter (in) 0.0251 0.0295 0.0293 X6 Isolation Valve #1 Cv 0.0570 0.0164 0.0072 X7 Isolation Valve #2 Cv 0.1 l56 0.2608 0.3593 Xs Solenoid Cv 0.1227 0.1099 0.0924  9. DETAILED ANALYSIS OF SELECTED DESIGNS  The Detailed Model allows the user to track multiple properties in the feed system over time. These properties include but are not limited to, thermodynamic state of the gas, component and pipe wall temperatures, stored propellant mass, cylinder pressure and cylinder temperature. Tracking these properties over time allows the user to identify temperature and pressure extremes at interesting points or junctions of the system, monitor propellant consumption and mass flow rates, and calculate thrust and r::,. V expended.

Below are several plots illustrating some of these quantities as a function of time for Point Design 1.

The first plot shown below illustrates that a total of four blowdowns are being performed, each expending 22.5% of the stored propellant mass.

Figure 23 illustrates a time history of the blowdowns, each of which take roughly 2 minutes of full-open thruster firing (four thrusters total). Note that at the conclusion of each blowdown, the thermodynamic states are reset (as indicated by the horizontal dotted lines above). During the reset, the temperatures are returned to their initial state, the cylinder pressure is recomputed at the current density and reset temperature, and the feed system is re-initialized.

The temperature of the feed system is next illustrated below in Figure 24. Each plot corresponds a snapshot in time after the beginning of the first of four blowdown cycles.

Propel lant Remaining 2000 .--------------------------,  Thermodynamic reset  ? 1 500 \. . .. . . . . .. .. . . .  \? :?er b lowdown ({J 1 reset ? 1 000 .. . .. . .. .. .. . .. .  \ +t ? I 2 reset = I ? I e 500 I Q. I  I I  . "  . "\3+trese? I  o ?------?----?------?--? lz b  Time (sec)  Figure 23: Propellant Mass Remaining  (point Design 1)  At the beginning of the blowdown, the gas mixture is expanded through the regulator and as a result is much colder than the piping and feed system components. However, as time progresses, the convective heat transfer between the gas and piping causes the temperature of the gas to increase and that of the piping to decrease. This heat transfer occurs until the gas and piping reach an equilibrium temperature. At time = 100sec, the gas and piping temperatures are much closer together than at the onset of the blowdown.

These spikes correlate to the feed system components (e.g.

isolation valves) which are much heavier that the piping itself and thus have much higher thermal capacitances. Recall from the previous section on thermodynamic modeling, that the gas flow within a feed system component is considered isenthalpic and thus there is no direct heat transfer between a component and the gas. Instead, as the pipes transfer heat to the gas, the feed system components transfer heat to the pipes. However, the limited cross-sectional area for this heat transfer as well as the piping and component material (stainless steel, a poor conductor of heat), limits the heat that can be conducted to the pipes. Thus the spikes in the feed system plumbing remain discernible even after longer periods of time.

Another important feature of these plots is the temperature spikes at various points in the feed system. By tracking the temperature profile of the feed system over time, the range of wetted surface temperatures for each component can be determined. This information is particularly helpful for specifying components which enforce operational limits on wetted temperatures. Typically for flow control valves, these limits are determined by the elastomeric seals housed inside the component. Exceeding the temperature limit of these seals could compromise the integrity of the elastomeric material and result in leakage or particulate contamination of the feed system. Figure 25 is a plot of the temperature extremes for the wetted surfaces of each component in the modeled feed system for Point Design 1.

2: ? ? ? Q) a. E Q) I-  t ? ? ? Q) a. E Q) I-  t ? :::J rn Qj a. E Q) I-  Feed Syste m/Gas Mixture Tem p  @ t = 0.5  sec 30 r-----?----?------?----?  /J! 0 -30  -60  -90  - 1 20  0 20  ?. I ... 0"'/\ I / Componen.t and I / Piping Terperature : 1 \ ; V Gas Mixture TemJerature  40 60 80 Distance Downstream of Cyl i nders ( in)  Feed System/Gas M ixture Tem p  @ t = 25 sec 30 r-----?----?------------? !'  0 V;J!

?  -30  -60  -90  - 1 20  0 2 0 40 60 80 Distance Downstream of Cyl inders ( in)  Feed System/Gas M ixture Tem p  @ t = 50 sec 30 r-----?----?------?----?  o  -30  -60  -90  - 1 20 L-____ ? ____ ? ____ ?w_ ____ ? o 2 0 40 60 80  Distance Downstream of Cyl inders ( in)  Feed Syste m/Gas Mixture Temp @ t = 1 00 sec 30 r-----?----?------?----?  Feed System Components :'  \ ' i? 0 ?? -30 ! I -60  -90 UL/? . . - ? I - 1 20  0 20 40 60 80 Distance Downstream of Cyl i nders ( in)  Figure 24: Feed System Temperature Profiles at Various  Simulation Times (Point Design 1)   o  ? -20 ? ? -40 ? ? -60 E ? -80  - 1 00  Com ponent Wetted Surface Temperatures  ? ?  - 1 20 L-?--?----?--?--?----?-- C IV #1  PR IV #2 M SL  Figure 25:  Component Wetted Surface Temperatures  (Point Design 1)  Where C = cylinder; IV = isolation valve; PR = pressure regulator; M = manifold; SL = solenoid. Note that the regulator experiences the widest range due to the fact that the expansion process associated with pressure regulation results in extreme drops in gas temperature. Also, the general trend for the component temperature ranges to shift warmer the farther downstream of the regulator, illustrates the effect of the convective heating of the gas via the tubing and components.

Finally, a comparison of the three performance metrics between the detailed and screening models is surrunarized in Table 7 :  Table 7 :  Selected Point Design  Design Model Thrust lsp AV Range Range (m/sec)  (N) (sec) Detailed 0.63 - 0.68 82.25 - 84.81 51.8 1 Screening 0.63 - 0.68 81.90 - 83.99 46.1 Detailed 0.16 - 0.18 81.94 - 83.99 79.5 2 Screening 0.16 - 0.17 82.73 - 85.90 82.8 Detailed 0.16 - 0.18 90.29 - 94.16 102.4 3 Screening 0.16 - 0.18 85.79 - 89.03 99.6  Note that the screening model was able to predict thrust almost exactly as the detailed model. Likewise, specific impulse was fairly close (within 5% error) between the two models. And /:,. V was also within reason to the detailed model calculations (within 12% error). This further affirms that the screening model, utilized by the genetic algorithm to identify optimal propulsion system designs, is sufficient for this purpose. It also gives credibility to the screening model for generating rough performance metrics on a singular design, before subjecting the design parameters to a more thorough analysis in the detailed model.

CONCLUSIONS  The method presented in this paper allows for a novel approach to designing highly integrated small satellite propulsion systems. By combining a multi-disciplinary modeling tool and a multi-objective genetic algorithm routine, we were successfully able to identify globally efficient designs. This approach avoids traditional design methodology that oftentimes optimizes the performance of subsystems independently without consideration of the inter? subsystem coupling.

However, the simulation and genetic algorithm routine is a work-in-progress and several issues are currently being addressed. The most stressing of which is to add component volume constraints, especially since small satellites are volumetrically constrained. The simulation could also be extended by adding capability to model redundant feed systems where parallel feed paths and multi-inlet, multi? outlet junctions are incorporated. In addition, the simulation could be further expanded by broadening the trade space to include liquid propellants. The genetic algorithm routine would also benefit from optimizing the NSGA-II mutation and cross-over settings as well as normalizing the real encoded design variables. Another novel idea would be to intelligently seed the genetic population with design family traits identified from preliminary optimization studies on fewer design variables. These modifications would speed convergence and improve the quality of non-dominated designs.

ACKNOWLEDGEMENTS  This work is sponsored by the Department of the Air Force under Air Force Contract #F A8721-05-C-0002. Opinions, interpretations, conclusions and recommendations are those of the author and are not necessarily endorsed by the United States Govermnent.

