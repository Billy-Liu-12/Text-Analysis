The Multi-Tenant Data Architecture Design for the  Collaboration Service System of Textile & Apparel

Abstract?Multi-tenant technology is one of key competencies for Software as a Service (SaaS) to achieve higher profit margin by leveraging the economic scale. In China, there are a number of textile & apparel OEM enterprises, but due to the lower value- added products, they can not invest on information platform with very big budget. A collaboration service system supporting multiple tenants can significantly reduce cost of customization, deployment and operation of a great number of textile & apparel enterprises.

This paper designs and implements a collaboration service system for textile & apparel supply chain. In this system, all tenants share the same infrastructure and application instance.

However, from the user experience, the tenant would naturally dedicate to access and use the service as if there were dedicated ones. Therefore a cost-effective and secure multi-tenant infrastructure, especially in data access architecture, should be carefully considered. We analyze the key implementation patterns of data access multi-tenancy on aspects of isolation, security and customization. Furthermore the detailed access control flow is demonstrated.

Keywords - multi-tenant; SaaS; textile & apparel; supply chain; isolation; security

I.  INTRODUCTION China is the one of the biggest textile & apparel country in  the world, the textile & apparel is playing an important role in the national economy, it?s a key driver to push the economy growth. Chinese enterprises have the advantage in raw materials, labor resources, but they are still staying the lower level in the global textile & apparel supply chain and have no big advantage on the global competition. The enterprises are facing the great challenges on market competition and internationalization requirement, supply chain management is the unavoidable strategic trend for enterprises development [1,2]. But due to the lower value-added products in these enterprises, they can not invest on information platform with very big budget, the application system based on Software as a Service (SaaS) is a realistic approach [3,4].

SaaS is a kind of brand-new software application style provided by internet, the enterprises needn?t purchase, build  and maintain the hardware and the software [5]. SaaS providers usually develop or acquire software applications and host them as services to serve specific needs of their clients [6]. To make the service more profitable and more attractive provided to their clients, especially the Small and Medium Business (SMB) clients, the service providers have strong demands for multi- tenancy enabled software applications and the associated hosting operations. In a multi-tenant enabled service environment, user requests from different organizations and companies (tenants) are served concurrently by one or more hosted application instances based on the shared hardware and software infrastructure [7,8]. The multi-tenant approach can bring in a lot of benefits including improved profit margin for service provider through reduced delivery costs and decreased service subscription costs for clients.

Donghua University worked with IBM China research lab together, designed and realized a textile & apparel supply chain collaboration service system based on SaaS mode. This platform is providing the native multi-tenant pattern, which has the potential of supporting over thousands of SMB clients simultaneously; this system is constructive for the textile & apparel enterprises to improve their global market competition capability.

The rest of this paper is organized as follows: Section 2 proposes the collaboration service system architecture for textile & apparel supply chain based on SaaS. Section 3 analyses all kinds of data access multi-tenant design patterns from the aspects of resource isolation, security and customization. Section 4 describes the access control flows based on the above data architecture. Finally, section 5 concludes this paper and outlines future works.



II. COLLABORATION SERVICE SYSTEM ARCHITECTURE FOR TEXTILE & APPAREL SUPPLY CHAIN  In this section, we propose the collaboration service system architecture for textile & apparel supply chain (Figure 1). The objective is to provide a virtual supply chain management and service platform which is cost-effective, secure, flexible, quick- response, dynamic alliance oriented, business integration supported.

Figure 1 Collaboration service system architecture for textile & apparel supply chain  A. Main Business Services of the System The collaboration service system is mainly to serve the  SMB tenants who care typically about the costs without significant loss in utilizing the applications in general. In the multi-tenant enabled service environment, users? requests from different organizations and companies (tenants) are satisfied concurrently by one or more hosted application instances and database based on a scalable, shared hardware and software infrastructure. Tenants can not only subscribe the service but also they can deliver the application systems like CAD, CAM, CAPP, or the newly developed service into the textile & apparel supply chain collaboration service system by Web, and with SOAP format. It consists of 5 main business services: UDDI linker, base service, collaborative commerce, decision support service and platform operation service.

1. The service provider can register the newly defined service into UDDI registration center. To support this function, this system contain the UDDI linker which link with standard UDDI registration center. The service demander can find service in the registration center by UDDI linker, and request the application service which is linked with Web.

2. The supply chain management basic service consists of sales management, purchase management, stock management, production management, and logistics management, every functional model is focusing on the main business process in  textile & apparel enterprises, to provide the services to stores/clients, wholesaler/retailer, merchant/middleman, manufacturer, raw material suppliers and logistics suppliers.

3. Collaborative commerce means that the enterprises turn their key focus from arranging inside resources well to virtual enterprises resources [9,10]. To combine the all suppliers, partners, clients, retailers for all enterprises, form a whole, inter-cooperation production and retailing plan. Collaboration business is a senior style of electronic business, it mainly provides service to upstream enterprises and downstream ones in the supply chain, including requirement sharing and requirement analysis, business process management and standard establishment, virtual supply chain design and dynamic alliance building. The basic information service in platform is helping the every involved enterprise to realize their profit growth, and collaboration business really links the all enterprises in this platform, and forms a close cooperation value community. This community consists of brand owner, raw material suppliers, apparel manufacturer, retailers, logistics service providers and clients, to realize the information sharing and business integration, the brand owner is a core enterprise, it works with suppliers and partners closely and builds a dynamic and effective business running model, so quickly respond the clients? requirements.

4. The decision support service of the platform is taking the Web as the carrier, takes advantage of the shared decision   Business Process  CAD / CAM Enterprise Applications  Web Service Encapsulation Interface  CAPP  Base Service  UDDI Linker Operation  Service  Collaborative Commerce  Decision Support  SOAP Message  UDDI Register Center DB  Windows Server  Tenant A   Tenant B   Tenant C      Business Server Layer  Multi-Tenancy Data Access Layer  Resource Isolation  Security Isolation  Customization Scalability  Collaboration service system for textile & apparel supply chain    resources like data, model and knowledge to solve all kinds of decision issues, provides the operation and decision support to the enterprises, including demand analysis and forecast, stock optimization decision, production planning optimization, production schedule optimization, logistics network design, vehicle schedule optimization, consumer satisfaction analysis and so on.

5. The platform operation service mainly provides the support to the future normal running, including providing flexible service option (SCM trusteeship and application tenancy), service delivery process management, service performance appraisal, service groupware management, service running platform monitor and so on.

B. Components of Multi-tenancy Data Access Layer We should support application level isolation among  different tenants. In a multi-tenant system, all tenants essentially share the same infrastructure and application instance. However, from the user experience, the tenant would naturally desire to access and use the service as if there were dedicated ones. Therefore a cost-effective and secure multi- tenant infrastructure, especially in data access architecture, should be carefully considered [11]. Multi-tenant infrastructure should take care of the following key aspects:  (1) Source Isolation: Separate the resources allocation and usage among tenants;  (2) Security: Prevent invalid resources access and potential malicious attack;  (3) Customization: Support tenant-specific features or Service Level Agreement (SLA) through configurations;  (4) Salability: Scale the SaaS application?s delivery infrastructure to support growing number of tenants with well managed cost increase, performance and availability guarantee;

III. DESIGN PATTERNS OF MULTI-TENANCY DATA LAYER  A. Resource Isolation patterns In the data layer, data isolation for a multi-tenant  application adopts totally shared (Share table/schema pattern): multiple tenants share same database, and share same tables/schema. The implementation pattern is as shown in figure 2.

Figure 2. Shared table/schema pattern  Records of all tenants are stored in a single shared table sets mixed in any order, in which a TenantID column is inserted in each table to associate the data records with the corresponding tenants.

B.  Security Patterns This section focuses on the data security isolation among  tenants, which is also described as ?preventing a user from getting the privileges to access data belonging to other tenants?.

It aims to safeguard the security of each tenant at comparable security levels as those of the traditional single-tenant system.

Implicit filter-based pattern is adopted (figure 3). Through adding the application level filter into each user request of tenant, the data of a tenant can be ensured to be accessed only by the tenant itself. For shared table/schema isolation pattern, the filter is based on the TenantID column in every table to access records associated with the appropriate tenant, e.g.

modifying a SQL statement with where clause ?TenantID=XXX?.

Figure 3 Implicit filter based pattern  C.  Customization Patterns In data customization aspect, for the share table/schema  isolation pattern, because of the sharing of schema, it can only support data field extension, which flexibility degree is usually measured by the maximal number of extension fields. The implementation Extension sub-table pattern is in figure 4.

Main shared table  TenantID PorderID ? RecordID TenantA P010001  0001 TenantB P010002  0002 TenantC P020001  0003  Extension table   Extension Definition table  RecordID ExtensionID  ExtensionID Name Type 0001 Ex0001  Ex0001 Address String 0001 Ex0002  Ex0002 Email String 0002 Ex0001  Figure 4 extension sub-table pattern  A sub table, which associates with the main table via the record id column, is built to store all the extended fields of the records in main table. This approach is very flexible. It does not have limitation in the maximal number of the extended  Request Data  UI and Biz  Logic Tenant A  Tenant B  Tenant C  Tenant A  Tenant B  Data Access Layer  Request Data  Add tenant-oriented filter  Tenant A  Tenant B  Tenant C    fields. However, it may suffer from poor performance caused by joint-search.



IV. ACCESS CONTROL FLOW BASED ON THE MULITI- TENANT  Based on the above multi-tenant data design mode, the middle-small size textile & apparel enterprises can subscribe the service as a tenant administrator, involve into the virtual supply chain system, communicate with upstream and downstream enterprises in whole supply chain. Tenant administrator can administrate their own enterprise user in a self-service mode. When the users log on the system, the platform can identify the TenantID & Type, so can ensure the legal access. The detailed access control flow is as figure 5.

Figure 5 Multi-tenant Authentication flow  The multi-tenant platform data access includes the next 4 steps.

Step 1: Get the TenantID and Type from the login information;  Step 2: Utilize TenantID and Type to modify JDBC, that is to revise the SQL statements and add the terms to simply programme so that there is no need to think about multi-Tenant issue;  Step 3: Use Web Application Stress (WAS) tool to validate the system, to get the validated user information and store them into WAS security topic;  Step 4: Get the user access information from WAS Security by the interface TenantUti class, including TenantID, Type and UserID.

After complete the above validation process, the member enterprise in virtual supply chain can deposit and withdraw the data no matter from their own enterprises or the cross enterprises, but they just can get the authorized data.



V. CONCLUSION The paper designs and implements a supply chain  collaboration service system based on SaaS mode for middle- small size textile & apparel enterprises, and demonstrates the data access layer from the aspects of resource isolation, security and customization to ensure the security of multi- tenant platform user access information. The objective is to develop the collaboration service technology for middle-small size textile & apparel enterprises, to support the digital management and electronic business, and provide the suggestion to Chinese textile & apparel supply chain research and implementation.

