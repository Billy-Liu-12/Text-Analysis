Application and Improvement Discussion about Apriori Algorithm of

Abstract-Objective: To investigate and  discuss the application and improvement about  Apriori algorithm of association rules mining  (ARM) in cases mining of influenza treated by  contemporary famous old Chinese medicine.

Methods: We analyzed the basic principles,  processes and algorithms about the Apriori  algorithm of ARM, then applied this algorithm to  the cases mining of influenza treated by  contemporary famous old Chinese medicine. SPSS  Clementine12.0 statistical software was used to  mine the association rules between Etiology and  traditional Chinese medicine (TCM), Syndromes  and TCM, Symptoms and TCM. Then the  disadvantage of the algorithm was summarized,  and several improved high efficiency algorithms  were discussed. Results: The Apriori algorithm of  ARM could extract the association rules between  common Etiology (Evil of wind, cold, heat and fire)  and TCM, Syndromes (Syndromes of wind-heat or  wind-cold invading exterior) and TCM, Symptoms  (chills, fever, cough, nasal congestion, runny nose)  and TCM. However, it became inefficient when the  sample was large. Therefore, it was necessary to  search for an improved Apriori algorithm in order  to enhance the efficiency of ARM of Chinese  medicine cases. Conclusion: The classic Apriori  algorithm is useful to mine cases of influenza  treated by contemporary famous old Chinese   1/7   Jian Yin  School of Information Science and Technology,  Sun Yat-sen University  Guangzhou, China  issjyin @mai1.sysu.edu.cn  medicine, and the improved Apriori algorithm  may help to improve the efficiency of mining.

Key words-Association rules mining (ARM);  Apriori algorithm; Cases of influenza treated by  famous old Chinese medicine; Data mining;  hnprovement

I. INTRODUCTION  Gradually rises in recent years, Data Mining,  is a new technology which extracts hidden laws  and establishes accurate models from huge data  to predict the future with the methods of  statistical combined with artificial intelligence  algorithms. Its accepted definition is given by  Fayyad: Data mining is an important process  which is used to determine the valid, unknown,  new, potentially available data and make sure  the model will eventually be understood.

The Association Rule Mining (ARM),  proposed by Agrawal et al, is one of the most  active research methods in data mining. It was  originally proposed for the analysis of market  basket problem in order to find the link rules  among different commodities from the  transaction database, and then, achieved the  destination that other associated data information  could be deduced from known data information  with the mined potential association rules. It is  mainly used to identify specific frequent patterns  from a large number of event records in the    database, and to identify frequent patterns,  relational rules or causal structures from the  collection of items or collection of objects in the  log data, relational data or other information  carriers through a variety of mining algorithms.

Apriori algorithm is the first, most classic and  most influential algorithm in ARM [1]. It  identifies itemset in the database and forms rules  with the iterative method through layer by layer  search, and the computing process is composed  of Connection (class of matrix operations) and  Pruning (remove unnecessary intermediate  results). Thereinto, Itemset is a collection of  items, and the itemset containing K items is  named K itemset. The Frequency of the  itemset refers to the number of transactions of  the itemset. If a particular set meets the  minimum support, it will be called Frequent  Itemset [2].

ARM in Data mining, as an important  method of obtaining effective association rules  from huge data information, has been extended  to many areas and paid lots of attention  nowadays. However, it is still in its infancy of  Apriori algorithm of ARM in the mining of  Chinese medicine cases, and it is seldom  reported of the application of Apriori algorithm  in the cases mining of influenza treated by TCM,  as well as the explore and discussion of  relatively mature and highly efficient mining  algorithms so far. In this study, the application  and improvement of Apriori algorithm of ARM  in cases mining of influenza treated by  contemporary famous old Chinese medicine was  researched with influenza as an example.



II. ME1HOD  A. Basic principles ofAp riori algorithm in ARM  Association rules can be described with three  parameters: 1) Support, describing the frequency  of rules, referred as S (XY), and Minsup  represents the minimum support; 2) Confidence,  describing the intensity of rules, referred as C  (XY), and Minconf represents the minimum  2/7   confidence; 3) Frequent itemset. In a short,  ARM is used to identify the association rules  which should meet the minimum support  Minsup and the minimum confidence Minconf  both given by users from the database [3].

Apriori algorithm, the most commonly used  method in ARM, is used to find out the  relationship among itemset in the database with  the iterative method through searching layer by  layer. The basic principle is given by the below  flowchart [4]:  Figure 1 Flowchart ofApriori algorithm  B. The basic steps of the Apriori algorithm  The process of Apriori algorithm repeats two  main modules: Connections and Pruning. The  specific steps are given as follows:  1) Set the minimum support Minsup = sand  minimum confidence Minconf = c;  2) Generate the candidate itemset, and the one whose support ~ minimum support is called  Frequent Itemset;  3) Readin all the matters from the database,  and each is used as candidate 1- itemset, then  generate support of each itemset. After that,  candidate 2- itemset collection can be generated  from frequent 1- itemset collection;  4) Scan the database, and candidate 2- item set  collection can be generated, then candidate 3-  itemset collection can be generated with the  same method as before;  5) Scan the database, and compare the  minimum supports, resulting in a higher level of  Frequent Itemset collection. Then, next  candidate Itemset should be generated until no    new candidate itemset comes out.

C. Code ofApriori algorithm  Set Ck as the collection of candidate  k-itemset, F as the collection of frequent  k-item set. The pseudo-code of the Apriori  algorithm in ARM used to generate Frequent  Itemset is given as following:  1: k=1 2: Fk={i liE I" ({i}) ~N*Minsup  3: repeat  4:k=k+l  5: Ck=apriori- gen (Fk-l )  6: for each matter t E T do  7: C t =subset (Ck, t)  8: for each candidate item set c E C, do  9: (c) = (c) +1  10: end for  11: end for  12:Fk={clc ECk " (c) ~N*Minsup}  13: until Fk= 14: Result? UP  Apriori algorithm uses an iterative method  through searching layer by layer, and the method  is based on the nature that any subset of a  Frequent Itemset is also a Frequent Itemset, and  k-item set is used for (k +1)- itemset.

D. Application of Ap riori algorithm of ARM in  cases muung of influenza treated by  contemporary famous old Chinese medicine  1) Data Entry  a) Select medical cases Retrieve journal  articles from the Chinese Biomedical literature  CD-ROM Database (CBMDisc), and retrieve books from the Worldcat Library catalog, selecting a total of 72 cases of influenza treated  by contemporary famous old Chinese medicine.

b) Sorting Sort the full text of each  medical case into 4 items: the pathogenic factors,  Syndromes of each disease, clinical Symptoms  and the selection of Chinese medicine.

c) Establish a database Use SPSS 18.0  statistical software to establish a database  ( exclude the item whose property is less than 15  percent in order to facilitate data mining).

2) Data preprocessing  Pretreat the vague statements and different  expressions of the same TCM term due to  geographical, time and personal habits, or other  reasons. The specific problems and solutions are  given as follows:  a) Synonyms Establish of a synonym  table, correspond the standard word with all the  synonyms, then replace all the synonyms by the  standard word;  b) Polysemous word Split the original  word according to the context of the whole  passage. Such as, "hemoptysis sputum" should  be split into "hemoptysis" and" expectoration".

c) Standardize Chinese medicine  information For the medicine with several  different names, define and standardize the name  of medicine according to the Chinese Medicine  Name Dictionary (Cai Yongmin, Chinese  Medicine Press, ISBN: 780 089 323).

3) Apriori algorithm for ARM  Respectively generate collections of  Frequent Itemset from 3 relationships which are  "Etiology and TCM", "Syndromes and TCM",  "Symptoms and TCM", and then, each of the  Frequent Itemset generates their own associated  rules. Select strong association rules according  to the forms of " Etiology aTCM "," Syndrome aTCM "." Symptoms aTCM ''. In this study, the maximum number of itemset in generated rules  is determined by setting the minimum support  (Minsup = 0.20) and minimum confidence  (Minconf = 0.80). Then set the output which  should contain all the rules meeting the  requirements and respective support and  confidence of each rule.



III. RESULTS  A. Results ofcases mining of influenza treated by  Chinese medicine with Apriori algorithm in  ARM  Choose strong association rules which meet  3/7     the rrunrmum support (Minsup) = 0.20 and  minimum confidence (Minconf) = 0.80, then list  and establish a form according to the descending  sort of confidence. The results are given as  following:  1) Association rules between Etiology and  TCM  The results show that there are closely  association rules between evil of wind and  Forsythia, Honeysuckle, Cassia Twig; evil of  cold and Cassia Twig, Ephedra Herb; evil of  heat and Chinese Mosla Herb, evil of fire and  Forsythia, Honeysuckle. (Table 1) TABLE 1 ASSOCIATION RULES BETWEEN ETIOLOGY AND  2) Association rules between Syndrome  andTCM  The results show that there are closely  association rules between Syndrome of  wind-heat invading exterior and Forsythia,  Honeysuckle, Skullcap; Syndrome of wind-cold  invading exterior and and Cassia Twig. (Table 2) TABLE 2 ASSOCIATION RULES BETWEEN SYNDROME AND  TCM IN CASES OF INFLUENZA TREATED BY TCM  4/7   3) Association rules between Symptom and  TCM  The results show that, in the systemic  symptoms, there are higher degrees of  confidence between chills and Cassia Twig,  Ephedra, Nepeta, Divaricate Saposhnikovia Root;  fever and Forsythia, Honeysuckle, cutellaria,  Bupleurum; suggesting that the 8 herbs above  are commonly used by famous old Chinese  medicine. While in the local symptoms, there are  higher degrees of confidence between cough and  Campanulaceae, Radix Stemonae; nasal  congestion with runny nose and Divaricate  Saposhnikovia Root; suggesting that the 3 herbs  above are commonly used by famous old  Chinese medicine to treat diseases with  syndrome differentiation. (Table 3) TABLE 3 ASSOCIATION RULES BETWEEN SYMPTOM AND  TCM IN CASES OF INFLUENZA TREATED BY TCM

IV. DISCUSSION  A. Value and disadvantages ofApriori algorithm  ofARM in cases treated by TCM  These results above indicate that, Apriori  algorithm can be relatively effective in cases  mining of influenza about the association rules  between the Etiology and TCM, Syndromes and  TCM, Symptoms and TCM. The results about  selection of Chinese medicine and the law of  treatment with syndrome differentiation are  helpful to guide the clinical treatment to  influenza in a certain extent. And some other  5/7   reports obtained the similar conclusion [5].

But it can be seen in the operation that  more and more times Apriori algorithm had to  scan the huge database when the number of  generated Frequent Itemset became larger as the  sample size of cases was expand, as a result,  more and more time had to spend on the  operation. The main reason may relate to the  inherent rules of the algorithm, that is, the entire  database has to be scanned once before the  Frequent Itemset of each layer being generated,  as a result of that the candidate item set in  Apriori algorithm is generated layer by layer. Its  time consumption may be mainly in the  following 3 aspects:  1) The times to determine join condition  was too many when generated the (k+1)  candidate itemset with the k Frequent Itemset  connection;  2) Each of the c E C had to be determined  in order to judge whether each of k (k-l)-subsets  of c were all in Lk_1;  3) The database had to be scanned n times  In order to get all the support of candidate Frequent Itemset C, (k=1,2, ???,n) [6];  In addition, too many redundant rules  generated when large sample medical cases were  dealt with classic Apriori algorithm, especially  when the support and confidence was low,  which is thus not conducive to the efficient  mining.

As we all know, the old Chinese medical  case is not only an important way to inherit the  valuable experience of TCM, but also the cradle  of the development of Chinese medicine theory.

However, the data mining workload is relatively  huge because the origin of Chinese medical case  is very early and the number of the cases is  macro. Therefore, it is inevitable to search an  improved Apriori algorithm to reduce the  number of scanning database and the number of  generated redundant rules in order to save  computing time.

B.Improvements of the Apriori algorithm  So far, there are some scholars have  improved Apriori algorithm aiming at the  disadvantages of low efficiency and large  redundant rules in the processing of large sample  data, and the main improved algorithms are  given as following:  1) Improvements based on the specific  itemset Scan the database once after selecting  a subset as the mining object from all items in  the database with a specific item (such as the  item users interested or the important one).

Assign weights to the elements after the itemsets  are generated, then calculate the support of  itemset to generate the Frequency Itemset with  the introduction of the weights of the support  function, and the associated rules generate  eventually.

2) Improvements based on the divide  Firstly, the database should be logically divided  into disjoint blocks. Then, calculate the support  of these itemsets after the combination of all the  Frequency Itemsets generated by each block.

3) Improvements based on the matrix  The transaction database is operated as a matrix  form after combining the matrix with Apriori  algorithm.

4) Improvements based on the sampling  It comes to the next step after combining and  analyzing the former scanned results, and the  total number of scanning times is usually less  than the items of the maximum frequency  item set.

5) In addition, there are other  improvements, such as the one based on  dynamic itemset counting, item coding method  [7].

In short, the principle of improvement for  Apriori algorithm is generally as follows: the set  will be a collection of maximal Frequent Itemset,  if the number of sets in K Frequent Itemset L is  K. The item number K of maximal Frequent  Itemset L is no more than the maximal item  number k meeting the support in all the items. In  6/7   the improved algorithm, the maximal Frequent  Itemset L can be found when focus only on the  items no less than k, after determining the item  number K of the maximal Frequent Itemset with  the deduces above. However, the item number of  the maximal Frequent Itemset will be supposed  as k-1, if the K Frequent Itemset is not found.

Then follow the process above [8].

It becomes possible to reduce the times of  database scanning, save computing time, reduce  the generation of redundant rules In order to  improve the efficiency of ARM In Chinese  medical cases with the improved Apriori  Algorithm. After that, we will focus on the  research of the validation to investigate the value  of Improved Apriori Algorithm of ARM in cases  treated by contemporary famous old Chinese  medicine. And then, we will be able to provide  more reliable theoretical basis for clinical  decision of treatment with syndrome  differentiation.

