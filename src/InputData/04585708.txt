A 77-GHz FMCW Front-end with FPGA and DSP Support

Abstract: Recent advances in the development of semiconductors allow the realiza- tion of low cost 77-GHz radar front-ends suitable for automotive applications. The requirements on the angular resolution often force designers to implement antenna arrays. In the last decade the trend moves towards digital array processing instead of analog beamforming because of the availability of cheap digital signal proces- sors (DSP). In the case of an n-element receive array, the system must be capable of processing n receive channels in parallel resulting in a big amount of data. Field programmable gate arrays (FPGA) deliver the processing power and flexibility to handle the collected data and allow, in conjunction with a DSP, the implementation of sophisticated signal processing algorithms. This paper deals with the implementation of a 77-GHz frequency modulated continuous wave (FMCW) prototype radar system.

The system is designed for use in array processing applications, with a maximum of eight parallel receive channels. The functionality of the prototype system is demon- strated in an imaging application. With the help of a portal axis the radar is moved along a synthetic aperture in order to reconstruct the reflectivity map of the imaging area.

1. Introduction The use of FMCW radar sensors gained wide acceptance in different applications like automatic cruise control (ACC), level gauging, security and navigational control systems. Especially radar sensors in automotive applications need to be cheap in order of making them feasible for the down-market. Despite that, modern automotive radar sensors must deliver high reliability, good range and angular resolution. Adequate cross range resolution requires large antenna aperture sizes that can be realized using antenna arrays. In practical systems the number of antenna elements is limited due to technical reasons and cost aspects driven by the application. The utilization of more sophisticated signal processing algorithms offers good angular resolution with a limited number of antenna elements at the expense of increased computational power. FPGAs and DSPs are capable of providing sufficient computational power for implementing signal processing algorithms in real time. This paper describes the implementation of a complete prototype radar sensor consisting of a bistatic 77-GHz RF front-end and the required signal processing hardware for appropriation as stand-alone system. The stacked system architecture permits to plug in different RF modules without requiring a hardware redesign.

2. Block-Level System Overview The block diagram of the radar system and the signal flow between the four modules are shown in Fig. 1. Each of the marked parts is realized on an individual printed circuit board (PCB). This simplifies the implementation of the system and allows modification of particular modules. A brief description of the different parts follows in the next sections.

Figure 1: The block diagram displays the inter- action between the four different modules. Each module is realized on an individual PCB. An FPGA controls the synthesizer required for gen- eration of frequency ramps. The receive path includes amplifiers and ADCs for up to eight parallel channels.

2.1. 77-GHz RF Front-end Sensor The FMCW front-end is built with a Silicon Germanium (SiGe) chip set from Infineon. A photo- graph from the RF front-end is shown in the left image of Fig. 2. The millimeter wave circuits are built on a multi-layer PCB using Rogers RO3003 RF substrate with a thickness of 127 ?m.

Figure 2: The left photograph shows the RF part of the presented system. The board is 40x40 mm2 in size and it is composed of a 77-GHz VCO, a 77-GHz mixer, a 19-GHz down-converter and two 4x4 patch array antennas. The right picture displays the architecture of the realized radar system consisting of four stacked modules. The arrangement of the different PCBs is depicted in the sketch.

2.1..1 Transmit Path (TX)  The transmit part of the system comprises of a 77-GHz VCO and a 19-GHz down-converter arranged in an offset-loop synthesizer [1], [2]. The integrated VCO including an on-chip output buffer and frequency dividers [3] directly feeds the transmit patch antenna. The VCO is capable of providing approximately 10 dBm at the feeding point of the transmit antenna in the frequency range from 76 GHz to 77 GHz. A second output of the VCO signal eliminates the need for an external power divider and therefore simplifies the implementation of the receive path.

2.1..2 Receive Path (RX)  The receive path is built with a 77-GHz Gilbert-Cell mixer [4]. The mixer exhibits a constant voltage gain of 15 dB and has a noise figure better than 14 dB in the frequency range from 75 GHz to 81 GHz [1].

2.2. DDS based Synthesizer A DDS controlled by the FPGA is used to generate frequency ramps. Thus the system is capable of generating user-defined ramp sequences. Changing the slope and duration of two consecutive frequency sweeps can be achieved within 20 ?s by reconfiguration of the DDS parameters.

2.3. Signal Conditioning and Analog to Digital Conversion Considering the requirements for future radar sensors, concerning angular resolution, the imple- mented signal processing hardware is capable of processing up to eight distinct receive channels in parallel. This enables the system to be used in array processing applications. Two separate 4-Channel, 12-Bit ADCs with a maximum sample rate of 6 MSamples/s for each converter allow the simultaneous sampling of eight channels with a rate of up to 1.25 MSamples/s. The gain in each analog channel may be individually adjusted to the desired value.

2.4. Signal processing Hardware The central processing element controlling the entire radar system is an Altera Cyclone-II FPGA.

An FPGA offers a lot of flexibility when interfacing different types of sensors and high-speed signal converters. Despite that, front-end processing algorithms can be calculated using computational ca- pacities of FPGAs. For instance implementing a digital beamformer (DBF) can easily be achieved.

In the current design the FPGA is used for control functions only. These can be summarized as follows:  ? enabling and disabling the RF front-end, ? configuration and control of the ADCs, ? programming the parameters of the synthesizer (slope and duration of the frequency ramp), ? triggering the start of the frequency ramps and ? communication with a host computer or DSP.

The use of Altera?s embedded soft-core processor Nios-II simplifies the implementation of the different tasks, because the required application flow can be programmed using the processors instruction set. The interfaces to the ADCs, the synthesizer, the remote host processor and the DSP are realized in VHDL and connected to the processor as memory mapped components. Using a direct memory access (DMA) controller the soft-core processor is bypassed enabling a high speed data link between the ADCs and the interfaces to the host PC or the DSP.

2.5. Interfaces The system supports an USB 2.0 compatible interface and an external memory interface (EMIF) to a TMS320-C6713 DSP from Texas Instruments. In a first attempt the USB interface was used to establish a data connection between Matlab and the FPGA in order to control the whole functionality of the radar sensor with a Matlab script. Practical tests showed that data rates up    to 160 Mbit/s can be transferred with the USB 2.0 interface, which proves to be sufficient for the sample rates of the implemented ADCs.

The EMIF interface to a DSP will help to develop and implement signal processing algorithms that can be calculated in real-time using a combination of FPGA and DSP.

2.6. Implementation of the Radar System The architecture of the implemented system is shown in the right sketch of Fig. 2. The stacked construction offers flexibility regarding future modifications. This holds especially for the RF front- end because the current design allows validation of different types of front-ends. The RF sensor is plugged to the bottom of the synthesizer board with receive and transmit beam directed towards the synthesizer PCB. The whole radar system is powered from a single supply voltage of 6V making it suitable for battery-operated applications.

3. Measurement Setup Although the FMCW radar system was primarily developed to evaluate different RF front-ends for automotive applications, the performance of the system is demonstrated by realizing a synthetic aperture radar (SAR) with the built prototype. For this purpose the sensor was mounted on a portal axis in order to move the sensor along the synthetic aperture. A picture of the radar prototype mounted on the portal axis is shown in Fig. 3. A graphical user interface (GUI) programmed in  Figure 3: The pictured photograph shows the prototype of the radar system. The radar is mounted on a portal axis in order to move the system along the synthetic aperture.

Matlab is used to control the position of the radar. The radar is moved to a position along the synthetic aperture, then the sensor is stopped and measurements are taken. This ensures that the stop and go processing of the acquired 2-dimensional signal s(u, t) is valid (u specifies the position along the aperture and t refers to the measurement time during one upchirp signal). The imaging area is covered with absorber material and a single reflector with a radar cross section (RCS) of approximately 11.9 dBm2 at 77GHz is placed in the imaging scene. The target is positioned 0.8m away from the nadir of the radar sensor and slightly off the center of the synthetic aperture. A summary of the SAR sensor parameters is listed in Table 1. The acquired data is transmitted to the host PC where signal processing is performed after a complete data set is collected.

Synthetic aperture FMCW radar Radar altitude 0.6 m Transmit power ? 10 dBm Elevation angle 60? Antenna gain ? 15 dBi Squint angle 0? Center frequency 76.672 GHz Aperture Length 512.95 mm Bandwidth 1.024 GHz Sample Spacing 1.0038 mm Chirp Duration 512 ?s  Sampling rate 2 MHz  Table 1: The table above lists the parameters of the imaging sensor.

4. Measurement Results The gathered 2-dimensional SAR signal s(u, t) is depicted in the left plot of Fig. 4. Because of the absence of a squint angle the received signal is strongest at the point of closest approach. The right plot of Fig. 4 displays the azimuth phase signal for the frequency bin containing the corner reflector positioned in the imaging scene. The chirp signal results because of the nonlinear range dependency from the radar position u along the synthetic aperture. To obtain the azimuth signal the fast Fourier transformation (FFT) with respect to the time domain is calculated. Plotting the real part of the FFT for a fixed frequency bin reveals the azimuth phase signal for the selected frequency.

u (m) -0.2 -0.1 0.0 0.1 0.2            500 -1.00  -0.75  -0.50  -0.25  0.00  0.25  0.50  0.75  1.00  t (?  s)  n or  m al  iz ed  si gn  al  -0.20 -0.15 -0.10 -0.05 0.00 0.05 0.10 0.15 0.20 -1.0  -0.8  -0.6  -0.4  -0.2  0.0  0.2  0.4  0.6  0.8  1.0  u (m)  ? { S  (u , r )}  Figure 4: The left plot shows the measured 2-dimensional signal s(u, t) normalized to the maximum. The x-axis displays to the position u along the synthetic aperture and the y-axis displays the time t during a single upchirp ramp. The right plot shows the normalized azimuth phase signal for the range gate r0 containing the corner cube.

The reconstruction of the imaging scene?s reflectivity map is carried out using the wave number domain algorithm (?Ka). In the case of an FMCW signal a 1-dimensional FFT with respect to the radar position u is calculated. Afterwards matched filtering with a reference target, located in the center of the imaging scene, is performed. Filtering is carried out in the frequency domain by multiplication with the complex conjugate of the reference target?s transfer function. The range dependence of the transfer function results in a nonlinear mapping of the range frequencies often referred as Stolt mapping [5]. To reconstruct an estimate of the target scene?s reflectivity map with the help of a 2-dimensional inverse fast Fourier transformation (IFFT) a counter deformation has to be applied. Carrying out the described steps for the measured data results in an estimate of the reflectivity map ??(x,r), which is displayed in Fig. 5. The reconstructed reflectivity map clearly shows a dominant peak at the position of the corner reflector in the slant range cross range image.

x (m) -0.20 -0.10 0.00 0.10 0.20  0.0  0.5  1.0  1.5  2.0  0.00  0.25  0.50  0.75  1.00  r (m  ) Figure 5: Normalized estimate of the target?s reflectivity map ??(x,r) using the wave number domain algorithm for reconstruction. The image clearly shows a dominant peak at the position of the corner reflector. The horizontal axis corre- sponds to the cross range direction x along the synthetic aperture and the vertical axis to the slant range r (distance between the radar and the position of the target). The maximum of the esti- mated reflectivity function is found at the position (0.99 m, -0.039 m).

The slant range corresponds to the distance between the object and the radar.

5. Conclusion In this paper the realization of an FMCW radar prototype sensor has been described. The stacked architecture of the system allows rapid modifications, especially for testing different types of RF front-ends. Despite that, the implemented FPGA based signal processing hardware allows to eval- uate various algorithms and examine if these algorithms are suitable for real time applications. The performance of the sensor was demonstrated in an SAR imaging application, where the prototype was used to measure the radar signal and data processing was carried out offline on a host PC.

