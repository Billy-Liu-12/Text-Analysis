

Using Normalize Time Spent On A Web Page for Web Personnlization  Abdul Manan Ahmad  Faculty of Computer Science and Infonllation System, Universiti Teknologi  Malaysia, 81310 UTM Skudai, Johor, MALAYSIA.

E-mail: marn\ ?,!:f?h.llullnl"m ..

Mohd Hr/tlCljl Ahmad Hijelzl  Faculty of COlllpnler Science au.d ?  Malil" . ltl. 8:13"(0 UTM Sknd2"lj, $0110 , MALAYSlA.

E?lInail.: u.api@sawllb.cOJil  Facll?t:y ofCOlllPlltei' Science .wd ?' . . .

Mlllaysia,f!1310 llTM Sku,dai. J'oi10-, MALAYSIA.

E?rnail: haml u;1' ?SIll.!ltm.,JUY  il't<: COrlllmWII.5 9'OI,tll 0/ trlf{ N.?IWrIrl:rdDl' 00" f"e lm.l!m?! make? if tJO'l:'?ll'.n'tTl' "/01' us<:rs. let lie p!'01>fck-J will, f. col""mi?lIt aml,l I f:1?cul"al<' too?? lamplrr/?" tire ififtJNlltlliCIII JI&!!J.-d. U.'eb us"f:,'f! lJJillifl:IJ Ilus ?lined Fn.Oi"I:' pDprlf{lri?" <71l1 .. mg l'rue{Irdu.!J'., i'l d.is?o'lt!l'ing fl .. e JlSo:>Y.!i b/'O'IfMlIg' b.,#m .... ir:.or. 111 this pa,f""e)', '?B dcl'<JlapM a US<l'?'e mo..kl/ar ,prociu:tions ba:;;:d t:111 Q;ssocia#an RJ/tJ {p.'id ?rnli!ilri'l.' !/lUIS! res.

W ... u.fI!d rlli.' P1JJfvJI(.Itu?d lilfli! sp<'.PII an B::C" fUlfP-fo" """s'r:f'? If", JJ"{I? iusl ad 0/ hi'I?'_ rwo? (,11'lJmr/iufl nU!rl'i.c? will be tlpplieJ I" el,tJll"lls?{? the ""'" .... ""J' c:llfJC: 1"'<:"t?fmwfrda!iOl'3, 'la"1e?' p"""rsirnT "nd ffCYl!C'J'''fJ''' ?/JJ" .. ,".n d, "'wws thai ,jj" ,iflUl 'Pent en <I W .. b f"?? is """", .. ,r'a! "PI d.?I..,? ... l/l.fJl11 ,II", rmpC1l'lmlcc ifllmr lurl!? kJO<"i' ir is l"f)"omm<!l.,<lcd Ie rire .rt,H?I'.

), 1N'FB,ODIJ(l"lO.N  Theoon1i"ut">llS iIlf"0mh of th" i IfII.Dttlillli.oo on the [llreIJ:!ei II'la'kcs it lil?ry fm? 1A!I?1"s' Ie k provid . .,J ... ?l l h ? OQm?lliel.ll ?lld y?t IlCCLI-BIe boh b:J ?ture lite i lmil) lilliOlt IW;!dloo. J I:'Ite l.lig. ... ml S stem U?lt C'iJt mine for kllo> .... e? ?nd extr?cl the m?r pattem 0'[ J][I"'; gpliOil IInlS oompul:ror in onkr 10 :s:c:n? u.s?r3- bOlt till [WIl1 (.1fin!ormatioll rctri?val.

Web pel:SlOnaliz?tioll 00Il ? de?ril;oa.l os any IlI:IiQuth/r\ CUll c?rniz"d tl.J.? Q?nl4m! or slw?tllr?.; Qf ;l Web siie 10 the llSoer'? lilSte 01 pl'Jere,? [GJ .llIll> "'''?d.<:l bee.1 tlLil i]'.J;l:d by ?'Uinmerte OJ?iIUiZ,ltiOt ttl' b."t t n" llwir <,oudQIliC The ?<;ti<:m:;.ul bJ,; m.ld" by ItiShliShlillg Ibe hyp.::r?Ills:. i?rti ng Ilew hypel'lillks IIlnt seem to be uf illteresr fur tIte ?UJTQlJI: user d ?IlBrnic:!Illy, ;mil the crCll?ioll (If new illdex: ptlgC5_ Tbl:: cmmllCll p=onml.iz:m:iDfl 3)'Stcm? t'oa ?(h" \""?b e.Dn be "al"e!lctrl:red ilJtc: three ??lp?_ ",hiclt is.

IEEE CCC Code 0-7803-8560-8/04/$20.00G'2004 IEEE  "'UJu."d rlet:''';OIl rtlle ":!>ilel1l, l'IJ,,[elll-bu=J filleri,? ;11!tlltS. ?ll!'ld ooll:!lOOlttli'le JIlLerif18 ?s 'It' [3 J or Illl, lite oollflb(>t?ti \ iilltti.!B. sj?m Im? t. OOI?<: ditl fHedcmillllll1 ?ppro?h in fun:ti?hins the c-colllmerue ... ?!ell'll ",ill. an illt "11 iVnoo to ta tllre lliCt PI tiles  illiG ret-ilmilitfidil\g rde'lLlnt fEli,-es to i.be user$..

Web Llwg? tn111iI1f!, [I]. the Iii I"t!t.:Clll trleth(.,j ;11  perron:nlizillg Web PELE,O:: hmi gairu:d 1lll00e popuillrity !l.mQJl? rur;ellrclkrs ill difOCo ri'!.? [he LlSerS brmil'?, beruviot. ltl Illis p?per_ we develoJlli l?ilg.e rllOil,,1 f()r

I.Hedictiom ha?d 011 :!ISS(] 'atien rule_ which has bet;:11 sue essfull, Il.pplied iIi rh<; plL?'S re.::..:;"ill?,idiiti(><1 S)Si<;,U 12- 3, g I, Ii."" .i milant ",,,IlY ,;s? Tile II1I>lhOOuI,,?y i. like Lhi:;: fi '"'? d", """,,-,,",i:ali.m ? e.ilch URL "'?" be ?Ntlllcted r."" ille Web loa oom i-uld sunil"til, belWeen ire,ns \ -11 be t leulal\;(] upon iioo rules i "i,1ood. of OSfrr Sols;:.;011'" Se!::o'idly, Itlil re;;Oli.ltnen.t?ttioll eli?'1e \,m ilt<:iI ..e.'ltd1 III top.N Il't{Jsl siilllilar iocrns II) Ill';: ;!'>cciw USCr did:.-si.l"Cllm bef,,? OOI,,,r, l ?illS. TW(Hn.mem::l?li I tOt- Ihe Lls:e1"_ F"rlh.=rn?ore, \\ e ? tilSed lhe Ilormalized time spellt on elle"ll ?efotwt,?h!il'8 the p,,?e" ili?leOO ofb;",:"!;;.'.

:l. WED PERWt-lAllZA'nON USING ",'EI; IUS.AG.E MINING?  VJ,' pc'rscllmliz.utic][l ?olisirLl.l:'kd f:rom s?\?r" 1 st-ef1i!i iool u?c" .he colle .. 1.i ou of We dahL [he modelme; nd, L;OOC\iOliZllli on or tbeOlt d?ul., llie ?Iwlysi%l or too I;-QIIQCltd ibllllmcl !he d??mnil1?lioo of tLw tteli-cm? I?t howd be pe?io'lil'led [6]. He Il1.O.Si popular E lhod iJi a1'l<" ?ziti? tbe c leeted dal\ i ' DOli ?bo.mti \Ie iilterill8 (eF) (3). CF LlSCS r?till! to lxedilct ."I<hi b infontuliDlJ i.? of in1\:!l,csl h;!. the. u 'S, Tht? ?'-O?I is 10 1?1? lite IDlUSt rimililr ?'I"Ol1p? Il'i" U?I fur lh? 3.cli\.'"(:? ILS'CI" IUld ri!lOOlllll!e.mlill?. SC!'l nl.llt M? bC?1l m cd b ?'l; in ?he group an.! llal ?:!'t ,,;C\?ed .b-:t the !len u!;fL \\ohicll is Cililed 1 ?...,r-Msed     systems. However, user-based personalization suffers limitation in term of scalability and flexibility. This is caused by the calculation of similarities between active user and the usage profile has to be done online, where the time required for searching may become prohibitive [8]. Item-based systems have been proposed [7] to overcome the scalabity problem as it performs the calculation of item similarities in an offline basis  Web usage mining has been defined as the process of applying data mining techniques to the discovery of usage patterns from web usage data [1], is the latest technologies emerge for personalization.

Users left behind his footprints on browsing the web and this information collected in server access logs.

There will be very large volumes of data that form an important and priceless knowledge buried inside.

3, WEB PAGE RECOMMENDATION MODEL  In this paper, the system recommends relevant pages to users based on the probability of the pages to be clicked by user, But first, we have to clean the log in order to allow data mining perform on the validated access log. Then, we have to identify the user and user sessions. Details on preparing the data for Web usage mining can be found in [5]. Afte r the pre-processing, a set of transactions generated. In this paper, we are using time spent as weights on each page instead of binary which is typically used in other researches [2, 3, 8]. The time spent by a user for viewing a page is a very important piece of information in measuring the user's interest on the page [9]. However, the size of a file and the network traffic may affect the actual viewing time. Therefore, we take the time spent for each byte of the file by dividing the time spent to the size of the file as a weight and we assume that the network traffic is same for all transactions. Furthermore, we normalized the time spent in order to assured that it is truly representing the importance of a page in a u ser session. The formulation as been proposed in [10] is described as  yj!, - J11in { H',} norm ( w.) = ----:'--:---,---,-  max {w.} - min {w.}  3.1. Association rul e m ining of web usage l og  Association rule [4] is an expression A => B, where A and B are itemsets. The objective of this rule is lo calculale the prohahilily DC a lransaction contain item R given that it contains A, which is known as the confidence of the association rule. Confidence is given as support(AnB) : support(1) whereas support is the sum of stated item in the database.

Some researches have consi dered the use of association rule mining in recommendation systems [8] and Web usage mining [2]. All this research shows how suecesstul is association rule mining used  in recommendations. Instead of matching the active user with the rules, [8] measures the similarity of active user with the rules to produce recommendations. However, none of this research took the time spent on each page as an implicit rating tor that page. But, they did use the time spent for preprocessing phase.

In this paper, besides the confidence and suppurl, we also calculate the sum of time spent for each page during rules generation. The result R of association rule mining conceptually can be described as r,' = ((pl,p2, .. p,),( WI, W2, .. W,),CT,0:) E R where Wi represent the weight associated with the page pi, a represent the support and ex represent the confidence of the rule.

3.2. Recom m endation m ethod  The rules produced after the mllllng process is representing the behavior of user's navigation on the  Web site. The recommendation engine then ranked the top-N most similar items for each item in the log from the rules. The formulation descri bed as:  rank (i, j) = similarity (i, j) x confidence (i, j)  As can be seen, we calculate the probability of both items i and j occurred together instead of the confidence of the rules as we are interested in /()cusing on the similarily between items. The ralional behind this tormulation is that some users mav accidentally rated item j and ) high because df external disturbance such as a phone call, making a coHee and the network latency. Confidence that measures the probability of the existence of item j and) in a single transaction can neutralize the error in calculating item's rank. The similarity of item j and) is measured by computing the cosine of the angle between these two items, gi yen by:  , .  j?l sl11ulantY(I,J)=COS('.J)= . '.

11111, ?11;11, In order to compute the top-N recommended  items for active user, U we first identify the set of candidate recommended items. C by taking the union of 11l most similar items for each item C E C which is not yet available in C. Then. we compute the similarity of item c E C to the set of U as the sum of similarities given by the user to all the items.

i E U . The formulation as been proposed by [7] described as follows:  LN (s,,oV*R.N) recommend (11, i) = =:..:,.:::1"::,,:"",....;"::;""::;. -'-___ .;..

L:,,,, ,,,,,,,,,,,ls.,NI  4. EXPERIMENT AND EV ALVA TION  We are using the access logs of the Faculty of Computer Science and Information System,     Universiti Teknologi Malaysia dated July, 1 2003 until December, 7 2003. After the cleaning process, both files that appear less in 0.5% or greater than 80% of transactions were eliminated, to remove noise and avoid the large items from dominating the rules construction. The pruning left 4, 630 transactions and 140 unique URLs for the mining process with data sparseness of 0.9522. Randomly, 70% of the data selected for training while another 30% for testing.

With T as a total number of transactions, the level of data sparseness defined as:  ?,?, support(J)  K xT  4.1. Evaluation Methodology and Metrics  Each transaction, , in testing data set is divided into two parts. The first n pages in t are taken as an acti ve user session, ualwhile the next I-n pages will be used to evaluate the recommendations, denoted as EI. ;11 reflects the window size, which is in this experiment, active user session window size is the portion of user click-stream that is needed by the recommendation engine to produce recommendation set. The recommendation candidate set IS denoted as cand (lIat, 7). However, only the top-X rank items will be recommended to the user, which is here denotcd as R( cand(uat,7 ),N).

Two different standard measures were applied for evaluation, namely precision and coverage. Precision measures the degree of the recommendation engine produce accurate recommendations. Formally, precision can be de11ned as:  IR(cand(ual, r),:V) nEtl preclslOn(R(cand(ua" r),:V)) = "-,---'-:--'-:-'-:-"""'"  . IR(cand(ual, r),N)1  Coverage measures the ability of the recommendation engine to produce all the pages that might be visited by the user, Thus, coverage is de11ned as:  IR( cand( !lat, r ), X) n ?,1 coveragc(R(cal1d(uGt,r),]y?))= .

IE t l  .

Finally, the mean over all transactions in the evaluation set for a given recommendation threshold was computed as an overall score for each precision and coverage measures.

4.2, Results  In all experiments, we used recommendation thresholds varying from 0.1 to 1.0 to measure the precision and coverage. The window size is set to 2 as the mean transaction length of the data is 3. As been expected, the high minimum support produces 1ewer recommendations candidate, which affects the coverage while lower minimum support cause lots of  irrelevant recommendations generated so as with the recommendation threshold. Thus, the right selection of both values is critical in improving the recommendation engine's performance.

Figure 1 shows the impact of normalized and not normalized weight value for each item. We can see the superior of normalization in producing better result for precision and light improvement for coverage. Further investigation, which is not displayed here, shows that some item listed in the recommendation candidate set at the first place, but was not good enough to be in the top-N of similar items. Therefore, the potential item was not recommended to the user, By applying normalization, this drawback has been overcome. We found that the normalized weight value of each item represent the importance and similarity of that item better than the raw weight value.

?t-I, tbrullMf ..... 1b tbrull..tl (&IAa1D.?  Figure 1. Norm alize versus not normalize weight  Figure 2 shows the impact of using similarity together with confidence of the rules (ARsim) in generating recommendations. Even though traditional associations rule have defeat ARsim in precision, but ARsim is found to be more superior in coverage.

Overall, we found that ARsim is better by calculating the effectiveness of both methods using Fl metrics (not shown here). By combining similarity between items and confidence of the rules, the recommendation engine has selected only the most relevant items by taking into account the relationship of an item towards the active user click-stream and also the similarity between items in term of its usage and concepts. The recommended items are highly related to the active user interest and therefore lIlcrease the effectiveness of the rccommendation engine.

(!I' '1\> I

II..J ... .... .. IE' .. LI I  ?rwd.a..h""d::I  AltIII. ... I.U;!?llI.lIriI  1 ??I8?J .. I ? 1111 1:112 ILlI [1' ILlS 0. .. II.T 11.1 112 1  1IIan..-.bblh"d::I  Figure 2. ARsim yersus traditional association rule  5. CONCLUSION  Web usage mining has sparked the new method for recommendation system. It has the advantages to disc oyer usage patterns from the web server logs, to develop the user navigations model and finally applied the model for recommendation. In this paper, we used the time spent on each page to determine the importance of that page. UnfOliunately, the time recorded by the server is not completely presentIng the actual time the users viewing a page. Therefore, normalization is required to turn the raw time spent into a better value that represents the actual importance of the pages. We have successfully showed the etTectiveness of our method in improving the accuracv of the recommendation. We even compared  .

the traditional association rule  recommender system with our model and found that the latter is better and more ettective tor Web personalization.

6. REFERENCES  [I] J. Srivastava, R. Cooley, M. Deshpande, and P.

N. Tan, "Web Usage Mining: Discovery and Applications of Usage Patterns from Web Data", SI GKDD Explorations. 1 (2): 12-23, 2000.

[2] B. Mobasher, H. Dai. T. Luo, and M. Nakagawa.

"Effective Personalization Based on Association Rule Discovery from Web Usage Data", In Proceedings or  " the 3rdACM Workshop on Web  Information and Data Management, Atlanta, Georgia, 9-15, 2001.

[3] B. MobasheL R. Cooley, and J. Srivastava, "Automatic Personalization based on Web Usage Mining". Communications of the ACM, 43(8) 142-151,2000.

[4] R. Agrawal. and R. Srikant. "Fast Algorithm for Mining Association Rules", In Proceedings of Bases. 487-499, 1994.

[5] R. Cooley, B. MobasheL and J. Srivastava, "Data Preparati?n for Mining World Wide Web Browsing Patterns", Journal of Knowledge and Information Systems. 1: 1-27, 1999.

[6] M. Eirinaki, ?nd M. Vazirgiannis. "Web NIining tor Web Personalization", ACM Transactions on Tnternet Technology. 3(1):1-27. 2003.

[7] I3. Sarwar, G. Karypis, J. Konstan, and J. RiedL "Item-Based Collaborative Filtering Recommendation Algorithms", In Proceedings of the 10th International World Wide Web Conference, Hong Kong, 2001.

[8] i\. Demiriz, "Enhancing Product Recommender Systems on Sparse Binary Data", Accepted to be published in the Journal of Data Mining and Knowledge Discovery. 2003.

[9] M. Claypool, P. Le, M. Waseda, and D. Brown, "Impli?it Interest Indicators". Proceedings of ACM Intelligents User Interfaces Conference, Santa Fe. New Mexico:ACM, 33-40, 2001.

[10] I3. MobashcL II. Dai, T. Luo, and M. Nakagawa, "Improving the Effectiveness of Collaborative Filtering on Anonymous Web Usage Data", Proceedings of the IJCAI 2001 Workshop on Intelligent Techniques for Web Personalization (ITWP01).Seattle,200 1.

