

384 ?  2017 IEEE International Solid-State Circuits Conference  ISSCC 2017 / SESSION 22 / HARVESTING AND WIRELESS POWER / 22.8  22.8 An AC-Input Inductorless LED Driver for Visible-Light- Communication Applications with 8Mb/s Data-Rate and 6.4% Low-Frequency Flicker  Yuan Gao, Lisong Li, Philip K. T. Mok  Hong Kong University of Science and Technology, Hong Kong, China  Light-emitting diodes (LEDs) are becoming the dominant lighting source over their conventional counterparts. Besides the benefits of high efficiency and long lifetime, LEDs also show great potential for high-speed data transmission because of their wide bandwidth (BW). In addition to offering general lighting, the light output can be modulated with fast-switched LEDs to achieve visible light communication (VLC). Though over 100Mb/s data-rate has been demonstrated with white LEDs in the laboratory, the high-frequency modulation is hardly supported by commonly used dimmable drivers with switching converters to regulate LED current. In these drivers, the changing slope of LED current is limited by both low loop BW and large inductors and capacitors [1]. The linear multiple- string LED drivers [2], free of inductors and big capacitors, theoretically can provide higher turn on/off speed. However, the light output of these drivers usually varies significantly at the double-line-frequency, which not only is considered as a harmful optical flicker, but also greatly affects the effectiveness of data transmission. The linear driver in [3] regulates the product of LED current and LED voltage to mitigate the optical variation, but a multiplier has to be added in the regulation loop, resulting in limited BW.

In this paper, to overcome the above issues, a multiple-string LED driver with fast dimming capability and low optical flicker is proposed, as shown in Fig. 22.8.1. A valley-fill circuit is placed after the bridge rectifier to provide a good power factor.

12 segments of LEDs are connected to the power switches. As the input voltage VVF varies, these switches are alternately activated to provide different paths for the LED current, ensuring that the effective LED voltage VLED_EFF is always close to VVF. Meanwhile, a charge-based 1/x circuit senses and processes the VVF to derive V1OX, which is accurately inversely proportional to VVF. Then, V1OX is taken as a reference voltage for the current regulation. The regulation is accomplished by adjusting the current path (MHV) and transistor size of MLV with a digital controller.

The VLC input DATA, modulated with on-off keying non-return-to-zero (OOK-NRZ) code, enables the controller when it is ?1?, and deactivates the power switches when it is ?0?. Thus, if the ratio of number ?1? and ?0? is fixed in each short period, the LED power (?VVF?ILED) will be stabilized to ensure a small low-frequency flicker (<3kHz). Note that as the 1/x circuit is excluded from the control loop, it does not affect the VLC speed and can be designed with low BW to save power.

Although the conventional linear driver?s dimming speed is not limited by the passive components, a power-hungry amplifier is required for enhancing the loop BW, as shown in Fig. 22.8.2. Even with a high BW amplifier, it still takes time to? charge the gate of power transistors.? The proposed digital controller can achieve?faster turn-on speed efficiently with a keep-and-restore technique. Figure 22.8.2 illustrates the principle with an example of a 4-segment driver. Two adjacent high-voltage (HV) switches, MHV2 and MHV3, are enabled for a specified VVF in State1 (DATA=1). Meanwhile, the LED current is regulated by switching the size of MLV3. As DATA changes from ?1? to ?0? (State2), MHV2 and MHV3 are shut down to turn off the LED while the regulation state in MLV2 and MLV3 is retained.

Therefore, the driver can be restored to its former ?working? state right after the next DATA change from ?0? to ?1? by simply enabling MHV2 and MHV3 without a loop control. As VVF changes slowly compared to the VLC signal, VS can easily catch up with V1OX from the restored state. To further increase the turn-on speed, an auxiliary transistor MAUX3 is enabled at the leading-edge. The LED?s parasitic capacitor can be charged in a short time (State3) with the large current through MAUX3. After State3, the controller will wait in the restored state for another 2 clock cycles (State4) to let VS become stable. Then, it will restart the regulation loop.

Figure 22.8.3 shows the charge-based 1/x circuit used in the driver. It converts the input voltage VIN and a reference voltage VREF2 to IIN and IREF2, and uses them to charge two matched capacitors until VC1 reaches VREF1. Then, a triggered signal will stop the charging and record the voltage on C2 as VC2H, which can be derived as (VREF1?VREF2)/VIN. Yet, the system requires that VIN (IIN) can vary over a large range, so the current in the V-I converter cannot be precisely copied, especially at low VIN. This mismatch becomes the main nonlinearity contributor. To solve this, the transistors in the current mirror are swapped during the reset. Then, the VC2H in two configurations will be sampled alternately and be held separately as VC2H(?1) and VC2H(?2). With the help of amplifiers and resistors, these two voltages are averaged and scaled to V1OX. Thus, the 1/x process with improved linearity can be achieved. An auto-zeroed dynamic comparator is also employed as shown in Fig. 22.8.3. Four-stage pre-amplifiers are put before the dynamic latch to enhance the BW for the fast regulation, while the auto-zero technique is used for each pre-amplifier to reduce the offset. Therefore, VS can precisely track V1OX to avoid the degradation of flicker.

The proposed driver IC was fabricated in a 0.35?m 120V CMOS process. Figure 22.8.4 shows the measured waveforms of the driver without data transmission under 60Hz 110VAC. As VVF varies up and down, V1OX and VS go in an opposite phase. Thus, the LED power is well-controlled to be almost constant. The light output is also measured as VLO. It can be seen that, besides the glitches introduced by the difference of VVF and VLED_EFF, the light output is not as stable as the LED electrical power because of the degradation of LED efficiency with increased current. To compensate for this nonlinearity, the V1OX is digitalized with a 4b ADC to adjust the dimming duty ratio. As a result, the LED will be switched off for a longer time when the current goes down. Though this 20 kHz dimming can be measured in the light output, it has little impact on human health. On the contrary, the flicker is almost halved with this method as VLO is filtered by a 3kHz lowpass filter.

Figure 22.8.5 shows the measurement results of this design with 8Mb/s data transmission. A series of OOK-NRZ data with balanced ?1? and ?0? is generated to the driver and a fast photodiode with two stages of amplifiers is utilized as the receiver. The data-rate is mainly limited by the BW of the phosphor-based white LED. Figure 22.8.5 also shows the filtered light output with 12.5% flicker, which can be further reduced with dimming compensation.

Figure 22.8.6 provides the comparison of this work with both state-of-the-art multiple-string LED drivers and drivers for VLC. The die micrograph is shown in Figure 22.8.7.

Acknowledgements: The authors acknowledge the support of a grant (T23-612/12-R) from the Research Grants Council (RGC) of the Hong Kong Special Administrative Region Government under the Theme-based Research Scheme.

