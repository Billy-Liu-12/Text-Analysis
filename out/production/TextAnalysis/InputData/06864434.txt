?

Abstract? The volume of data accumulated by institutions  and individuals and containing valuable and even critical  information grows steadily with time complicating timely  access to this information. In particular, this concerns the  domain of healthcare. One approach to leverage the increasing  amounts of data is to use advanced similarity search and case  retrieval-based solutions. In this paper, we share our  experience with translation of a similarity search-based clinical  decision support system Case Reasoner from a standalone  desktop application into a mobile Web-based solution. In  particular, translation of patient similarity visualization and of  a Web-based medical imaging toolkit are considered.



I. INTRODUCTION  In the digital era the amount of data collected by different parties is growing tremendously with time. According to some estimates, the amount of data collected in the world each year will increase 50-fold in the next ten years. In particular, the amount of data collected by hospitals is known to grow exponentially with time [1]. Although this data clearly contains information useful for different purposes, including discovery of interesting trends and novel knowledge and decision support, access to the data gets complicated, in particular due to its size and distributed nature. Care providers are not always able to access information where and when they need it, which is presently admitted as one of the biggest challenges for healthcare.

One approach to leverage the power of increasing collections of data is to use similarity search-based information retrieval, or case-based reasoning (CBR) solutions [2]. However, similarity search is also known to suffer from so-called ?curse of dimensionality?, not being scalable to especially big amounts of data, which concerns both the amount of cases in the data set and the amount of features in a case. In particular this is known to affect classical distance functions such as the Euclidean distance, leading to approximate [3] or distributed [1] computation solutions.

A promising alternative to the classical distance functions commonly used in similarity search is so called discriminative distance learning [4]. In addition to being able to provide a competitive predictive performance, discriminative distances also often have significantly lower computational complexity comparing with their classical alternatives making them more scalable to retrieval from big data.

Research partially funded by the EU FP7 project MD-Paedigree.

Alexey Tsymbal, Eugen Meissner, Michael Kelm, and Martin Kramer are with Imaging and Computer Vision, Corporate Technology, Siemens  AG, Erlangen 91058, Germany (phone: +49-9131-734624; fax: +49-9131-  733190; e-mail: {alexey.tsymbal, eugen.meissner, michael.kelm, kramer}@siemens.com).

In the EU-funded Health-e-Child project (2006-2010) [5] we have developed a discriminative distance learning - based clinical decision support system (DSS) Case Reasoner. In addition to exploiting discriminative distance learning, in form of the intrinsic Random Forest similarity, Case Reasoner included a module for advanced visualization of patient similarity using neighborhood graphs, treemaps and heatmaps for this purpose [6]. This module is intended to help not only with more intuitive navigation within big data, but also with the transparency and explanation of suggested decisions, the lack of which is one of the major reasons for the slow acceptance of existing similarity search - based information systems in the clinical routine.

The original version of Case Reasoner has been implemented in Java and is platform-independent [5]. The major deficiency of this solution was however the necessity to load considerable amounts of data to the computer of end user from the Grid of participating paediatric centers, which significantly affected system?s scalability to data size. In the present paper, we consider webification of Case Reasoner, which we accomplish in the framework of the EU-funded MD-Paedigree project (for Model-Driven European Paediatric Digital Repository), a successor of Health-e-Child [7]. The major benefit in making the application Web-based, except the scalability to data size, is the possibility of immediate access to it from any device, including mobile devices, through a standard Web browser.

The structure of the paper is as follows. In Section II we introduce the original Health-e-Child Case Reasoner application, and in particular its distance learning and similarity visualization modules. In Section III we discuss webification of Case Reasoner in the framework of MD- Paedigree, and in particular the neighborhood graph visualization, and the medical image viewer. The paper concludes in Section IV with a summary of contributions and with a discussion of future work directions.



II. HEALTH-E-CHILD CASE REASONER ? SIMILARITY SEARCH - BASED CLINICAL DECISION SUPPORT  The Health-e-Child consortium [5] of 14 academic, industry, and clinical partners has been aimed at developing an integrated healthcare platform for European paediatrics while focusing on some carefully selected representative diseases in three categories; paediatric heart diseases, inflammatory diseases and brain tumours. The basic idea behind the Case Reasoner, a similarity search based decision support system, was to provide a clinician with a flexible and interactive tool to enable operations such as data filtering and similarity search over a Grid of clinical centres, and also to  Towards Cloud-Based Image-Integrated Similarity Search  in Big Data  Alexey Tsymbal, Eugen Meissner, Michael Kelm, and Martin Kramer       facilitate the exploration of the resulting sets of clinical records regardless of their geographical location.

Health-e-Child Case Reasoner includes two core components, described in the following two sub-sections; a module for discriminative distance learning, and a module for patient similarity visualization.

A. Discriminative Distance Learning  During the last decades, the importance of the distance function in machine learning and data mining has been gradually acknowledged, and a growing body of work has addressed the problem of learning a customized distance function [8]. Distance function learning is largely motivated by a desire to combine the power of strong learners such as AdaBoost and SVM with the transparency and flexibility of nearest neighbor prediction. Distance learning has been also demonstrated to be especially helpful with high-dimensional data with many correlated, weakly relevant and irrelevant features, where most traditional techniques would fail [4].

The distance function for similarity search in Case Reasoner is defined based on a so-called similarity context, which is a subset of features of interest from the complete feature hierarchy for the given domain, specified by the clinician. The intrinsic Random Forest (RF similarity [9] has been chosen for discriminative distance learning. For a given RF, the proportion of the trees where two instances appear together in the same leaves can be used as a measure of similarity between them [9]. For a given forest f, the similarity between two instances x1 and x2 is calculated as follows. The instances are propagated down all K trees within f and their terminal positions z in each of the trees (z1=(z11,?,z1K) for x1, similarly z2 for x2) are recorded. The similarity between the two instances then equals to (I is the indicator function):  ? ? ?? K  i ii zzI  K S  21 )(  ),( 21 xx  (1)  RFs and retrieval with them provide state-of-the-art predictive performance, are robust to outliers, noise and missing values, and are faster than many other techniques.

RF represents a non-linear non-metric distance function. It has been shown that human similarity judgments and distance functions robust to outliers and noise are non-metric, violating in particular the triangular inequality property.

More than in any other domain, distance learning and the intrinsic RF similarity in particular find applications in medical computer vision. Thus, in [10] an application to the heart valve disease is considered, with learning a discriminative distance function based on the heart valve?s shape. In [11] an RF-based similarity is introduced with two applications, to non-linear image registration and age regression from brain MR scans. Reference [12] considers another application, to liver lesion characterization from CT scans according to their malignancy and type.

B. Patient Similarity Visualization  In addition to two common data visualization techniques, heatmaps and treemaps, Case Reasoner exploits neighbourhood graphs as the major approach for similarity visualization. The neighborhood graph provides an intuitive  way of visualizing patient similarity with a node-link entity- relationship representation. The relative neighbourhood graph (RNG) [13] is used as the formalism for patient similarity visualization.

In a RNG, two vertices corresponding to two cases A and B in a data set are connected with an edge, if there is no other case C which is closer to both A and B with respect to a certain distance function d [13]:  )},(),,(max{min),( ,  CBdCAdBAd BAC ?  ?  (2)  The interactive graph navigation has been implemented using the Prefuse open source data visualization toolkit in Java as the core [14]. Besides graph visualization and navigation, our implementation additionally supports node and edge colouring and filtering according to a specified attribute or the distance, graph clustering, tooltips with clinical data from the patient record, and visualization of image information within the nodes. In Fig. 1 visualization of cardiology patients is demonstrated with displaying meshes of patients? pulmonary trunks in the nodes of RNG.

Figure 1. RNG visualization of cardiology patients in Case Reasoner.



III. MD-PAEDIGREE CASE REASONER ? TOWARDS WEB- BASED CASE RETRIEVAL AND DECISION SUPPORT  IN BIG CLINICAL DATA  A.  Motivation of Further Development  In recent years information systems research and development demonstrate a clear trend towards Web-based applications. The major advantage of a Web-based application is the possibility of immediate access to it from any device through a standard Web browser. In healthcare, there is currently a need for an integrated Web-based cloud platform which would enable a better collaboration between physicians, radiologists, clinical researchers and other healthcare workers. Usually healthcare workers have access to clinical records and images only through their local workstations. The transfer of clinical applications to the Web is complicated by the size of data to be managed, particularly medical images, and by the fact that many clinical applications require substantial computational resources.

MD-Paedigree project [7] is aimed at translating the healthcare domain-specific applications and data into services and associated knowledge that can be further extracted, published, and semi-automatically orchestrated in the Web- based cloud platform, by clinicians and medical data integration experts. Fig. 2 presents the overview of the cloud system architecture developed by us within MD-Paedigree which includes at present in particular the case retrieval - based  decision support system Case Reasoner and the Web- based medical imaging toolkit considered in more detail in the next two sub-sections, focusing on their translation into Web-based solutions. Both Health-e-Child and MD- Paedigree deal with image-intensive problems, such as cardiology, neurology and rheumatology, so that an imaging toolkit tightly integrated with other components such as Case Reasoner becomes a requirement.

Figure 2. The Web-based cloud platform with the integrated applications  Image Viewer and Case Reasoner.

B. Web-based Case Reasoner  The major difficulty with the translation of this application into Web was to keep on one hand as much as possible the original functionality of the Case Reasoner and to implement on the other hand a completely new Web-based user interface. We decided to use the D3 (for Data-Driven Documents) toolkit in Java Script [15] as the core library to implement the patient similarity graph. D3 is a novel representation-transparent approach to visualization for the Web, relying on HTML, SVG and CSS technologies. The graph-based visualization within D3 is largely a Web translation of the graph-based visualization within the Prefuse data visualization library in Java used for the original Case Reasoner, which motivated our choice.

The User Interface includes similar key elements to the original application. Current patient is specified, number of patients to be retrieved, and relevant features for search are selected from the feature hierarchy, unless a previously learnt distance for a certain context is selected. The selected input parameters are sent directly to the old Java-based Case Reasoner engine to generate and send the similarity graph as XML data. Furthermore basic additional data exploration and navigation functionality such as node colouring and filtering according to a selected feature value, patient record subset visualization as a tooltip, visualization of specified image information inside the node, and alternative graph types support have been integrated. Our future work includes integration of further advanced functionality in the Web- based user interface, such as graph clustering. Fig. 3  demonstrates the user interface of the Web-based application with similarity search on cardiology patients.

Figure 3. The Web-based Case Reasoner within the MD-Paedigree cloud  platform.

C. Web-based Medical Image Viewer  In the clinical routine, a radiologist spends a significant amount of work time with a certain medical image viewer exploring an image or an image series in a search for abnormalities. The average size of acquired images, which also grows with time, makes it difficult to quickly transfer the necessary images without restrictions onto the client side for remote work. As an alternative, currently there exist several Web-based remote medical image viewing solutions, such as those from Raster Images, Softneta, and clariPACS, in which an expert can view a single image in a Web-browser.

However these solutions are largely limited exclusively to image browsing and do not provide many additional advanced features, which are often available in off-line integrated medical imaging systems. These include, in particular, automatic detection of various landmarks, anatomy segmentation, and computer-aided detection.

Full translation of a desktop medical imaging toolkit into a Web application is largely infeasible today due to the usually insufficient computational resources on the client side. Thus, many simulation algorithms in medical imaging such as that of [16] require the presence of a Graphical Processing Unit (GPU). Not only a sufficient GPU may be absent on the client devise, but also Web programming languages today do not support GPU computation. Besides, the source code of a Web-application is normally transmitted and executed by the Web-browser on the client side, with a rather limited opportunity to provide sufficient security for the confidential elements of code, which may be undesirable for the intellectual property owners of underlying algorithms.

Our Web-based medical image viewer based on remote rendering and partial streaming is aimed at solving these issues. The proposed medical image viewer is a Web-based application, in which the resulting scene is rendered by a remote server and transferred over the WebSocket protocol to the Web client. User actions such as mouse, keyboard or touch screen events are registered and transmitted to the remote rendering server, which changes the state of the scene (see Fig. 4).

The rendering module provides a wrapper for an already existing off-line medical image viewer (such as MITK), rendering the scene into an off-screen buffer. The 2D or 3D scene is rendered with the API of OpenGL into a buffer as pixel data. The final scene is transferred to the streaming module. The streaming module splits the final scene into smaller scene parts and compares the difference between the current scene and the previous one. Only changed scene parts are transferred over the WebSocket protocol to the Web client. In addition, this module converts the final scene into a client specified codec and rescales the resulting image to client?s screen size. The command module is the connector between the Web client and the wrapped medical image viewer. At the first step, the incoming events are validated for consistency such as their time order and then passed to the adapter interface of the wrapped medical image viewer. The medical image viewer processes the event and the initial state of a scene is changed which activates rendering by the rendering module and transmitted by the streaming module.

The Web-based client receives a stream of changed scene parts and draws them on an HTML5 canvas element. The use of the HTML5 technology makes our solution independent of OS and device type and furthermore it does not require any plug-in or additional software for the browser.

Figure 4. Overview of the Web-based Medical Image Viewer architecture with remote rendering.



IV. DISCUSSION AND CONCLUSION  The ongoing trend, with the move from desktop applications towards Web-based applications in healthcare makes collaboration between various healthcare parties easier and enables previously infeasible use cases, such as telemedicine. In this paper we share our experiences with the translation of two clinical applications into the Web; interactive graph-based patient similarity visualization, and a medical image viewer. These two applications required rather different approaches in the translation process. While the first one can be almost completely ported to the Web, making the GUI fully Web-based, leaving only the computational part for the cloud, the second one, instead, relies on remote server-based scene rendering and streaming of changed scene parts, upon receiving mouse or keyboard or touchscreen events from the client side.

Our future work in the framework of the MD-Paedigree project encompasses further development of this Web-based  solution. In particular, some additional advanced features of Case Reasoner are to be ported to the Web, such as patient similarity graph clustering. Besides, an important direction of our future work includes further clinical evaluation of the system with the clinical partners within the consortium, and in particular in the domain of cardiovascular disease risk prediction in obese children and adolescents.

