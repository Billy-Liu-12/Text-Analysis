Mining Changes of E-shopper Purchase Behavior in B2C

Abstract   In the Internet shopping environment, changes of  customer?s needs grow increasingly outstanding. For discovering the changes, the paper mines the transaction databases of different time periods by using association rule discovery, and extracts the association rules and discovers the changes in network customer behavior by comparison and analysis between the two sets of association rules. This paper presents a new algorithm that contains the first support, the second support and Rel-confidence. The algorithm solves the problem of the present algorithms cannot discover association rules with infrequent data items. And according to the changes of network customer?s behavior, robust pattern, appearing pattern and unexpected change are presented to measure the changes.

1. Introduction   With the development of electronic commerce in the Internet, Businesses could overcome the space and time barriers and are now capable of serving customers electronically and intelligently. However, marketers face the challenge of a constantly evolving market where customer?s needs are changing all the time. In such an environment, a successful marketer must understand changes in customer needs and how those needs change in time, and accordingly, develop more appropriate marketing strategies to satisfy customers? needs in order to survive and gain a competitive advantage.

Change mining can enable market analysts to better understand changes in customer needs and how those needs change. Change mining is more appropriate in dynamic Internet business environments [1]. However, relatively little research has focused on mining changes in databases collected over time.

So far, a good number of efficient algorithms for extracting association rules have been proposed [2] [3] [4] [5]. However, there are many shortcomings for the algorithms in the efficiency. In the existing algorithms for discovering the association rules, the support is unique throughout the whole database [6], and they assume that each data included in the database occurs in  a similar frequency [7]. In reality, however, the data items may occur either relatively frequently or not, according to the characteristics of the database [8]. And its frequency in the database does not satisfy the minimum support but appears associated with the specific data in high proportion of its frequency.

Nevertheless, the existing association rule discovery techniques do not consider the occurrence frequency pattern of data, and discover the association rules using the same support on the whole data, so the rules associating with infrequent data cannot be discovered.

To solve the problems above, in this paper, a new algorithm of discovering association rules that contain the first support, the second support and Rel-confidence is presented, which not only is applicable to excavation of the frequent data item, and but also is applicable to infrequent data item. And then, two transaction databases at different time periods are mined based on the algorithm. The changes in e-shopper behavior are identified by comparison and analysis between the two sets of association rules generated from two databases of different time periods. In addition, the most previous studies of customer behavior applied customer demographic variables to analyze customer behavior [9].

This paper is organized as follows. Section 2 formulates the algorithm how to discover frequent items from database, and presents the algorithm.

Section 3 presents analysis on the changes in E-shopper behavior basing on the discovered association rules.

Section 4 illustrates an example, and mines the changes in E-shopper behavior. Section 5 presents summary and conclusions.

2. Formulation of the algorithm   To solve the problem of infrequent data are hardly discovered in the existing association rule discovery methods, the first support, the second support, Rel-confidence and min-confidence are set in the algorithm. The first support is critical value of the user-specified support used in the process of frequent itemsets discovery. The second support is critical value of the user-specified support in the process of significant infrequent itemsets discovery.

Rel-confidence is set to discover significant infrequent   DOI 10.1109/FSKD.2008.384     data items that co-occur with the specific data in high proportion of its frequency, and is determined by candidate itemset {i1, i2, ?, ik}. The second support works with Rel-confidence together to generate semi-frequent itemsets from candidate itemsets.

Correlation between the first support and the second support is subject to the following inequality:  1stsupport>2ndsupport                   (1) The first support and the second support are set so  that the condition (1st support > 2nd support) is satisfied. If the expression of inequality is not satisfied, redundant rules can be generated or the rare items may not be discovered.

Rel-confidence is defined as follows: If a database is defined as the data set I = {i1, i2, ? , im} and the support of the data item i is expressed as ( )isup , Rel-confidence, the maximum confidence between the data in the candidate itemset {i1, i2, ? , ik}, is Rel-confidence (i1, i2, ? , ik) = max{sup(i1, i2, ? , ik)/sup(i1), sup(i1, i2, ? , ik)/sup(i2), ?, sup(i1, i2, ? , ik)/sup(ik)}.                                 (2) Rel-confidence is between 0 and 1, and is determined by selecting the largest one among the con-fidence values for the candidate itemset against each data item.

Transaction database usually is composed of two groups of data items. One group includes frequent data items that satisfy the first support, and the other group includes rare data items that do not satisfy the first support. Firstly, the customers' information and transactions are recorded in the database. The proposed data mining procedure is then applied to analyze customers' purchase records. Each data item in database is inserted into C1, 1-candidate itemsets when the algorithm program scans database. To generate L1, frequent 1-itemsets, each 1-candidate itemset that satisfies the first support or the second support is inserted into L1, frequent 1- itemsets. C2, 2- candidate itemsets, are constructed by joining two items from frequent 1- itemsets. And then, count of support is made for each 2-candidate itemset {i1, i2}. 2-candidate itemset is inserted into L2, frequent 2- itemsets if it satisfies the first support. For 2-candidate itemset that do not satisfy the first support but satisfy the second support, calculation of the Rel-confidence of (i1, i2, ? , ik) is made. If the Rel-confidence is greater than or equal to the min_confidence specified by user, the 2-candidate itemset is considered as semi-frequent itemset, and also is inserted into L2, frequent 2- itemsets, otherwise is deleted. Consequently, frequent 2- itemsets that contain significant infrequent data itemsets are constructed. The process repeats until the candidate itemsets cannot be generated any more. The overall process of rules discovery is as shown in Figure 1.

Suppose frequent k-itemset {i1, i2, ? , ik} is the final frequent itemset that cannot generate candidate itemsets,  and then, association rules are discovered by calculating confidence of {i1, i2, ? , ik} and comparing that with min-confidence specified by user.

Satisfy the first support    or satisfy the second support     Join/pruin       Yes  No                     Figure 1. The overall process of rules discovery  K-frequent itemsets, where k is the number of the data items in its itemsets, is represented as Lk.

K-candidate itemsets , where k is the number of data items in its each itemset, is represented as Ck. Ik represents the candidate itemset from Ck. Ik.support represents the support for candidate itemset Ik.

3. Analysis of changes in purchase behavior  Association rule reflects the correlation between e-shopper profiles and purchased products. Therefore, association rules are adopted for change mining to identify customer behaviors. However, association rules discovered at different time periods of time vary over time [10]. So, the changes in customer behavior are identified by comparison between two sets of association rules generated from two datasets of different time periods. Association rules are descriptive patterns of the form X?Y, where X and Y are statements regarding the values of attributes of an  Scans transactions database, and generates 1-candidate itemsets, C1.

1-candidate itemset is into frequent 1-itemsets, L1  Candi-gen (LK) generates candidate itemsets,  Ik.sup?1st sup  Ik.sup?2nd sup max-conf?min-conf  Are k-candidate itemsets generated ?

Generates frequent k-itemsets, Lk.

Extract association rules by calculating confidence  Deletes Ck     instance in a database. X is termed the left-hand-side, and is the conditional part of an association rule.

Meanwhile, Y is called the right-hand-side, and is the consequent part. According to similarity or difference of association rules extracted from two datasets of different time periods, e-shopper behavior is classified into three behavior patterns to measure changes in customer behavior [11]. These patterns include robust pattern, appearing pattern, and unexpected change.

Robust patterns are defined as rules whose supports increase extensively between two time periods of time stamped datasets and imply that the same consumer behavior exists in different time periods of time. The positive pattern growth rate (i.e. the support of a rule increases over time) indicates that the customer behavior becomes robust over time. Meanwhile, a pattern growth rate below zero indicates that the customer behavior is getting weak. For association rules, a rule at period t1, Rti1  is identical with another one ( Rtj2 ) at period t2. But support for the two rules differs significantly between different time periods.

When robust patterns are applied in marketing, positive robust patterns require company to do concerted marketing efforts, and to provide satisfying services for customers. Meanwhile, negative robust patterns suggest that the use of marketing resources should be reduced by avoiding less profitable customers.

Appearing pattern is identified as a rule if conditional and consequent parts of Rti2 , differ significantly from any rule, Rti1 , at period t1. Appearing pattern suggests that new target customers and new customer needs occur. Therefore, marketing manager should develop new marketing strategy to stimulate customer?s needs in time and explore new consumer markets.

Unexpected patterns can be classified into unexpected conditional changes and unexpected consequent changes. If the conditional parts of Rti1 and  Rtj2 are similar, but their consequent parts are different,  then Rtj2 is an unexpected consequent change with  respect to Rti1 . Moreover, if the consequent parts of Rti1 and Rtj2 are similar, but their conditional parts are  different, then Rtj2 is an unexpected conditional change  with respect to Rti1 . The patterns of customer behavior reflect the associations between customer attributes and their purchased products. Therefore, the conditional part of association rule takes the form of customer  profile presented by demographic variables and customer behavioral variables. While the consequent part denotes the product purchased by customers.

Unexpected consequent patterns indicate that customers with the same characteristics no longer purchase the same products, and shift their purchasing behavior or buy different products. Consequently, marketing decision makers can promote new products based on the projection of unexpected purchasing rules, or can strengthen their marketing efforts to retain customers.

Unexpected conditional patterns indicate changes occurring in the target customers of products, and consumer group of specific products has been changed to another group.

4. Mining association rules  E-shoppers are segmented into four clusters in terms of in terms of average purchase expenditure (monetary) and purchase frequency [16]. These four customer groups include best customers, frequent customers, spenders, and uncertain customers, as illustrated in Fig.

2. In the four clusters of e-shoppers, best customers represent the most valuable customers with higher purchase frequency and monetary expenditure, while spenders and uncertain customers represent peripheral customers whose purchase frequency and monetary expenditure are lower.  When recency is used for cross analysis of the four customer clusters, spenders and uncertain customers have not made regular purchases recently. Meanwhile, best customers consist of customers who have recently made regular purchases, and also have higher average purchase size and purchase frequency. Therefore, best customers are concluded to be the most valuable for the business. In this study, best customers are considered as the target object to be mined changes in purchase behavior.

Monetary Spender             Best     Uncertain          Frequent   Frequency Figure 2. Four clusters of e-shoppers  A record for transaction data usually includes following attributes: transactional ID, customer name, gender, age, product name, quantity and date, etc. To illustrate the process for mining changes in e-shoppers behavior, two databases of different time periods for e-shoppers buying products is as shown in table1and table2. The two given database includes ten transactional records that has four attributes. A, B, C, D     and E represent five different products, respectively.

Table 1. Transaction database at period t1 TID Name Sex Age Product   CN1 CN2 CN3 CN4 CN5 CN6 CN7 CN8 CN9  CN10  female male male male  female male male male male  female  ?30  30~50  ?30  ?50  ?30  ?30  30~50  ?30  30~50  ?30  A B C C D  A B C D E  C E C D E A B  C D E A B  C D E A B E  Table 2. Transaction database at period t2 TID Name Sex Age Product   CN11 CN12 CN13 CN14 CN15 CN16 CN17 CN18 CN19 CN20  male female female female male female female female female male  30~50  ?30  30~50  ?50  30~50  30~50  ?30  30~50  ?30  30~50  A  B C C D  A B C D E  C E C D E A B E C D E B E  A C D E A B E  Transaction database at period t1 is transformed into table.3 in order to discover association rules. In Tab.3, M and F represent male and female, respectively, and A1, A2 and A3 represent ??30?, ?30~50? and ??50?, respectively. The first support is set to 4 (40%), and the second supports to 2(20%), and min-confidence is set to 50%. The process for extracting association rules on table 3 is as follows:  Table 3. Data items in transaction database at period t1 TID Sex Age Product    F M M M F M M M M F  a1 a2 a1 a3 a1 a1 a2 a1 a2 a1  A B C C D  A B C D E C  E C D E A B  C D E A B D C D E A B E  The set of data items in the transactions database, I = {m, f, a1, a2, a3, a, b, c, d, e}, are inserted into C1, 1-candidate itemsets. Support for each item is as shown in Tab.4. It indicates that f, a2 and a3 are infrequent data item that does not satisfy the first support.

Meantime, a3 does not satisfy the second support, and is removed from C1. However, f and a2 satisfies the  second support, and is inserted into L1, frequent 1-itemsets. The other items all are frequent data item.

Therefore, L1, frequent 1-itemsets that contains rare data items is generated by running Algorithm2, L1 = {m, f, a1, a2, a, b, c, d, e}.

Table 4. Supports for each data item Item support Item support M F  A3 A D   A1 A2 B C E   C2, 2-candidate itemsets is generated by running Algorithm1, and is composed of the following 2-candidate items: {(m, a1), (m, a2), (m, a), (m, b), (m, c), (m, d), (m, e), (f, a1), (f, a2), (f, a), (f, b), (f, c), (f, d), (f, e), (a1, a), (a1, b), (a1, c), (a1, d), (a1, e), (a2, a), (a2, b), (a2, c), (a2, d), (a2, e), (a, b), (a, c), (a, d), (a, e), (b, c), (b, d), (b, e), (c, d), (c, e), (d, e)}. Algorithm2 counts supports for each 2-candidate itemset and compare the supports with the first support and the second support to generate L2, frequent 2-itemsets. In 2-candidate itemsets, (f, a2), (f, d), (a2, a) and (a2, b) are removed from C2 for not satisfying the first support and the second support. For 2-candidate items that satisfy the first support but do not satisfy the second support, Algorithm2 calculates the Rel-confidence of each 2-candidate item, and compares one with min-confidence specified by user. The 2-candidate items, (a, c), (a, d), (a, e), (b, c), (b, d), (b, e), satisfy the second support, but Rel-confidences for the items are smaller than min-confidence (50%), and accordingly are deleted from C2. The 2-candidate items, (m, a2), (m, a), (m, b), (m, e), (f, a), (f, b), (f, d), (f, a1), (f, c), (f, e), (a1, c), (a1, d), (a1, e), (a2, e), satisfy the second support, and Rel-confidence for the items is greater than or equal to min-confidence (50%). Therefore, the 2-candidate items are inserted into L2, frequent 2-itemsets. Consequently, frequent 2-itemsets includes the following items: (m, a1), (m, a2), (m, a), (m, b), (m, c), (m, d), (m, e), (f, a1), (f, a), (f, b), (f, c), (f, d), (f, e), (a1, a), (a1, b), (a1, c), (a1, d), (a1, e), (a2, c), (a2, d), (a2, e), (a, b), (c, d), (c, e), (d, e). The program repeats until the candidate itemsets cannot be generated any more.

The final frequent 4-items resulting from the discovery procedure are (m, a1, a, b) and (m, a2, c, d).

5-candidate itemsets cannot be generated from L4 = {(m, a1, a, b), (m, a2, c, d)}. Frequent 4-item,{m, a1, a, b} includes the two data items associating with customers profile and the two products bought by customers.

Therefore, (m, a2)?(c, d), association rule is verified whether to satisfy min-support and min-confidence.

The result is as follow: support{(m, a2)?(c, d)}=30%, confidence{(m, a2) ? (c, d)}= 100%. The result indicates that this rule satisfies min-support and min-confidence. The association rule, (m, a2)?(c, d) is represented by Rt11 . The association rule, (m, a1)?(a, b) also is discovered from the frequent 4-item, (m, a1, a, b). The association rule, (m, a1)?(a, b) is represented by Rt12 .

The same mining process runs in the transaction database at period t2 in order to discover association rules. According to the results from the running program, the final frequent itemsets are (f, a1, c, d) and (f, a2, b, e). Association rules are discovered from the final frequent itemsets, (f, a1, c, d) and (f, a2, b, e). The results are as follow: (f, a1)?(c, d), is represented by Rt21 , and (f, a2)?(b, e), is represented by Rt22 .

The association rules discovered from the two transaction databases at period t1 and t2 indicates purchase behavior for best customers has already varied over time. Comparing the association rules generated from the two transaction databases at period t1 and t2 can identify the changes in e-shopper behavior.

Rt11 is described as {sex = male age=?30~50? }?{c, d}, which reveals e-shoppers with such attributes as male and ?30~50? regularly purchase products of ?c? and ?d?. Rt21 is described as (sex = female age=??30? ?  ?(c, d), which reveals e-shoppers with such attributes as female and ??30? regularly purchase products of ?c? and ?d? at period t2. Although the consequent parts of Rt11 and Rt21  are similar, their conditional parts are different, so the changes in purchase behavior are an unexpected conditional change with respect to Rt11 . The former customers no longer purchase the same products. The same products may shift their initial target between customers at time periods t1 and t2. Consequently, marketing decision makers should enforce marketing efforts in promoting products of ?c? and ?d? to female customers and reduce promotions to male customers.

Rt22 is described as (sex = female age=?30~50?) ?(b, e), which reveals e-shoppers with such attributes as male and ?30~50? regularly purchase products of b and e. The conditional and consequent parts of Rt22 are different from the rules generated from database at period t1. Therefore, e-shoppers? behavior revealed by Rt22 belongs to appearing pattern, which indicates that new target customers and new customer needs occur. Marketing decision makers should be aware of the changes in market in time, and explore new  consumer markets and develop promotion plans to stimulate consumer needs. For the future promotion of products, marketing personnel can shift to different markets and target new customer clusters to create new markets.

5. Conclusions  In this study, a novel algorithm that contains the first support, the second support and Rel-confidence is proposed to discover association rules for both frequent data items and significant rare data items that appear infrequently in the database but are highly associated with specific data. Furthermore, based on the extracted association rules, the changes in e-shoppers purchase behavior are analyzed by comparison between two sets of association rules generated from two databases of different time periods. Consequently, potentially useful information is acquired to direct marketing decisions.

6. References  [1] Giudici, P, Passerone, G. Data mining of association structures to model consumer behavior. Computational Statistics and Data Analysis, 2002, 38:pp.533?541.

[2] M. Chen, S. Han, Data mining: an overview from a and Data Engineering, 2006, 8(6), pp.866?883.

[3]1B. Schafer, Konstan, E-commerce recommendation application, Journal of Data Mining and Knowledge Discovery, 2001, pp.125?153.

[4] S. Anand, A. Patrick, A data mining methodology for cross-sales, Knowledge-Based Systems, 2006, 10, pp.449-461.

[5] H. Mastsuzawa, T. Fukuda, Mining structured association patterns from databases, In Proceeding of the 4th Pacific-Asia Conference, PAKDD, 2000, pp.233-244.

[6] Goulbourne, G. Coenen, Algorithms for computing association rules using a partial-support tree, Knowledge-Based Systems, 2004, 13 (3), pp.141-149.

[7] R. Agrawal, T. Imielinski, A. Swami, Mining association rules between sets of items in large database, In Proceedings of the ACM SIGMOD Conference, 2003, pp.156-165.

[8] G.. Adomavicius, A. Tuzbilin, Using data mining methods to build customer profiles, IEEE Computer, 2006, 34 (2), pp.74?82.

[9] S. Changchien, Mining association rules procedures to support on-line recommendation by customers and products fragmentation, Expert Systems with Applications, 2001, 20(4), pp.325?335.

[10] 1Dhond, A. Gupta, S. Vadhavkar, Data mining techniques for optimizing inventories for electronic commerce, In the Proceeding of the ACM-SIGKDD International Conference on Knowledge Discovery and Data Mining, 2005, pp.480-486.

[11]1Thompson, S.H.Teo, YuanyouYu, Online buying behavior: a transaction cost economics perspective, Omega, 2005, 33, pp.451 ? 465.

